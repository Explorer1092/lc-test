!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="dist",n(n.s=41)}([function(t,e,n){"use strict";var r=n(18),o=n(49),i=Object.prototype.toString;function a(t){return"[object Array]"===i.call(t)}function s(t){return null!==t&&"object"==typeof t}function u(t){return"[object Function]"===i.call(t)}function c(t,e){if(null!==t&&void 0!==t)if("object"!=typeof t&&(t=[t]),a(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}t.exports={isArray:a,isArrayBuffer:function(t){return"[object ArrayBuffer]"===i.call(t)},isBuffer:o,isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:s,isUndefined:function(t){return void 0===t},isDate:function(t){return"[object Date]"===i.call(t)},isFile:function(t){return"[object File]"===i.call(t)},isBlob:function(t){return"[object Blob]"===i.call(t)},isFunction:u,isStream:function(t){return s(t)&&u(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:c,merge:function t(){var e={};function n(n,r){"object"==typeof e[r]&&"object"==typeof n?e[r]=t(e[r],n):e[r]=n}for(var r=0,o=arguments.length;r<o;r++)c(arguments[r],n);return e},extend:function(t,e,n){return c(e,function(e,o){t[o]=n&&"function"==typeof e?r(e,n):e}),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(t,e,n){t.exports=function(){var t=t||function(t,e){var n=Object.create||function(){function t(){}return function(e){var n;return t.prototype=e,n=new t,t.prototype=null,n}}(),r={},o=r.lib={},i=o.Base={extend:function(t){var e=n(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},a=o.WordArray=i.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=void 0!=e?e:4*t.length},toString:function(t){return(t||u).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes,o=t.sigBytes;if(this.clamp(),r%4)for(var i=0;i<o;i++){var a=n[i>>>2]>>>24-i%4*8&255;e[r+i>>>2]|=a<<24-(r+i)%4*8}else for(i=0;i<o;i+=4)e[r+i>>>2]=n[i>>>2];return this.sigBytes+=o,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=i.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n,r=[],o=function(e){e=e;var n=987654321,r=4294967295;return function(){var o=((n=36969*(65535&n)+(n>>16)&r)<<16)+(e=18e3*(65535&e)+(e>>16)&r)&r;return o/=4294967296,(o+=.5)*(t.random()>.5?1:-1)}},i=0;i<e;i+=4){var s=o(4294967296*(n||t.random()));n=987654071*s(),r.push(4294967296*s()|0)}return new a.init(r,e)}}),s=r.enc={},u=s.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],o=0;o<n;o++){var i=e[o>>>2]>>>24-o%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new a.init(n,e/2)}},c=s.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],o=0;o<n;o++){var i=e[o>>>2]>>>24-o%4*8&255;r.push(String.fromCharCode(i))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new a.init(n,e)}},f=s.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},l=o.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=f.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,r=n.words,o=n.sigBytes,i=this.blockSize,s=o/(4*i),u=(s=e?t.ceil(s):t.max((0|s)-this._minBufferSize,0))*i,c=t.min(4*u,o);if(u){for(var f=0;f<u;f+=i)this._doProcessBlock(r,f);var l=r.splice(0,u);n.sigBytes-=c}return new a.init(l,c)},clone:function(){var t=i.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),p=(o.Hasher=l.extend({cfg:i.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new p.HMAC.init(t,n).finalize(e)}}}),r.algo={});return r}(Math);return t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isAsync=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(75)),o="function"==typeof Symbol;function i(t){return o&&"AsyncFunction"===t[Symbol.toStringTag]}e.default=function(t){return i(t)?(0,r.default)(t):t},e.isAsync=i},function(t,e,n){"use strict";var r=n(40);function o(){}var i=null,a={};function s(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("Promise constructor's argument is not a function");this._h=0,this._i=0,this._j=null,this._k=null,t!==o&&d(t,this)}function u(t,e){for(;3===t._i;)t=t._j;if(s._l&&s._l(t),0===t._i)return 0===t._h?(t._h=1,void(t._k=e)):1===t._h?(t._h=2,void(t._k=[t._k,e])):void t._k.push(e);!function(t,e){r(function(){var n=1===t._i?e.onFulfilled:e.onRejected;if(null!==n){var r=function(t,e){try{return t(e)}catch(t){return i=t,a}}(n,t._j);r===a?f(e.promise,i):c(e.promise,r)}else 1===t._i?c(e.promise,t._j):f(e.promise,t._j)})}(t,e)}function c(t,e){if(e===t)return f(t,new TypeError("A promise cannot be resolved with itself."));if(e&&("object"==typeof e||"function"==typeof e)){var n=function(t){try{return t.then}catch(t){return i=t,a}}(e);if(n===a)return f(t,i);if(n===t.then&&e instanceof s)return t._i=3,t._j=e,void l(t);if("function"==typeof n)return void d(n.bind(e),t)}t._i=1,t._j=e,l(t)}function f(t,e){t._i=2,t._j=e,s._m&&s._m(t,e),l(t)}function l(t){if(1===t._h&&(u(t,t._k),t._k=null),2===t._h){for(var e=0;e<t._k.length;e++)u(t,t._k[e]);t._k=null}}function p(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function d(t,e){var n=!1,r=function(t,e,n){try{t(e,n)}catch(t){return i=t,a}}(t,function(t){n||(n=!0,c(e,t))},function(t){n||(n=!0,f(e,t))});n||r!==a||(n=!0,f(e,i))}t.exports=s,s._l=null,s._m=null,s._n=o,s.prototype.then=function(t,e){if(this.constructor!==s)return function(t,e,n){return new t.constructor(function(r,i){var a=new s(o);a.then(r,i),u(t,new p(e,n,a))})}(this,t,e);var n=new s(o);return u(this,new p(t,e,n)),n}},function(t,e){t.exports=function(){}},function(t,e,n){t.exports=function(t){return function(){var e=t,n=e.lib.WordArray;e.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,r=this._map;t.clamp();for(var o=[],i=0;i<n;i+=3)for(var a=(e[i>>>2]>>>24-i%4*8&255)<<16|(e[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|e[i+2>>>2]>>>24-(i+2)%4*8&255,s=0;s<4&&i+.75*s<n;s++)o.push(r.charAt(a>>>6*(3-s)&63));var u=r.charAt(64);if(u)for(;o.length%4;)o.push(u);return o.join("")},parse:function(t){var e=t.length,r=this._map,o=this._reverseMap;if(!o){o=this._reverseMap=[];for(var i=0;i<r.length;i++)o[r.charCodeAt(i)]=i}var a=r.charAt(64);if(a){var s=t.indexOf(a);-1!==s&&(e=s)}return function(t,e,r){for(var o=[],i=0,a=0;a<e;a++)if(a%4){var s=r[t.charCodeAt(a-1)]<<a%4*2,u=r[t.charCodeAt(a)]>>>6-a%4*2;o[i>>>2]|=(s|u)<<24-i%4*8,i++}return n.create(o,i)}(t,e,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),t.enc.Base64}(n(1))},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(82),o=n(33);t.exports=function(t){return null!=t&&o(t.length)&&!r(t)}},function(t,e,n){"use strict";(function(e){var r=n(0),o=n(51),i={"Content-Type":"application/x-www-form-urlencoded"};function a(t,e){!r.isUndefined(t)&&r.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var s={adapter:function(){var t;return"undefined"!=typeof XMLHttpRequest?t=n(19):void 0!==e&&(t=n(19)),t}(),transformRequest:[function(t,e){return o(e,"Content-Type"),r.isFormData(t)||r.isArrayBuffer(t)||r.isBuffer(t)||r.isStream(t)||r.isFile(t)||r.isBlob(t)?t:r.isArrayBufferView(t)?t.buffer:r.isURLSearchParams(t)?(a(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):r.isObject(t)?(a(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],function(t){s.headers[t]={}}),r.forEach(["post","put","patch"],function(t){s.headers[t]=r.merge(i)}),t.exports=s}).call(this,n(9))},function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,c=[],f=!1,l=-1;function p(){f&&u&&(f=!1,u.length?c=u.concat(c):l=-1,c.length&&d())}function d(){if(!f){var t=s(p);f=!0;for(var e=c.length;e;){for(u=c,c=[];++l<e;)u&&u[l].run();l=-1,e=c.length}u=null,f=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function y(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new h(t,e)),1!==c.length||f||s(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,n){t.exports=function(t){!function(){var e=t,n=e.lib.Base,r=e.enc.Utf8;e.algo.HMAC=n.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=r.parse(e));var n=t.blockSize,o=4*n;e.sigBytes>o&&(e=t.finalize(e)),e.clamp();for(var i=this._oKey=e.clone(),a=this._iKey=e.clone(),s=i.words,u=a.words,c=0;c<n;c++)s[c]^=1549556828,u[c]^=909522486;i.sigBytes=a.sigBytes=o,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher,n=e.finalize(t);return e.reset(),e.finalize(this._oKey.clone().concat(n))}})}()}(n(1))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return function(){if(null!==t){var e=t;t=null,e.apply(this,arguments)}}},t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){e|=0;for(var n=Math.max(t.length-e,0),r=Array(n),o=0;o<n;o++)r[o]=t[e+o];return r},t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}},t.exports=e.default},function(t,e,n){var r=n(30),o=n(83),i=n(84),a=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?o(t):i(t)}},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){t.exports=n(45)},function(t,e,n){t.exports=n(48)},function(t,e,n){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}}},function(t,e,n){"use strict";var r=n(0),o=n(52),i=n(54),a=n(55),s=n(56),u=n(20),c="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||n(57);t.exports=function(t){return new Promise(function(e,f){var l=t.data,p=t.headers;r.isFormData(l)&&delete p["Content-Type"];var d=new XMLHttpRequest,h="onreadystatechange",y=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in d||s(t.url)||(d=new window.XDomainRequest,h="onload",y=!0,d.onprogress=function(){},d.ontimeout=function(){}),t.auth){var v=t.auth.username||"",g=t.auth.password||"";p.Authorization="Basic "+c(v+":"+g)}if(d.open(t.method.toUpperCase(),i(t.url,t.params,t.paramsSerializer),!0),d.timeout=t.timeout,d[h]=function(){if(d&&(4===d.readyState||y)&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in d?a(d.getAllResponseHeaders()):null,r={data:t.responseType&&"text"!==t.responseType?d.response:d.responseText,status:1223===d.status?204:d.status,statusText:1223===d.status?"No Content":d.statusText,headers:n,config:t,request:d};o(e,f,r),d=null}},d.onerror=function(){f(u("Network Error",t,null,d)),d=null},d.ontimeout=function(){f(u("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",d)),d=null},r.isStandardBrowserEnv()){var m=n(58),b=(t.withCredentials||s(t.url))&&t.xsrfCookieName?m.read(t.xsrfCookieName):void 0;b&&(p[t.xsrfHeaderName]=b)}if("setRequestHeader"in d&&r.forEach(p,function(t,e){void 0===l&&"content-type"===e.toLowerCase()?delete p[e]:d.setRequestHeader(e,t)}),t.withCredentials&&(d.withCredentials=!0),t.responseType)try{d.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&d.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(t){d&&(d.abort(),f(t),d=null)}),void 0===l&&(l=null),d.send(l)})}},function(t,e,n){"use strict";var r=n(53);t.exports=function(t,e,n,o,i){var a=new Error(t);return r(a,e,n,o,i)}},function(t,e,n){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,n){"use strict";function r(t){this.message=t}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,t.exports=r},function(t,e,n){t.exports=n(1).enc.Utf8},function(t,e,n){t.exports=function(t){return function(){var e=t,n=e.lib,r=n.Base,o=n.WordArray,i=e.algo,a=i.MD5,s=i.EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:a,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n=this.cfg,r=n.hasher.create(),i=o.create(),a=i.words,s=n.keySize,u=n.iterations;a.length<s;){c&&r.update(c);var c=r.update(t).finalize(e);r.reset();for(var f=1;f<u;f++)c=r.finalize(c),r.reset();i.concat(c)}return i.sigBytes=4*s,i}});e.EvpKDF=function(t,e,n){return s.create(n).compute(t,e)}}(),t.EvpKDF}(n(1),n(25),n(10))},function(t,e,n){t.exports=function(t){return function(){var e=t,n=e.lib,r=n.WordArray,o=n.Hasher,i=[],a=e.algo.SHA1=o.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],o=n[1],a=n[2],s=n[3],u=n[4],c=0;c<80;c++){if(c<16)i[c]=0|t[e+c];else{var f=i[c-3]^i[c-8]^i[c-14]^i[c-16];i[c]=f<<1|f>>>31}var l=(r<<5|r>>>27)+u+i[c];l+=c<20?1518500249+(o&a|~o&s):c<40?1859775393+(o^a^s):c<60?(o&a|o&s|a&s)-1894007588:(o^a^s)-899497514,u=s,s=a,a=o<<30|o>>>2,o=r,r=l}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+a|0,n[3]=n[3]+s|0,n[4]=n[4]+u|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;return e[r>>>5]|=128<<24-r%32,e[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),e[15+(r+64>>>9<<4)]=n,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA1=o._createHelper(a),e.HmacSHA1=o._createHmacHelper(a)}(),t.SHA1}(n(1))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if(e=(0,i.default)(e||o.default),!(0,r.default)(t))return e(new Error("First argument to waterfall must be an array of functions"));if(!t.length)return e();var n=0;function c(e){var r=(0,u.default)(t[n++]);e.push((0,s.default)(f)),r.apply(null,e)}function f(r){if(r||n===t.length)return e.apply(null,arguments);c((0,a.default)(arguments,1))}c([])};var r=c(n(27)),o=c(n(4)),i=c(n(11)),a=c(n(12)),s=c(n(13)),u=c(n(2));function c(t){return t&&t.__esModule?t:{default:t}}t.exports=e.default},function(t,e){var n=Array.isArray;t.exports=n},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(80)),o=i(n(37));function i(t){return t&&t.__esModule?t:{default:t}}e.default=(0,r.default)(o.default),t.exports=e.default},function(t,e,n){var r=n(31).Symbol;t.exports=r},function(t,e,n){var r=n(32),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();t.exports=i},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(6))},function(t,e){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={},t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return function(e,n,u){if(u=(0,o.default)(u||r.default),t<=0||!e)return u(null);var c=(0,i.default)(e),f=!1,l=0,p=!1;function d(t,e){if(l-=1,t)f=!0,u(t);else{if(e===s.default||f&&l<=0)return f=!0,u(null);p||h()}}function h(){for(p=!0;l<t&&!f;){var e=c();if(null===e)return f=!0,void(l<=0&&u(null));l+=1,n(e.value,e.key,(0,a.default)(d))}p=!1}h()}};var r=u(n(4)),o=u(n(11)),i=u(n(86)),a=u(n(13)),s=u(n(34));function u(t){return t&&t.__esModule?t:{default:t}}t.exports=e.default},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n,i){i=i||r.default,e=e||[];var a=[],s=0,u=(0,o.default)(n);t(e,function(t,e,n){var r=s++;u(t,function(t,e){a[r]=e,n(t)})},function(t){i(t,a)})};var r=i(n(4)),o=i(n(2));function i(t){return t&&t.__esModule?t:{default:t}}t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(39)),o=i(n(37));function i(t){return t&&t.__esModule?t:{default:t}}e.default=(0,r.default)(o.default),t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return function(e,n,i,a){return t((0,r.default)(n),e,(0,o.default)(i),a)}};var r=i(n(35)),o=i(n(2));function i(t){return t&&t.__esModule?t:{default:t}}t.exports=e.default},function(t,e,n){"use strict";(function(e){function n(t){o.length||r(),o[o.length]=t}t.exports=n;var r,o=[],i=0,a=1024;function s(){for(;i<o.length;){var t=i;if(i+=1,o[t].call(),i>a){for(var e=0,n=o.length-i;e<n;e++)o[e]=o[e+i];o.length-=i,i=0}}o.length=0,i=0}var u=void 0!==e?e:self,c=u.MutationObserver||u.WebKitMutationObserver;function f(t){return function(){var e=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(e),clearInterval(n),t()}}}r="function"==typeof c?function(t){var e=1,n=new c(s),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){e=-e,r.data=e}}():f(s),n.requestFlush=r,n.makeRequestCallFromTimer=f}).call(this,n(6))},function(t,e,n){t.exports=n(42)},function(t,e,n){var r=n(43),o=n(44).default,i=n(119),a=n(124),s={NOT_READY:1,CONNECTING:2,PREPARE_START:3,WAITING_AUDIO_STREAM:4,RESULT_RECEIVING:5,RESULT_RECEIVED:6,CLOSED:7};function u(t){var e=t.env;apiUrlMap={test:"https://a66-ecp.vipkid-qa.com.cn/iscp/api/v1",pre:"https://pre-ecp.vipkid.com.cn/iscp/api/v1",prod:"https://wss.vipkid.com.cn/iscp/api/v1"};var n=t.appId,u=t.onError,c=t.onState,f=[],l=[],p=[],d=!1,h=!1,y=null,v=null,g=apiUrlMap[e||"prod"];this.start=function(t){k("start")&&(m.sendAudioInfo(t),b.recorder.start(),S(r.AUDIO_RECORDING))},this.stop=function(){k("stop")&&(y=R(16),b.recorder.stop(),m.stop())},this.close=function(){b.state!==r.NOT_READY&&b.state!==r.CLOSED&&(b.recorder.stop(),m.close())},this.state=r.NOT_READY;var m,b=this;function _(t){switch(A("*** EvaluaterCore state change:",t),t.code){case s.NOT_READY:x(r.NOT_READY);break;case s.CONNECTING:S(r.CONNECTING);break;case s.PREPARE_START:h||S(r.PREPARE_START);break;case s.RESULT_RECEIVING:S(r.RESULT_RECEIVING);break;case s.RESULT_RECEIVED:var e=t.data,n=e.view;n.audioBlob=v,n.audioUrl?(S(r.RESULT_RECEIVED,null,n),m.updateState(r.PREPARE_START)):h=!0,p.push({id:y,result:n,scoreId:e.scoreId}),w(y);break;case s.CLOSED:S(r.CLOSED)}}function w(e){var o=O(p,{id:e}),i=O(l,{id:e});if(o&&i){var a=o.result;a.audioUrl||(a.audioUrl=i.audioUrl,S(r.RESULT_RECEIVED,null,a),h=!1,m.updateState(r.PREPARE_START)),function(e,r){B({url:g+"/result/save",type:"post",data:{userId:t.userId||"",appId:n,scoreId:e.scoreId,audioUrl:e.audioUrl,deviceInfo:JSON.stringify(I())},success:function(){A("upload evaluate result success")},error:function(t){A("send evaluate result fail: ",t)}})}({scoreId:o.scoreId,audioUrl:i.audioUrl}),p.splice(p.indexOf(o),1),l.splice(l.indexOf(i),1)}}function E(e){switch(A("EvaluaterCore error:",e),e.code){case 1101:case 1104:case 1105:T(e,{recorder:!0}),[1104,1105].indexOf(e.code)>-1&&function(e){B({url:g+"/abnormal/report",type:"post",data:{appId:n,code:"50001",description:JSON.stringify({userId:t.userId||"",message:e.message,time:(new Date).getTime(),deviceInfo:JSON.stringify(I()),serverVersion:"v2"})},success:function(){A("upload error success")},error:function(t){A("upload error fail: ",t)}})}(e);break;case 1107:T(e,{recorder:!0});break;case 4001:case 4002:case 4003:b.recorder.stop(),T(e,{evaluater:!0});break;default:T(e,{recorder:!0}),A("evaluater core error: ",e)}}function k(t){if(A("stage: ",t,", state: ",b.state),b.state===r.NOT_READY)throw new Error("[VKEvaluater] The server not ready.");if(b.state===r.CONNECTING)throw new Error("[VKEvaluater] The server still in connecting.");if(b.state===r.CLOSED)throw new Error("[VKEvaluaterCore] The server already closed. Please re-init it before use it agiain.");if("start"===t&&b.state!==r.PREPARE_START)throw new Error("[VKEvaluater] Start must be called after evaluater prepared.");return"stop"!==t||b.state===r.AUDIO_RECORDING||(console.warn("[VKEvaluater] Stop must be called after evaluater.start()."),!1)}function T(t,e){var n=e&&e.message;e&&!0===e.recorder&&(n=t.message,t={902001:"recordNotSupport"}[t.code]),e&&!0===e.evaluater&&(n=t.message,t={1101:"evaluateNotSupport",1104:"cannotConnect",1105:"connectTimeout",1107:"authFial",4001:"audioInfoInvalid",4002:"evaluateFail",4003:"evaluateTimeout",1000:"unknown"}[t.code]);var r={evaluateNotSupport:{code:1101,message:n||"evaluate not supported"},recordNotSupport:{code:1102,message:n||"record not supported"},recordPermissionDeny:{code:1103,message:n||"record permission deny"},cannotConnect:{code:1104,message:"server cannot connect"},connectTimeout:{code:1105,message:"connect timeout"},networkAnomaly:{code:1106,message:"network anomaly"},authFial:{code:1107,message:"appId invalid"},audioInfoInvalid:{code:4001,message:n||"audio info invalid"},evaluateFail:{code:4002,message:n||"evaluate failed"},evaluateTimeout:{code:4003,message:n||"evaluate timeout"},unknown:{code:1e3,message:"unknown error"}},o=r[t];o&&(o.message=n||o.message),u(o||r.unknown)}function x(t){b.state=t}function S(t,e,n){x(t),c({code:t,message:e,data:n})}function B(t){t.success=t.success||function(){},t.error=t.error||function(){};var e=new XMLHttpRequest,n=!1;e.onerror=function(t){A("xhr err:",t),n=!0},e.onloadend=function(){if(n)t.error("cannot connect server");else{if(404===e.status)return void t.error("server error(404 not found)");var r;try{r=JSON.parse(e.responseText)}catch(e){return t.error("response format error")}200===e.status?t.success(r.data):400===e.status&&t.error(r.message)}},e.open(t.type||"get",t.url,!0),"post"===t.type&&t.data?(e.setRequestHeader("Content-Type","application/json; charset=utf-8"),e.send(JSON.stringify(t.data))):e.send()}function I(){return{userAgent:navigator.userAgent,vendor:navigator.vendor,platform:navigator.platform,appName:navigator.appName}}function R(t){var e="";for(t=t||32;t--;)e+=(16*Math.random()|0)%2?(16*Math.random()|0).toString(16):(16*Math.random()|0).toString(16).toUpperCase();return e.toLowerCase()}function A(){if(!0===window._vkm_debug||!0===window._vkm_evaluate_debug){var t=Array.prototype.slice.call(arguments);t.unshift("Evaluater:"),console.debug.apply(console,t)}}function O(t,e){for(var n=Object.keys(e),r=0;r<t.length;r++){for(var o=t[r],i=!0,a=0;a<n.length;a++){var s=n[a];if(o[s]!==e[s]){i=!1;break}}if(i)return o}return null}b.recorder=new a,b.recorder.init(function(t){t?T(t,{recorder:!0}):m=new i({appId:n,env:e,onState:_,onError:E})}),b.recorder.onRecording(function(t){k("sendAudioStream")&&m.sendAudioStream(t)}),b.recorder.exportBlob(function(t){v=t,f.push({id:y,audioBlob:t}),function(){if(!d&&0!==f.length){d=!0;var t=function(){item=f.shift(),item?function(t,e){if("localhost"===location.hostname)return A("localhost环境下，上传CDN会涉及跨域，所以跳过上传"),e(null,"https://media.vipkidstatic.com/speechcloud/audio/3fccefb4632daaf9.wav");var n=R(16),r=new File([t],n+".wav",{type:"audio/wav",lastModified:Date.now()}),i=new o({accessKey:"8572e0430fce035c",secretKey:"07c84c233bee4e23bac60b38b4cc675a",client:"speechcloud",path:"speechcloud/audio/"});i.addfiles(r),i.submit(function(t,n){t?e(t):e(null,n.objects[0].url)},function(){})}(item.audioBlob,function(e,n){e&&A("upload audio fail",e),item.audioUrl=n||null,l.push(item),w(item.id),t()}):d=!1};t()}}()})}window&&(window.VKEvaluater=u),t.exports=u},function(t,e){t.exports={NOT_READY:1,CONNECTING:2,PREPARE_START:3,AUDIO_RECORDING:4,RESULT_RECEIVING:5,RESULT_RECEIVED:6,CLOSED:7,INTERRUPTED:8}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s(n(16)),o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=s(n(47));function s(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){var n=t.accessKey,r=t.secretKey,o=t.client,i=void 0===o?0:o,a=t.path,s=void 0===a?"fe-static":a;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),!i)throw new Error("必须定义一下当前client 如：vfe-parent-version ");var u=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{accessKey:n,secretKey:r,client:i,path:s}));return u.files=[],u}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),i(e,[{key:"addfiles",value:function(t){this.files=this.files.concat(t)}},{key:"fileKeys",value:function(){var t=this;return this.files.map(function(e){if(e.fullname)return e.key=e.fullname.replace(/^\/*/g,"").replace(/\/+/g,"/"),e.key;var n=(e.path||t.path)+"/"+e.name;return e.key=n.replace(/^\/*/g,"").replace(/\/+/g,"/"),e.key})}},{key:"submit",value:function(t,e){var n,i,a,s,u,c,f,l,p,d,h,y,v,g;return r.default.async(function(m){for(;;)switch(m.prev=m.next){case 0:if(n=null,(u=this.fileKeys(this.files)).length){m.next=4;break}throw new Error("必须至少添加一个文件");case 4:return m.next=6,r.default.awrap(this.getToken(u));case 6:if(c=m.sent,f=o(c,2),n=f[0],i=f[1],!n){m.next=13;break}return t(n),m.abrupt("return");case 13:return m.next=15,r.default.awrap(this.exists(u));case 15:if(l=m.sent,p=o(l,2),n=p[0],p[1],!n){m.next=22;break}return t(n),m.abrupt("return");case 22:return m.next=24,r.default.awrap(this.uploadFile(i,e));case 24:if(d=m.sent,h=o(d,2),n=h[0],a=h[1],!n){m.next=31;break}return t(n),m.abrupt("return");case 31:return y=a.filter(function(t){return t}).map(function(t){return t.name}),m.next=34,r.default.awrap(this.notifier(y,i.accessToken));case 34:v=m.sent,g=o(v,2),n=g[0],s=g[1],t(n,s);case 39:case"end":return m.stop()}},null,this)}},{key:"reset",value:function(){this.files=[]}}]),e}();e.default=u},function(t,e,n){var r=function(){return this}()||Function("return this")(),o=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,i=o&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,t.exports=n(46),o)r.regeneratorRuntime=i;else try{delete r.regeneratorRuntime}catch(t){r.regeneratorRuntime=void 0}},function(t,e){!function(e){"use strict";var n,r=Object.prototype,o=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag",c="object"==typeof t,f=e.regeneratorRuntime;if(f)c&&(t.exports=f);else{(f=e.regeneratorRuntime=c?t.exports:{}).wrap=_;var l="suspendedStart",p="suspendedYield",d="executing",h="completed",y={},v={};v[a]=function(){return this};var g=Object.getPrototypeOf,m=g&&g(g(O([])));m&&m!==r&&o.call(m,a)&&(v=m);var b=T.prototype=E.prototype=Object.create(v);k.prototype=b.constructor=T,T.constructor=k,T[u]=k.displayName="GeneratorFunction",f.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===k||"GeneratorFunction"===(e.displayName||e.name))},f.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,T):(t.__proto__=T,u in t||(t[u]="GeneratorFunction")),t.prototype=Object.create(b),t},f.awrap=function(t){return{__await:t}},x(S.prototype),S.prototype[s]=function(){return this},f.AsyncIterator=S,f.async=function(t,e,n,r){var o=new S(_(t,e,n,r));return f.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},x(b),b[u]="Generator",b[a]=function(){return this},b.toString=function(){return"[object Generator]"},f.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},f.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(R),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,o){return s.type="throw",s.arg=t,e.next=r,o&&(e.method="next",e.arg=n),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),R(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;R(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),y}}}function _(t,e,n,r){var o=e&&e.prototype instanceof E?e:E,i=Object.create(o.prototype),a=new A(r||[]);return i._invoke=function(t,e,n){var r=l;return function(o,i){if(r===d)throw new Error("Generator is already running");if(r===h){if("throw"===o)throw i;return j()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=B(a,n);if(s){if(s===y)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=w(t,e,n);if("normal"===u.type){if(r=n.done?h:p,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=h,n.method="throw",n.arg=u.arg)}}}(t,n,a),i}function w(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function E(){}function k(){}function T(){}function x(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function S(t){var e;this._invoke=function(n,r){function i(){return new Promise(function(e,i){!function e(n,r,i,a){var s=w(t[n],t,r);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==typeof c&&o.call(c,"__await")?Promise.resolve(c.__await).then(function(t){e("next",t,i,a)},function(t){e("throw",t,i,a)}):Promise.resolve(c).then(function(t){u.value=t,i(u)},a)}a(s.arg)}(n,r,e,i)})}return e=e?e.then(i,i):i()}}function B(t,e){var r=t.iterator[e.method];if(r===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=n,B(t,e),"throw"===e.method))return y;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var o=w(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,y;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,y):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,y)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function O(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(o.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=n,e.done=!0,e};return i.next=i}}return{next:j}}function j(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=p(n(16)),o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=p(n(17)),s=p(n(66)),u=p(n(72)),c=p(n(73)),f=p(n(107)),l=p(n(115));function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(t){var n=t.accessKey,r=t.secretKey,o=t.client,i=void 0===o?"filepush fe-sdk":o,a=t.path;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return Object.assign(s,{accessKey:n,secretKey:r,client:i,path:a}),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),i(e,[{key:"http",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Math.round((new Date).getTime()/1e3).toString();return a.default.create({baseURL:"https://fe-vos.vipkid.com.cn/rest/",timeout:6e3,headers:Object.assign({"Content-Type":"application/json","VOS-ACCESS-KEY":this.accessKey,"VOS-ACCESS-SIGN":this.UrlSafeEncode(this.HmacSHA256(e+"."+this.accessKey,this.secretKey)),"VOS-ACCESS-TIMESTAMP":e,"X-VOS-CLIENT":this.client},t)})}},{key:"getToken",value:function(t){var e,n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r.default.async(function(r){for(;;)switch(r.prev=r.next){case 0:return e=this.http(),r.abrupt("return",new f.default(function(r,i){e.post("/v1/object/put/token/",{requestToken:n.requestToken({header:o,payload:{requestId:u.default,client:n.client,clouds:["kodo","oss"]},secretKey:n.secretKey}),keys:t}).then(function(t){r([null,t.data])}).catch(function(t){r([t])})}));case 2:case"end":return r.stop()}},null,this)}},{key:"uploadFile",value:function(t,e){var n,i,a,s,u=this;return r.default.async(function(r){for(;;)switch(r.prev=r.next){case 0:if(t.accessToken){r.next=3;break}throw new Error("token 结果出错, 不存在在accessToken");case 3:return n=this.parseToken(t.accessToken),(i=o(n,4))[0],a=i[1],i[2],i[3],s=new c.default(a),r.abrupt("return",new f.default(function(t,n){s.put(u.files,function(e,n){t([e,n])},e)}));case 6:case"end":return r.stop()}},null,this)}},{key:"notifier",value:function(t,e){var n;return r.default.async(function(r){for(;;)switch(r.prev=r.next){case 0:return n=this.http(),r.abrupt("return",new f.default(function(r,o){n.post("/v1/object/put/commit",{accessToken:e,keys:t}).then(function(t){r([null,t.data])}).catch(function(t){r([t])})}));case 2:case"end":return r.stop()}},null,this)}},{key:"exists",value:function(t){var e;return r.default.async(function(n){for(;;)switch(n.prev=n.next){case 0:return e=this.http(),n.abrupt("return",new f.default(function(n,r){(0,l.default)(t,1,function(t,n){e.post("/v1/object/exists",{key:t}).then(function(e){var r=e.data;r&&r.exists?n(Object.assign({key:t},r)):n(null,r)}).catch(function(t){n(t)})},function(t,e){n([t,e])})}));case 2:case"end":return n.stop()}},null,this)}}]),e}();e.default=d},function(t,e,n){"use strict";var r=n(0),o=n(18),i=n(50),a=n(8);function s(t){var e=new i(t),n=o(i.prototype.request,e);return r.extend(n,i.prototype,e),r.extend(n,e),n}var u=s(a);u.Axios=i,u.create=function(t){return s(r.merge(a,t))},u.Cancel=n(22),u.CancelToken=n(64),u.isCancel=n(21),u.all=function(t){return Promise.all(t)},u.spread=n(65),t.exports=u,t.exports.default=u},function(t,e){function n(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */t.exports=function(t){return null!=t&&(n(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&n(t.slice(0,0))}(t)||!!t._isBuffer)}},function(t,e,n){"use strict";var r=n(8),o=n(0),i=n(59),a=n(60);function s(t){this.defaults=t,this.interceptors={request:new i,response:new i}}s.prototype.request=function(t){"string"==typeof t&&(t=o.merge({url:arguments[0]},arguments[1])),(t=o.merge(r,{method:"get"},this.defaults,t)).method=t.method.toLowerCase();var e=[a,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)n=n.then(e.shift(),e.shift());return n},o.forEach(["delete","get","head","options"],function(t){s.prototype[t]=function(e,n){return this.request(o.merge(n||{},{method:t,url:e}))}}),o.forEach(["post","put","patch"],function(t){s.prototype[t]=function(e,n,r){return this.request(o.merge(r||{},{method:t,url:e,data:n}))}}),t.exports=s},function(t,e,n){"use strict";var r=n(0);t.exports=function(t,e){r.forEach(t,function(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])})}},function(t,e,n){"use strict";var r=n(20);t.exports=function(t,e,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?e(r("Request failed with status code "+n.status,n.config,null,n.request,n)):t(n)}},function(t,e,n){"use strict";t.exports=function(t,e,n,r,o){return t.config=e,n&&(t.code=n),t.request=r,t.response=o,t}},function(t,e,n){"use strict";var r=n(0);function o(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,n){if(!e)return t;var i;if(n)i=n(e);else if(r.isURLSearchParams(e))i=e.toString();else{var a=[];r.forEach(e,function(t,e){null!==t&&void 0!==t&&(r.isArray(t)?e+="[]":t=[t],r.forEach(t,function(t){r.isDate(t)?t=t.toISOString():r.isObject(t)&&(t=JSON.stringify(t)),a.push(o(e)+"="+o(t))}))}),i=a.join("&")}return i&&(t+=(-1===t.indexOf("?")?"?":"&")+i),t}},function(t,e,n){"use strict";var r=n(0),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,i,a={};return t?(r.forEach(t.split("\n"),function(t){if(i=t.indexOf(":"),e=r.trim(t.substr(0,i)).toLowerCase(),n=r.trim(t.substr(i+1)),e){if(a[e]&&o.indexOf(e)>=0)return;a[e]="set-cookie"===e?(a[e]?a[e]:[]).concat([n]):a[e]?a[e]+", "+n:n}}),a):a}},function(t,e,n){"use strict";var r=n(0);t.exports=r.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function o(t){var r=t;return e&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=o(window.location.href),function(e){var n=r.isString(e)?o(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0}},function(t,e,n){"use strict";function r(){this.message="String contains an invalid character"}r.prototype=new Error,r.prototype.code=5,r.prototype.name="InvalidCharacterError",t.exports=function(t){for(var e,n,o=String(t),i="",a=0,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";o.charAt(0|a)||(s="=",a%1);i+=s.charAt(63&e>>8-a%1*8)){if((n=o.charCodeAt(a+=.75))>255)throw new r;e=e<<8|n}return i}},function(t,e,n){"use strict";var r=n(0);t.exports=r.isStandardBrowserEnv()?{write:function(t,e,n,o,i,a){var s=[];s.push(t+"="+encodeURIComponent(e)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(o)&&s.push("path="+o),r.isString(i)&&s.push("domain="+i),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(t,e,n){"use strict";var r=n(0);function o(){this.handlers=[]}o.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},o.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},o.prototype.forEach=function(t){r.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=o},function(t,e,n){"use strict";var r=n(0),o=n(61),i=n(21),a=n(8),s=n(62),u=n(63);function c(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return c(t),t.baseURL&&!s(t.url)&&(t.url=u(t.baseURL,t.url)),t.headers=t.headers||{},t.data=o(t.data,t.headers,t.transformRequest),t.headers=r.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),r.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||a.adapter)(t).then(function(e){return c(t),e.data=o(e.data,e.headers,t.transformResponse),e},function(e){return i(e)||(c(t),e&&e.response&&(e.response.data=o(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},function(t,e,n){"use strict";var r=n(0);t.exports=function(t,e,n){return r.forEach(n,function(n){t=n(t,e)}),t}},function(t,e,n){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,n){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,n){"use strict";var r=n(22);function o(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var n=this;t(function(t){n.reason||(n.reason=new r(t),e(n.reason))})}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var t;return{token:new o(function(e){t=e}),cancel:t}},t.exports=o},function(t,e,n){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=c(n(5)),a=c(n(23)),s=c(n(67)),u=c(n(69));function c(t){return t&&t.__esModule?t:{default:t}}var f=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return o(t,[{key:"parseToken",value:function(t){var e=t.split("."),n=r(e,3),o=n[0],i=n[1],a=n[2];try{return[o=JSON.parse(this.Base64Decode(this.UrlSafeDecode(o))),JSON.parse(this.Base64Decode(this.UrlSafeDecode(i))),[a,u.default.encrypt(i,a).toString()].join("./MKINFO>_")]}catch(t){return[o,i,a]}}},{key:"restringifyToken",value:function(t){var e=r(t,2),n=e[0],o=e[1].split("./MKINFO>_"),i=r(o,2),s=i[0],c=i[1];return[this.stringifyToken(n),u.default.decrypt(c,s).toString(a.default),s].join(".")}},{key:"stringifyToken",value:function(t){return this.UrlSafeEncode(this.Base64(JSON.stringify(t)))}},{key:"requestToken",value:function(t){var e=t.header,n=t.payload,r=t.secretKey;return[this.stringifyToken(e),this.stringifyToken(n),this.UrlSafeEncode(this.HmacSHA256(e+"."+n,r))].join(".")}},{key:"Base64Decode",value:function(t){return i.default.parse(t).toString(a.default)}},{key:"Base64",value:function(t){var e=a.default.parse(t);return i.default.stringify(e)}},{key:"UrlSafeDecode",value:function(t){var e={"-":"+",_:"/",".":"="};return(t+"===".slice((t.length+3)%4)).replace(/[-_.]/g,function(t){return e[t]})}},{key:"UrlSafeEncode",value:function(t){var e={"+":"-","/":"_","=":"."};return t.replace(/[+/=]/g,function(t){return e[t]}).replace(/[.=]{1,2}$/,"")}},{key:"HmacSHA256",value:function(t,e){return(0,s.default)(t,e).toString(i.default)}}]),t}();e.default=f},function(t,e,n){t.exports=function(t){return t.HmacSHA256}(n(1),n(68),n(10))},function(t,e,n){t.exports=function(t){return function(e){var n=t,r=n.lib,o=r.WordArray,i=r.Hasher,a=n.algo,s=[],u=[];!function(){function t(t){for(var n=e.sqrt(t),r=2;r<=n;r++)if(!(t%r))return!1;return!0}function n(t){return 4294967296*(t-(0|t))|0}for(var r=2,o=0;o<64;)t(r)&&(o<8&&(s[o]=n(e.pow(r,.5))),u[o]=n(e.pow(r,1/3)),o++),r++}();var c=[],f=a.SHA256=i.extend({_doReset:function(){this._hash=new o.init(s.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],a=n[3],s=n[4],f=n[5],l=n[6],p=n[7],d=0;d<64;d++){if(d<16)c[d]=0|t[e+d];else{var h=c[d-15],y=(h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3,v=c[d-2],g=(v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10;c[d]=y+c[d-7]+g+c[d-16]}var m=r&o^r&i^o&i,b=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),_=p+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&f^~s&l)+u[d]+c[d];p=l,l=f,f=s,s=a+_|0,a=i,i=o,o=r,r=_+(b+m)|0}n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0,n[5]=n[5]+f|0,n[6]=n[6]+l|0,n[7]=n[7]+p|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,o=8*t.sigBytes;return n[o>>>5]|=128<<24-o%32,n[14+(o+64>>>9<<4)]=e.floor(r/4294967296),n[15+(o+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}});n.SHA256=i._createHelper(f),n.HmacSHA256=i._createHmacHelper(f)}(Math),t.SHA256}(n(1))},function(t,e,n){t.exports=function(t){return function(){var e=t,n=e.lib.BlockCipher,r=e.algo,o=[],i=[],a=[],s=[],u=[],c=[],f=[],l=[],p=[],d=[];!function(){for(var t=[],e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;var n=0,r=0;for(e=0;e<256;e++){var h=r^r<<1^r<<2^r<<3^r<<4;h=h>>>8^255&h^99,o[n]=h,i[h]=n;var y=t[n],v=t[y],g=t[v],m=257*t[h]^16843008*h;a[n]=m<<24|m>>>8,s[n]=m<<16|m>>>16,u[n]=m<<8|m>>>24,c[n]=m,m=16843009*g^65537*v^257*y^16843008*n,f[h]=m<<24|m>>>8,l[h]=m<<16|m>>>16,p[h]=m<<8|m>>>24,d[h]=m,n?(n=y^t[t[t[g^y]]],r^=t[t[r]]):n=r=1}}();var h=[0,1,2,4,8,16,32,64,128,27,54],y=r.AES=n.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var t=this._keyPriorReset=this._key,e=t.words,n=t.sigBytes/4,r=4*((this._nRounds=n+6)+1),i=this._keySchedule=[],a=0;a<r;a++)if(a<n)i[a]=e[a];else{var s=i[a-1];a%n?n>6&&a%n==4&&(s=o[s>>>24]<<24|o[s>>>16&255]<<16|o[s>>>8&255]<<8|o[255&s]):(s=o[(s=s<<8|s>>>24)>>>24]<<24|o[s>>>16&255]<<16|o[s>>>8&255]<<8|o[255&s],s^=h[a/n|0]<<24),i[a]=i[a-n]^s}for(var u=this._invKeySchedule=[],c=0;c<r;c++)a=r-c,s=c%4?i[a]:i[a-4],u[c]=c<4||a<=4?s:f[o[s>>>24]]^l[o[s>>>16&255]]^p[o[s>>>8&255]]^d[o[255&s]]}},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,a,s,u,c,o)},decryptBlock:function(t,e){var n=t[e+1];t[e+1]=t[e+3],t[e+3]=n,this._doCryptBlock(t,e,this._invKeySchedule,f,l,p,d,i),n=t[e+1],t[e+1]=t[e+3],t[e+3]=n},_doCryptBlock:function(t,e,n,r,o,i,a,s){for(var u=this._nRounds,c=t[e]^n[0],f=t[e+1]^n[1],l=t[e+2]^n[2],p=t[e+3]^n[3],d=4,h=1;h<u;h++){var y=r[c>>>24]^o[f>>>16&255]^i[l>>>8&255]^a[255&p]^n[d++],v=r[f>>>24]^o[l>>>16&255]^i[p>>>8&255]^a[255&c]^n[d++],g=r[l>>>24]^o[p>>>16&255]^i[c>>>8&255]^a[255&f]^n[d++],m=r[p>>>24]^o[c>>>16&255]^i[f>>>8&255]^a[255&l]^n[d++];c=y,f=v,l=g,p=m}y=(s[c>>>24]<<24|s[f>>>16&255]<<16|s[l>>>8&255]<<8|s[255&p])^n[d++],v=(s[f>>>24]<<24|s[l>>>16&255]<<16|s[p>>>8&255]<<8|s[255&c])^n[d++],g=(s[l>>>24]<<24|s[p>>>16&255]<<16|s[c>>>8&255]<<8|s[255&f])^n[d++],m=(s[p>>>24]<<24|s[c>>>16&255]<<16|s[f>>>8&255]<<8|s[255&l])^n[d++],t[e]=y,t[e+1]=v,t[e+2]=g,t[e+3]=m},keySize:8});e.AES=n._createHelper(y)}(),t.AES}(n(1),n(5),n(70),n(24),n(71))},function(t,e,n){t.exports=function(t){return function(e){var n=t,r=n.lib,o=r.WordArray,i=r.Hasher,a=n.algo,s=[];!function(){for(var t=0;t<64;t++)s[t]=4294967296*e.abs(e.sin(t+1))|0}();var u=a.MD5=i.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var n=0;n<16;n++){var r=e+n,o=t[r];t[r]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}var i=this._hash.words,a=t[e+0],u=t[e+1],d=t[e+2],h=t[e+3],y=t[e+4],v=t[e+5],g=t[e+6],m=t[e+7],b=t[e+8],_=t[e+9],w=t[e+10],E=t[e+11],k=t[e+12],T=t[e+13],x=t[e+14],S=t[e+15],B=i[0],I=i[1],R=i[2],A=i[3];I=p(I=p(I=p(I=p(I=l(I=l(I=l(I=l(I=f(I=f(I=f(I=f(I=c(I=c(I=c(I=c(I,R=c(R,A=c(A,B=c(B,I,R,A,a,7,s[0]),I,R,u,12,s[1]),B,I,d,17,s[2]),A,B,h,22,s[3]),R=c(R,A=c(A,B=c(B,I,R,A,y,7,s[4]),I,R,v,12,s[5]),B,I,g,17,s[6]),A,B,m,22,s[7]),R=c(R,A=c(A,B=c(B,I,R,A,b,7,s[8]),I,R,_,12,s[9]),B,I,w,17,s[10]),A,B,E,22,s[11]),R=c(R,A=c(A,B=c(B,I,R,A,k,7,s[12]),I,R,T,12,s[13]),B,I,x,17,s[14]),A,B,S,22,s[15]),R=f(R,A=f(A,B=f(B,I,R,A,u,5,s[16]),I,R,g,9,s[17]),B,I,E,14,s[18]),A,B,a,20,s[19]),R=f(R,A=f(A,B=f(B,I,R,A,v,5,s[20]),I,R,w,9,s[21]),B,I,S,14,s[22]),A,B,y,20,s[23]),R=f(R,A=f(A,B=f(B,I,R,A,_,5,s[24]),I,R,x,9,s[25]),B,I,h,14,s[26]),A,B,b,20,s[27]),R=f(R,A=f(A,B=f(B,I,R,A,T,5,s[28]),I,R,d,9,s[29]),B,I,m,14,s[30]),A,B,k,20,s[31]),R=l(R,A=l(A,B=l(B,I,R,A,v,4,s[32]),I,R,b,11,s[33]),B,I,E,16,s[34]),A,B,x,23,s[35]),R=l(R,A=l(A,B=l(B,I,R,A,u,4,s[36]),I,R,y,11,s[37]),B,I,m,16,s[38]),A,B,w,23,s[39]),R=l(R,A=l(A,B=l(B,I,R,A,T,4,s[40]),I,R,a,11,s[41]),B,I,h,16,s[42]),A,B,g,23,s[43]),R=l(R,A=l(A,B=l(B,I,R,A,_,4,s[44]),I,R,k,11,s[45]),B,I,S,16,s[46]),A,B,d,23,s[47]),R=p(R,A=p(A,B=p(B,I,R,A,a,6,s[48]),I,R,m,10,s[49]),B,I,x,15,s[50]),A,B,v,21,s[51]),R=p(R,A=p(A,B=p(B,I,R,A,k,6,s[52]),I,R,h,10,s[53]),B,I,w,15,s[54]),A,B,u,21,s[55]),R=p(R,A=p(A,B=p(B,I,R,A,b,6,s[56]),I,R,S,10,s[57]),B,I,g,15,s[58]),A,B,T,21,s[59]),R=p(R,A=p(A,B=p(B,I,R,A,y,6,s[60]),I,R,E,10,s[61]),B,I,d,15,s[62]),A,B,_,21,s[63]),i[0]=i[0]+B|0,i[1]=i[1]+I|0,i[2]=i[2]+R|0,i[3]=i[3]+A|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,o=8*t.sigBytes;n[o>>>5]|=128<<24-o%32;var i=e.floor(r/4294967296),a=r;n[15+(o+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),n[14+(o+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),t.sigBytes=4*(n.length+1),this._process();for(var s=this._hash,u=s.words,c=0;c<4;c++){var f=u[c];u[c]=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8)}return s},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}});function c(t,e,n,r,o,i,a){var s=t+(e&n|~e&r)+o+a;return(s<<i|s>>>32-i)+e}function f(t,e,n,r,o,i,a){var s=t+(e&r|n&~r)+o+a;return(s<<i|s>>>32-i)+e}function l(t,e,n,r,o,i,a){var s=t+(e^n^r)+o+a;return(s<<i|s>>>32-i)+e}function p(t,e,n,r,o,i,a){var s=t+(n^(e|~r))+o+a;return(s<<i|s>>>32-i)+e}n.MD5=i._createHelper(u),n.HmacMD5=i._createHmacHelper(u)}(Math),t.MD5}(n(1))},function(t,e,n){t.exports=function(t){t.lib.Cipher||function(e){var n=t,r=n.lib,o=r.Base,i=r.WordArray,a=r.BufferedBlockAlgorithm,s=n.enc,u=(s.Utf8,s.Base64),c=n.algo.EvpKDF,f=r.Cipher=a.extend({cfg:o.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,n){this.cfg=this.cfg.extend(n),this._xformMode=t,this._key=e,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function t(t){return"string"==typeof t?b:g}return function(e){return{encrypt:function(n,r,o){return t(r).encrypt(e,n,r,o)},decrypt:function(n,r,o){return t(r).decrypt(e,n,r,o)}}}}()}),l=(r.StreamCipher=f.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),n.mode={}),p=r.BlockCipherMode=o.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}}),d=l.CBC=function(){var t=p.extend();function n(t,n,r){var o=this._iv;if(o){var i=o;this._iv=e}else i=this._prevBlock;for(var a=0;a<r;a++)t[n+a]^=i[a]}return t.Encryptor=t.extend({processBlock:function(t,e){var r=this._cipher,o=r.blockSize;n.call(this,t,e,o),r.encryptBlock(t,e),this._prevBlock=t.slice(e,e+o)}}),t.Decryptor=t.extend({processBlock:function(t,e){var r=this._cipher,o=r.blockSize,i=t.slice(e,e+o);r.decryptBlock(t,e),n.call(this,t,e,o),this._prevBlock=i}}),t}(),h=(n.pad={}).Pkcs7={pad:function(t,e){for(var n=4*e,r=n-t.sigBytes%n,o=r<<24|r<<16|r<<8|r,a=[],s=0;s<r;s+=4)a.push(o);var u=i.create(a,r);t.concat(u)},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},y=(r.BlockCipher=f.extend({cfg:f.cfg.extend({mode:d,padding:h}),reset:function(){f.reset.call(this);var t=this.cfg,e=t.iv,n=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var r=n.createEncryptor;else{r=n.createDecryptor;this._minBufferSize=1}this._mode&&this._mode.__creator==r?this._mode.init(this,e&&e.words):(this._mode=r.call(n,this,e&&e.words),this._mode.__creator=r)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var e=this._process(!0)}else{e=this._process(!0);t.unpad(e)}return e},blockSize:4}),r.CipherParams=o.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}})),v=(n.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext,n=t.salt;if(n)var r=i.create([1398893684,1701076831]).concat(n).concat(e);else r=e;return r.toString(u)},parse:function(t){var e=u.parse(t),n=e.words;if(1398893684==n[0]&&1701076831==n[1]){var r=i.create(n.slice(2,4));n.splice(0,4),e.sigBytes-=16}return y.create({ciphertext:e,salt:r})}},g=r.SerializableCipher=o.extend({cfg:o.extend({format:v}),encrypt:function(t,e,n,r){r=this.cfg.extend(r);var o=t.createEncryptor(n,r),i=o.finalize(e),a=o.cfg;return y.create({ciphertext:i,key:n,iv:a.iv,algorithm:t,mode:a.mode,padding:a.padding,blockSize:t.blockSize,formatter:r.format})},decrypt:function(t,e,n,r){return r=this.cfg.extend(r),e=this._parse(e,r.format),t.createDecryptor(n,r).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),m=(n.kdf={}).OpenSSL={execute:function(t,e,n,r){r||(r=i.random(8));var o=c.create({keySize:e+n}).compute(t,r),a=i.create(o.words.slice(e),4*n);return o.sigBytes=4*e,y.create({key:o,iv:a,salt:r})}},b=r.PasswordBasedCipher=g.extend({cfg:g.cfg.extend({kdf:m}),encrypt:function(t,e,n,r){var o=(r=this.cfg.extend(r)).kdf.execute(n,t.keySize,t.ivSize);r.iv=o.iv;var i=g.encrypt.call(this,t,e,o.key,r);return i.mixIn(o),i},decrypt:function(t,e,n,r){r=this.cfg.extend(r),e=this._parse(e,r.format);var o=r.kdf.execute(n,t.keySize,t.ivSize,e.salt);return r.iv=o.iv,g.decrypt.call(this,t,e,o.key,r)}})}()}(n(1),n(24))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});for(var r=[],o=0;o<256;++o)r[o]=(o+256).toString(32).substr(1);e.default=function(){var t=function(){for(var t=[],e=0;e<32;++e)t[e]=parseInt(255*Math.random());return t}();return t[6]=15&t[6]|64,t[8]=63&t[8]|128,function(t,e){var n=0,o=r;return o[t[n++]]+o[t[n++]]+o[t[n++]]+o[t[n++]]+o[t[n++]]+o[t[n++]]+"-"+o[t[n++]]+o[t[n++]]+o[t[n++]]+o[t[n++]]+"-"+o[t[n++]]+o[t[n++]]+o[t[n++]]+o[t[n++]]+o[t[n++]]+o[t[n++]]+"-"+o[t[n++]]+o[t[n++]]+o[t[n++]]+o[t[n++]]+"-"+o[t[n++]]+o[t[n++]]+o[t[n++]]+o[t[n++]]+o[t[n++]]+o[t[n++]]+o[t[n++]]+o[t[n++]]}(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=a(n(74)),i=a(n(106));function a(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e){switch(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e.cloud){case"oss":var n=JSON.parse(e.token);this.opcld=new o.default({region:e.region,accessKeyId:n.accessKeyId,accessKeySecret:n.accessKeySecret,stsToken:n.securityToken,endpoint:e.endpoint,bucket:e.bucket});break;case"kodo":this.opcld=new i.default({bucket:e.bucket,token:e.token});break;default:throw new Error("无法识别第三方云")}}return r(t,[{key:"put",value:function(t,e,n){this.opcld.put(t,e,n)}},{key:"notifier",value:function(t,e){e(t)}}]),t}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=c(n(26)),i=c(n(29)),a=c(n(38)),s=c(n(105)),u=c(n(5));function c(t){return t&&t.__esModule?t:{default:t}}var f=function(){function t(e){var n=e.region,r=e.accessKeyId,o=e.accessKeySecret,i=e.stsToken,a=e.endpoint,s=e.bucket;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.opt={region:n,accessKeyId:r,accessKeySecret:o,stsToken:i,endpoint:a,bucket:s},this.blockSize=4194304,this}return r(t,[{key:"__setAuthorization",value:function(t,e,n){for(var r=Object.assign({"x-oss-security-token":this.opt.stsToken,"x-oss-date":(new Date).toUTCString(),"x-oss-user-agent":"vipkid-vvos-js/"+(navigator&&navigator.userAgent)||"node","Content-Type":e.type||"text/plain; charset=UTF-8",Method:"PUT",URL:["",this.opt.bucket,e.key].join("/")},n||{}),o=[r.Method,"",r["Content-Type"],r["x-oss-date"]],i=Object.keys(r).sort(),a=0;a<i.length;a++)-1!==i[a].toLowerCase().indexOf("x-oss")&&o.push(i[a].toLowerCase()+":"+r[i[a]]);o.push(r.URL);var c=(0,s.default)(o.join("\n"),this.opt.accessKeySecret);r.authorization="OSS "+this.opt.accessKeyId+":"+u.default.stringify(c);for(var f=Object.keys(r).sort(),l=0;l<f.length;l++)t.setRequestHeader(f[l],r[f[l]])}},{key:"directUpFile",value:function(t,e,n){var r=new XMLHttpRequest;r.open("PUT",["//",this.opt.bucket,".",this.opt.endpoint,"/",t.key].join("")),this.__setAuthorization(r,t,{URL:["",this.opt.bucket,t.key].join("/")}),r.onreadystatechange=function(){4===r.readyState&&(200===r.status?e(null,{key:t.key,name:t.key,url:r.responseURL,hash:r.getResponseHeader("etag")}):e(r))},r.upload&&(r.upload.onprogress=function(e){n(t,e)}),r.send(t)}},{key:"__InitiateMultipartUpload",value:function(t,e){var n=new XMLHttpRequest;n.open("POST",["//",this.opt.bucket,".",this.opt.endpoint,"/",t.key,"?uploads="].join("")),this.__setAuthorization(n,t,{Method:"POST",URL:["",this.opt.bucket,t.key].join("/")+"?uploads"}),n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status){var t=n.responseXML.getElementsByTagName("InitiateMultipartUploadResult")[0],r=t.getElementsByTagName("Bucket")[0].textContent,o=t.getElementsByTagName("Key")[0].textContent,i=t.getElementsByTagName("UploadId")[0].textContent;e(null,{key:o,bucket:r,uploadId:i,url:n.responseURL})}else e(n)},n.send()}},{key:"__UploadPart",value:function(t,e,n){var r=new XMLHttpRequest;r.open("PUT","//"+this.opt.bucket+"."+this.opt.endpoint+"/"+t.key+"?partNumber="+t.index+"&uploadId="+t.uploadId),this.__setAuthorization(r,t,{Method:"PUT",URL:"/"+this.opt.bucket+"/"+t.key+"?partNumber="+t.index+"&uploadId="+t.uploadId}),r.onreadystatechange=function(){4===r.readyState&&(200===r.status?e(null,{url:r.responseURL,xml:"<Part><PartNumber>"+t.index+"</PartNumber><ETag>"+r.getResponseHeader("etag")+"</ETag></Part>"}):e(r))},r.upload&&(r.upload.onprogress=function(e){n(t.file,e)}),r.send(t.file)}},{key:"__CompleteMultipartUpload",value:function(t,e){var n=new XMLHttpRequest;n.open("POST","//"+this.opt.bucket+"."+this.opt.endpoint+"/"+t.file.key+"?uploadId="+t.uploadId),this.__setAuthorization(n,t.file,{Method:"POST",URL:"/"+this.opt.bucket+"/"+t.file.key+"?uploadId="+t.uploadId}),n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status){var t=n.responseXML.getElementsByTagName("CompleteMultipartUploadResult")[0],r=t.getElementsByTagName("Bucket")[0].textContent,o=t.getElementsByTagName("Key")[0].textContent,i=t.getElementsByTagName("ETag")[0].textContent,a=t.getElementsByTagName("Location")[0].textContent;e(null,{url:a,bucket:r,key:o,name:o,hash:i})}else e(n)},n.send(t.xml)}},{key:"sliceUpFile",value:function(t,e,n){var r=this;(0,o.default)([function(e){r.__InitiateMultipartUpload(t,function(t,n){e(t,n)})},function(e,o){for(var i=Math.ceil(t.size/r.blockSize),s=[],u=e.uploadId,c=0;c<i;++c){var f=c*r.blockSize,l=Math.min(t.size,f+r.blockSize),p=l-f;s.push({index:c+1,file:t.slice(f,l),size:p,key:t.key,uploadId:u,type:t.type})}(0,a.default)(s,5,function(t,e){r.__UploadPart(t,e,n)},function(e,n){var r=["<CompleteMultipartUpload>"];n.map(function(t){r.push(t.xml)}),r.push("</CompleteMultipartUpload>"),o(null,{xml:r.join("\n"),uploadId:u,file:t})})},function(t,e){r.__CompleteMultipartUpload(t,e)}],e)}},{key:"put",value:function(t,e,n){var r=this;(0,i.default)(t,function(t,e){t.size<r.blockSize?r.directUpFile(t,function(t,n){e(t,n)},"function"==typeof n&&n||function(){}):r.sliceUpFile(t,e,"function"==typeof n&&n||function(){})},e)}}]),t}();e.default=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(0,o.default)(function(e,n){var o;try{o=t.apply(this,e)}catch(t){return n(t)}(0,r.default)(o)&&"function"==typeof o.then?o.then(function(t){s(n,null,t)},function(t){s(n,t.message?t:new Error(t))}):n(null,o)})};var r=a(n(28)),o=a(n(76)),i=a(n(77));function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e,n){try{t(e,n)}catch(t){(0,i.default)(u,t)}}function u(t){throw t}t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return function(){var e=(0,r.default)(arguments),n=e.pop();t.call(this,e,n)}};var r=function(t){return t&&t.__esModule?t:{default:t}}(n(12));t.exports=e.default},function(t,e,n){"use strict";(function(t,r){Object.defineProperty(e,"__esModule",{value:!0}),e.hasNextTick=e.hasSetImmediate=void 0,e.fallback=u,e.wrap=c;var o,i=function(t){return t&&t.__esModule?t:{default:t}}(n(12)),a=e.hasSetImmediate="function"==typeof t&&t,s=e.hasNextTick="object"==typeof r&&"function"==typeof r.nextTick;function u(t){setTimeout(t,0)}function c(t){return function(e){var n=(0,i.default)(arguments,1);t(function(){e.apply(null,n)})}}o=a?t:s?r.nextTick:u,e.default=c(o)}).call(this,n(78).setImmediate,n(9))},function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function i(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new i(o.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new i(o.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(79),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(6))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,o=1,i={},a=!1,s=t.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(t);u=u&&u.setTimeout?u:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick(function(){f(t)})}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?function(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&f(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),r=function(n){t.postMessage(e+n,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){f(t.data)},r=function(e){t.port2.postMessage(e)}}():s&&"onreadystatechange"in s.createElement("script")?function(){var t=s.documentElement;r=function(e){var n=s.createElement("script");n.onreadystatechange=function(){f(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}():r=function(t){setTimeout(f,0,t)},u.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var a={callback:t,args:e};return i[o]=a,r(o),o++},u.clearImmediate=c}function c(t){delete i[t]}function f(t){if(a)setTimeout(f,0,t);else{var e=i[t];if(e){a=!0;try{!function(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}(e)}finally{c(t),a=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(6),n(9))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return function(e,n,i){return t(r.default,e,(0,o.default)(n),i)}};var r=i(n(81)),o=i(n(2));function i(t){return t&&t.__esModule?t:{default:t}}t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){((0,r.default)(t)?function(t,e,n){n=(0,u.default)(n||s.default);var r=0,i=0,a=t.length;function f(t,e){t?n(t):++i!==a&&e!==o.default||n(null)}for(0===a&&n(null);r<a;r++)e(t[r],r,(0,c.default)(f))}:p)(t,(0,f.default)(e),n)};var r=l(n(7)),o=l(n(34)),i=l(n(85)),a=l(n(104)),s=l(n(4)),u=l(n(11)),c=l(n(13)),f=l(n(2));function l(t){return t&&t.__esModule?t:{default:t}}var p=(0,a.default)(i.default,1/0);t.exports=e.default},function(t,e,n){var r=n(14),o=n(28);t.exports=function(t){if(!o(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(t,e,n){var r=n(30),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,s=r?r.toStringTag:void 0;t.exports=function(t){var e=i.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(t){}var o=a.call(t);return r&&(e?t[s]=n:delete t[s]),o}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n,i){(0,r.default)(e)(t,(0,o.default)(n),i)};var r=i(n(35)),o=i(n(2));function i(t){return t&&t.__esModule?t:{default:t}}t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if((0,r.default)(t))return function(t){var e=-1,n=t.length;return function(){return++e<n?{value:t[e],key:e}:null}}(t);var e=(0,o.default)(t);return e?function(t){var e=-1;return function(){var n=t.next();return n.done?null:(e++,{value:n.value,key:e})}}(e):function(t){var e=(0,i.default)(t),n=-1,r=e.length;return function(){var o=e[++n];return n<r?{value:t[o],key:o}:null}}(t)};var r=a(n(7)),o=a(n(87)),i=a(n(88));function a(t){return t&&t.__esModule?t:{default:t}}t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return r&&t[r]&&t[r]()};var r="function"==typeof Symbol&&Symbol.iterator;t.exports=e.default},function(t,e,n){var r=n(89),o=n(100),i=n(7);t.exports=function(t){return i(t)?r(t):o(t)}},function(t,e,n){var r=n(90),o=n(91),i=n(27),a=n(93),s=n(95),u=n(96),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=i(t),f=!n&&o(t),l=!n&&!f&&a(t),p=!n&&!f&&!l&&u(t),d=n||f||l||p,h=d?r(t.length,String):[],y=h.length;for(var v in t)!e&&!c.call(t,v)||d&&("length"==v||l&&("offset"==v||"parent"==v)||p&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||s(v,y))||h.push(v);return h}},function(t,e){t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},function(t,e,n){var r=n(92),o=n(15),i=Object.prototype,a=i.hasOwnProperty,s=i.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(t){return o(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=u},function(t,e,n){var r=n(14),o=n(15);t.exports=function(t){return o(t)&&"[object Arguments]"==r(t)}},function(t,e,n){(function(t){var r=n(31),o=n(94),i="object"==typeof e&&e&&!e.nodeType&&e,a=i&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===i?r.Buffer:void 0,u=(s?s.isBuffer:void 0)||o;t.exports=u}).call(this,n(36)(t))},function(t,e){t.exports=function(){return!1}},function(t,e){var n=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&n.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e,n){var r=n(97),o=n(98),i=n(99),a=i&&i.isTypedArray,s=a?o(a):r;t.exports=s},function(t,e,n){var r=n(14),o=n(33),i=n(15),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return i(t)&&o(t.length)&&!!a[r(t)]}},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e,n){(function(t){var r=n(32),o="object"==typeof e&&e&&!e.nodeType&&e,i=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=i&&i.exports===o&&r.process,s=function(){try{return i&&i.require&&i.require("util").types||a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=s}).call(this,n(36)(t))},function(t,e,n){var r=n(101),o=n(102),i=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return o(t);var e=[];for(var n in Object(t))i.call(t,n)&&"constructor"!=n&&e.push(n);return e}},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e,n){var r=n(103)(Object.keys,Object);t.exports=r},function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return function(n,r,o){return t(n,e,r,o)}},t.exports=e.default},function(t,e,n){t.exports=function(t){return t.HmacSHA1}(n(1),n(25),n(10))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=f(n(17)),i=f(n(38)),a=f(n(26)),s=f(n(29)),u=f(n(23)),c=f(n(5));function f(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(e){var n=e.bucket,r=(e.key,e.token);return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options={bucket:n,token:r,domain:"up.qiniup.com"},this.blockSize=4194304,this}return r(t,[{key:"directUpFile",value:function(t,e,n){var r=o.default.create({headers:{Authorization:this.options.token},onUploadProgress:function(e){n(t,e)}}),i=new FormData;i.append("key",t.key),i.append("token",this.options.token),i.append("file",t),r.post(t.host,i).then(function(t){e(null,Object.assign({},t.data,{name:t.data.key}))}).catch(function(t){e(t)})}},{key:"sliceUpFile",value:function(t,e,n){for(var r=this,a=Math.ceil(t.size/this.blockSize),s=[],f=0;f<a;++f){var l=f*this.blockSize,p=Math.min(t.size,l+this.blockSize),d=p-l;s.push({index:f,file:t.slice(l,p),size:d,key:t.key,token:this.options.token})}var h=[];(0,i.default)(s,5,function(e,r){var i=o.default.create({headers:{Accept:"*/*",Authorization:"UpToken "+e.token,"Content-Type":"application/octet-stream"},onUploadProgress:function(e){n(t,e)}}),a=[t.host,"mkblk",e.size].join("/");a=a+"?"+["name="+e.key,"chunk="+e.index,"chunks="+s.length].join("&"),i.post(a,e.file).then(function(t){t.data&&t.data.ctx&&h.push(t.data.ctx),r(null,t.data&&t.data.ctx)}).catch(function(t){r(null,t)})},function(n,i){var a=o.default.create({headers:{Authorization:"UpToken "+r.options.token,"Content-Type":"text/plain"}}),s=c.default.stringify(u.default.parse(t.key)),f=[t.host,"mkfile",t.size,"key",s,"fname",s].join("/");a.post(f,i.join(",")).then(function(t){e(null,Object.assign({},t.data,{name:t.data.key}))}).catch(function(t){e(null,t)})})}},{key:"put",value:function(t,e,n){var r=this;(0,a.default)([function(t){var e=r.options.bucket,n=r.options.token.split(":")[0];o.default.create({headers:{}}).get("https://uc.qbox.me/v1/query",{params:{ak:n,bucket:e}}).then(function(e){var n=window.location.protocol.replace(/:$/,"")||"http",r=e.data[n]&&e.data[n].up&&e.data[n].up[1]||"http://up.qiniu.com";t(null,{host:r,protocol:n})}).catch(function(e){t(e)})},function(e,o){(0,s.default)(t,function(t,o){t.host=e.host,t.size<r.blockSize?r.directUpFile(t,function(t,e){o(t,e)},"function"==typeof n&&n):r.sliceUpFile(t,o,"function"==typeof n&&n)},o)}],e)}}]),t}();e.default=l},function(t,e,n){"use strict";t.exports=n(108)},function(t,e,n){"use strict";t.exports=n(3),n(109),n(110),n(111),n(112),n(114)},function(t,e,n){"use strict";var r=n(3);t.exports=r,r.prototype.done=function(t,e){(arguments.length?this.then.apply(this,arguments):this).then(null,function(t){setTimeout(function(){throw t},0)})}},function(t,e,n){"use strict";var r=n(3);t.exports=r,r.prototype.finally=function(t){return this.then(function(e){return r.resolve(t()).then(function(){return e})},function(e){return r.resolve(t()).then(function(){throw e})})}},function(t,e,n){"use strict";var r=n(3);t.exports=r;var o=f(!0),i=f(!1),a=f(null),s=f(void 0),u=f(0),c=f("");function f(t){var e=new r(r._n);return e._i=1,e._j=t,e}r.resolve=function(t){if(t instanceof r)return t;if(null===t)return a;if(void 0===t)return s;if(!0===t)return o;if(!1===t)return i;if(0===t)return u;if(""===t)return c;if("object"==typeof t||"function"==typeof t)try{var e=t.then;if("function"==typeof e)return new r(e.bind(t))}catch(t){return new r(function(e,n){n(t)})}return f(t)},r.all=function(t){var e=Array.prototype.slice.call(t);return new r(function(t,n){if(0===e.length)return t([]);var o=e.length;function i(a,s){if(s&&("object"==typeof s||"function"==typeof s)){if(s instanceof r&&s.then===r.prototype.then){for(;3===s._i;)s=s._j;return 1===s._i?i(a,s._j):(2===s._i&&n(s._j),void s.then(function(t){i(a,t)},n))}var u=s.then;if("function"==typeof u)return void new r(u.bind(s)).then(function(t){i(a,t)},n)}e[a]=s,0==--o&&t(e)}for(var a=0;a<e.length;a++)i(a,e[a])})},r.reject=function(t){return new r(function(e,n){n(t)})},r.race=function(t){return new r(function(e,n){t.forEach(function(t){r.resolve(t).then(e,n)})})},r.prototype.catch=function(t){return this.then(null,t)}},function(t,e,n){"use strict";var r=n(3),o=n(113);t.exports=r,r.denodeify=function(t,e){return"number"==typeof e&&e!==1/0?function(t,e){for(var n=[],o=0;o<e;o++)n.push("a"+o);var a=["return function ("+n.join(",")+") {","var self = this;","return new Promise(function (rs, rj) {","var res = fn.call(",["self"].concat(n).concat([i]).join(","),");","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],a)(r,t)}(t,e):function(t){for(var e=Math.max(t.length-1,3),n=[],o=0;o<e;o++)n.push("a"+o);var a=["return function ("+n.join(",")+") {","var self = this;","var args;","var argLength = arguments.length;","if (arguments.length > "+e+") {","args = new Array(arguments.length + 1);","for (var i = 0; i < arguments.length; i++) {","args[i] = arguments[i];","}","}","return new Promise(function (rs, rj) {","var cb = "+i+";","var res;","switch (argLength) {",n.concat(["extra"]).map(function(t,e){return"case "+e+":res = fn.call("+["self"].concat(n.slice(0,e)).concat("cb").join(",")+");break;"}).join(""),"default:","args[argLength] = cb;","res = fn.apply(self, args);","}","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],a)(r,t)}(t)};var i="function (err, res) {if (err) { rj(err); } else { rs(res); }}";r.nodeify=function(t){return function(){var e=Array.prototype.slice.call(arguments),n="function"==typeof e[e.length-1]?e.pop():null,i=this;try{return t.apply(this,arguments).nodeify(n,i)}catch(t){if(null===n||void 0===n)return new r(function(e,n){n(t)});o(function(){n.call(i,t)})}}},r.prototype.nodeify=function(t,e){if("function"!=typeof t)return this;this.then(function(n){o(function(){t.call(e,null,n)})},function(n){o(function(){t.call(e,n)})})}},function(t,e,n){"use strict";var r=n(40),o=[],i=[],a=r.makeRequestCallFromTimer(function(){if(i.length)throw i.shift()});function s(t){var e;(e=o.length?o.pop():new u).task=t,r(e)}function u(){this.task=null}t.exports=s,u.prototype.call=function(){try{this.task.call()}catch(t){s.onerror?s.onerror(t):(i.push(t),a())}finally{this.task=null,o[o.length]=this}}},function(t,e,n){"use strict";var r=n(3);t.exports=r,r.enableSynchronous=function(){r.prototype.isPending=function(){return 0==this.getState()},r.prototype.isFulfilled=function(){return 1==this.getState()},r.prototype.isRejected=function(){return 2==this.getState()},r.prototype.getValue=function(){if(3===this._i)return this._j.getValue();if(!this.isFulfilled())throw new Error("Cannot get a value of an unfulfilled promise.");return this._j},r.prototype.getReason=function(){if(3===this._i)return this._j.getReason();if(!this.isRejected())throw new Error("Cannot get a rejection reason of a non-rejected promise.");return this._j},r.prototype.getState=function(){return 3===this._i?this._j.getState():-1===this._i||-2===this._i?0:this._i}},r.disableSynchronous=function(){r.prototype.isPending=void 0,r.prototype.isFulfilled=void 0,r.prototype.isRejected=void 0,r.prototype.getValue=void 0,r.prototype.getReason=void 0,r.prototype.getState=void 0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(116)),o=i(n(39));function i(t){return t&&t.__esModule?t:{default:t}}e.default=(0,o.default)(r.default),t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n,r){((0,o.default)(e)?function(t,e,n,r){var o=new Array(e.length);t(e,function(t,e,r){n(t,function(t,n){o[e]=!!n,r(t)})},function(t){if(t)return r(t);for(var n=[],i=0;i<e.length;i++)o[i]&&n.push(e[i]);r(null,n)})}:c)(t,e,(0,s.default)(n),r||a.default)};var r=u(n(117)),o=u(n(7)),i=u(n(118)),a=u(n(4)),s=u(n(2));function u(t){return t&&t.__esModule?t:{default:t}}function c(t,e,n,o){var a=[];t(e,function(t,e,r){n(t,function(n,o){n?r(n):(o&&a.push({index:e,value:t}),r())})},function(t){t?o(t):o(null,(0,r.default)(a.sort(function(t,e){return t.index-e.index}),(0,i.default)("value")))})}t.exports=e.default},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}},function(t,e){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},function(t,e,n){var r=n(120).fbsutil,o=n(123);t.exports=function(t){var e=t.env;apiUrlMap={test:"wss://a66-ecp.vipkid-qa.com.cn/iscp/api/chivox/v2",pre:"wss://pre-ecp.vipkid.com.cn/iscp/api/chivox/v2",prod:"wss://wss.vipkid.com.cn/iscp/api/chivox/v2"};var n,i,a=this,s=t.appId,u=t.onState,c=t.onError,f=apiUrlMap[e||"prod"]+"?appid="+s,l=0,p=5e3,d=null;if(this.sendAudioInfo=function(t){if(y("sendAudioInfo")){p="number"==typeof t.receiveTimeout?t.receiveTimeout:5e3;var e={appId:s,refText:t.refText,textMode:t.textMode||0,evalMode:t.evalMode||0,rank:t.rank||100};0!==e.textMode&&(e.refTextObj=t.refTextObj),3===e.evalMode&&(e.keyWords=t.keyWords),E(e),g(o.WAITING_AUDIO_STREAM)}},this.sendAudioStream=function(t){y("sendAudioStream")&&E(t)},this.updateState=g,this.stop=function(){y("stop")&&(d=setTimeout(()=>{a.state!==o.RESULT_RECEIVING?k("receive timeout triggered, but state not match!"):(g(o.PREPARE_START),m("evaluateTimeout",{message:"timeout is "+p+"ms"}))},p),E(new ArrayBuffer(0)),g(o.RESULT_RECEIVING))},this.close=function(){a.state!==o.CLOSED&&(n.close(),n=null,g(o.CLOSED))},this.state=o.NOT_READY,s||m("authFial"),!window.WebSocket)return m("notSupport"),void v(o.NOT_READY);function h(){(n=new WebSocket(f)).onopen=b,n.onmessage=_,n.onclose=w}function y(t){if(a.state===o.CONNECTING)throw new Error("[VKEvaluaterCore] The server still in connecting. Please use it before init finished.(by check state)");if(a.state===o.CLOSED)throw new Error("[VKEvaluaterCore] The server already closed. Please re-init it before use it agiain.");if("sendAudioInfo"===t&&a.state!==o.PREPARE_START)throw new Error("[VKEvaluaterCore] The previous evaluter task sill in process. You must waiting for it finished.");if("sendAudioStream"===t&&a.state!==o.WAITING_AUDIO_STREAM)throw new Error("[VKEvaluaterCore] Please send audio info before send audio data.");return"stop"!==t||a.state===o.WAITING_AUDIO_STREAM||(console.warn("[VKEvaluaterCore] Please send info and audio stream before get result.(forget to call sendAudioInfo()?)"),!1)}function v(t){a.state=t}function g(t,e,n){v(t),u({code:t,message:e,data:n})}function m(t,e){var n=e&&e.message,r={notSupport:{code:1101,message:"not supported"},cannotConnect:{code:1104,message:"server cannot connect"},connectTimeout:{code:1105,message:"connect timeout"},authFial:{code:1107,message:"appId invalid"},audioInfoInvalid:{code:4001,message:n||"audio info invalid"},evaluateFail:{code:4002,message:n||"evaluate failed"},evaluateTimeout:{code:4003,message:n||"evaluate timeout"},unknown:{code:1e3,message:"unexpected error"}};c(r[t]||r.unknown)}function b(){l=0,g(o.PREPARE_START)}function _(t){r.parseResBody(t.data,function(t){switch(t.data&&(t.data=JSON.parse(t.data)),k("message back",t),t.code){case"10000":if(!t.data||0===Object.keys(t.data).length)return;if(a.state!==o.RESULT_RECEIVING)return void k("result received, but state not match");d&&clearTimeout(d),g(o.RESULT_RECEIVED,null,t.data);break;case"20001":case"20002":m("audioInfoInvalid",{message:t.message}),g(o.PREPARE_START);break;case"20003":case"20004":case"20005":case"20006":case"20007":case"20008":case"20009":case"20010":case"99999":m("evaluateFail",{message:t.message}),g(o.PREPARE_START)}})}function w(t){k("websocket closed:",t),1005===t.code&&k("服务器端正常关闭socket"),1006===t.code&&(k("服务器端socket异常断开"),a.state,o.INITING),a.state!==o.CLOSED&&(g(o.CONNECTING),function(){l+=1;var t=(new Date).getTime();l<3||t-i>3e3?(k("try _reconnect..."),i=(new Date).getTime(),h()):(m("cannotConnect"),g(o.CLOSED),k("disconnected permanently"))}())}function E(t){if(k("websocket send:",t),t instanceof ArrayBuffer)t=r.parseBinary(s,t);else{if("object"!=typeof t)throw new Error("待发送参数不合法");t=r.parseJSON(s,t)}n.send(t)}function k(){if(!0===window._vkm_debug||!0===window._vkm_evaluate_core_debug){var t=Array.prototype.slice.call(arguments);t.unshift("EvaluaterCore:"),console.debug.apply(console,t)}}g(o.CONNECTING),h()}},function(t,e,n){var r=n(121).flatbuffers,o=n(122).fbutil,i={parseJSON:function(t,e){return a(t,{method:"init",type:"json",data:e}).asUint8Array()},parseBinary:function(t,e){return binary=new Uint8Array(e),a(t,{method:"stream",type:"binary",data:binary}).asUint8Array()},parseResBody:function(t,e){!function(t,e){var n=new FileReader;n.readAsArrayBuffer(t),n.onload=function(t){var o=new r.ByteBuffer(new Uint8Array(n.result));e(o)}}(t,function(t){var n=o.TcpPackage.getRootAsTcpPackage(t),i=new Uint8Array(n.bodyArray());i=new r.ByteBuffer(i);var a=o.TcpRespBody.getRootAsTcpRespBody(i),s=a.code(),u=a.data(),c=a.message();e({code:s,data:u,message:c})})}};function a(t,e){var n,i=new r.Builder(1);n="json"===e.type?new Uint8Array(function(t){for(var e=new ArrayBuffer(t.length),n=new Uint8Array(e),r=0,o=t.length;r<o;r++)n[r]=t.charCodeAt(r);return e}(JSON.stringify(e.data))):e.data;var a=function(t,e,n){return o.TcpPackage.startTcpPackage(t),o.TcpPackage.addHeader(t,e),o.TcpPackage.addBody(t,n),o.TcpPackage.endTcpPackage(t)}(i,function(t,e){for(var n=[],r={appId:e.appId,method:e.method,type:e.type,verifyCode:"verify-code",magicNumber:"magic-number",contentLength:e.contentLength,version:"v1.9.0"},i=Object.keys(r),a=0;a<i.length;a++){var u=i[a],c=r[u];n.push(s(t,u,c))}return header=o.TcpPackage.createHeaderVector(t,n),header}(i,{appId:t,method:e.method,type:e.type,contentLength:n.length}),o.TcpPackage.createBodyVector(i,n));return i.finish(a),i}function s(t,e,n){return e=t.createString(e),n=t.createString(n),o.TcpHeader.startTcpHeader(t),o.TcpHeader.addKey(t,e),o.TcpHeader.addValue(t,n),o.TcpHeader.endTcpHeader(t)}this.fbsutil=i},function(t,e){var n={};n.Offset,n.Table,n.SIZEOF_SHORT=2,n.SIZEOF_INT=4,n.FILE_IDENTIFIER_LENGTH=4,n.Encoding={UTF8_BYTES:1,UTF16_STRING:2},n.int32=new Int32Array(2),n.float32=new Float32Array(n.int32.buffer),n.float64=new Float64Array(n.int32.buffer),n.isLittleEndian=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0],n.Long=function(t,e){this.low=0|t,this.high=0|e},n.Long.create=function(t,e){return 0==t&&0==e?n.Long.ZERO:new n.Long(t,e)},n.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},n.Long.prototype.equals=function(t){return this.low==t.low&&this.high==t.high},n.Long.ZERO=new n.Long(0,0),n.Builder=function(t){if(t)e=t;else var e=1024;this.bb=n.ByteBuffer.allocate(e),this.space=e,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},n.Builder.prototype.forceDefaults=function(t){this.force_defaults=t},n.Builder.prototype.dataBuffer=function(){return this.bb},n.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},n.Builder.prototype.prep=function(t,e){t>this.minalign&&(this.minalign=t);for(var r=1+~(this.bb.capacity()-this.space+e)&t-1;this.space<r+t+e;){var o=this.bb.capacity();this.bb=n.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-o}this.pad(r)},n.Builder.prototype.pad=function(t){for(var e=0;e<t;e++)this.bb.writeInt8(--this.space,0)},n.Builder.prototype.writeInt8=function(t){this.bb.writeInt8(this.space-=1,t)},n.Builder.prototype.writeInt16=function(t){this.bb.writeInt16(this.space-=2,t)},n.Builder.prototype.writeInt32=function(t){this.bb.writeInt32(this.space-=4,t)},n.Builder.prototype.writeInt64=function(t){this.bb.writeInt64(this.space-=8,t)},n.Builder.prototype.writeFloat32=function(t){this.bb.writeFloat32(this.space-=4,t)},n.Builder.prototype.writeFloat64=function(t){this.bb.writeFloat64(this.space-=8,t)},n.Builder.prototype.addInt8=function(t){this.prep(1,0),this.writeInt8(t)},n.Builder.prototype.addInt16=function(t){this.prep(2,0),this.writeInt16(t)},n.Builder.prototype.addInt32=function(t){this.prep(4,0),this.writeInt32(t)},n.Builder.prototype.addInt64=function(t){this.prep(8,0),this.writeInt64(t)},n.Builder.prototype.addFloat32=function(t){this.prep(4,0),this.writeFloat32(t)},n.Builder.prototype.addFloat64=function(t){this.prep(8,0),this.writeFloat64(t)},n.Builder.prototype.addFieldInt8=function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt8(e),this.slot(t))},n.Builder.prototype.addFieldInt16=function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt16(e),this.slot(t))},n.Builder.prototype.addFieldInt32=function(t,e,n){(this.force_defaults||e!=n)&&(this.addInt32(e),this.slot(t))},n.Builder.prototype.addFieldInt64=function(t,e,n){!this.force_defaults&&e.equals(n)||(this.addInt64(e),this.slot(t))},n.Builder.prototype.addFieldFloat32=function(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat32(e),this.slot(t))},n.Builder.prototype.addFieldFloat64=function(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat64(e),this.slot(t))},n.Builder.prototype.addFieldOffset=function(t,e,n){(this.force_defaults||e!=n)&&(this.addOffset(e),this.slot(t))},n.Builder.prototype.addFieldStruct=function(t,e,n){e!=n&&(this.nested(e),this.slot(t))},n.Builder.prototype.nested=function(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},n.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},n.Builder.prototype.slot=function(t){this.vtable[t]=this.offset()},n.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},n.Builder.growByteBuffer=function(t){var e=t.capacity();if(3221225472&e)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var r=e<<1,o=n.ByteBuffer.allocate(r);return o.setPosition(r-e),o.bytes().set(t.bytes(),r-e),o},n.Builder.prototype.addOffset=function(t){this.prep(n.SIZEOF_INT,0),this.writeInt32(this.offset()-t+n.SIZEOF_INT)},n.Builder.prototype.startObject=function(t){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=t;for(var e=0;e<t;e++)this.vtable[e]=0;this.isNested=!0,this.object_start=this.offset()},n.Builder.prototype.endObject=function(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var t=this.offset(),e=this.vtable_in_use-1;e>=0;e--)this.addInt16(0!=this.vtable[e]?t-this.vtable[e]:0);this.addInt16(t-this.object_start),this.addInt16((this.vtable_in_use+2)*n.SIZEOF_SHORT);var r=0;t:for(e=0;e<this.vtables.length;e++){var o=this.bb.capacity()-this.vtables[e],i=this.space,a=this.bb.readInt16(o);if(a==this.bb.readInt16(i)){for(var s=n.SIZEOF_SHORT;s<a;s+=n.SIZEOF_SHORT)if(this.bb.readInt16(o+s)!=this.bb.readInt16(i+s))continue t;r=this.vtables[e];break}}return r?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,r-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t},n.Builder.prototype.finish=function(t,e){if(e){var r=e;if(this.prep(this.minalign,n.SIZEOF_INT+n.FILE_IDENTIFIER_LENGTH),r.length!=n.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+n.FILE_IDENTIFIER_LENGTH);for(var o=n.FILE_IDENTIFIER_LENGTH-1;o>=0;o--)this.writeInt8(r.charCodeAt(o))}this.prep(this.minalign,n.SIZEOF_INT),this.addOffset(t),this.bb.setPosition(this.space)},n.Builder.prototype.requiredField=function(t,e){var n=this.bb.capacity()-t,r=n-this.bb.readInt32(n);if(0==this.bb.readInt16(r+e))throw new Error("FlatBuffers: field "+e+" must be set")},n.Builder.prototype.startVector=function(t,e,r){this.notNested(),this.vector_num_elems=e,this.prep(n.SIZEOF_INT,t*e),this.prep(r,t*e)},n.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},n.Builder.prototype.createString=function(t){if(t instanceof Uint8Array)var e=t;else{e=[];for(var n=0;n<t.length;){var r,o=t.charCodeAt(n++);(r=o<55296||o>=56320?o:(o<<10)+t.charCodeAt(n++)+-56613888)<128?e.push(r):(r<2048?e.push(r>>6&31|192):(r<65536?e.push(r>>12&15|224):e.push(r>>18&7|240,r>>12&63|128),e.push(r>>6&63|128)),e.push(63&r|128))}}this.addInt8(0),this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length),n=0;for(var i=this.space,a=this.bb.bytes();n<e.length;n++)a[i++]=e[n];return this.endVector()},n.Builder.prototype.createLong=function(t,e){return n.Long.create(t,e)},n.ByteBuffer=function(t){this.bytes_=t,this.position_=0},n.ByteBuffer.allocate=function(t){return new n.ByteBuffer(new Uint8Array(t))},n.ByteBuffer.prototype.bytes=function(){return this.bytes_},n.ByteBuffer.prototype.position=function(){return this.position_},n.ByteBuffer.prototype.setPosition=function(t){this.position_=t},n.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},n.ByteBuffer.prototype.readInt8=function(t){return this.readUint8(t)<<24>>24},n.ByteBuffer.prototype.readUint8=function(t){return this.bytes_[t]},n.ByteBuffer.prototype.readInt16=function(t){return this.readUint16(t)<<16>>16},n.ByteBuffer.prototype.readUint16=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8},n.ByteBuffer.prototype.readInt32=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24},n.ByteBuffer.prototype.readUint32=function(t){return this.readInt32(t)>>>0},n.ByteBuffer.prototype.readInt64=function(t){return new n.Long(this.readInt32(t),this.readInt32(t+4))},n.ByteBuffer.prototype.readUint64=function(t){return new n.Long(this.readUint32(t),this.readUint32(t+4))},n.ByteBuffer.prototype.readFloat32=function(t){return n.int32[0]=this.readInt32(t),n.float32[0]},n.ByteBuffer.prototype.readFloat64=function(t){return n.int32[n.isLittleEndian?0:1]=this.readInt32(t),n.int32[n.isLittleEndian?1:0]=this.readInt32(t+4),n.float64[0]},n.ByteBuffer.prototype.writeInt8=function(t,e){this.bytes_[t]=e},n.ByteBuffer.prototype.writeUint8=function(t,e){this.bytes_[t]=e},n.ByteBuffer.prototype.writeInt16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},n.ByteBuffer.prototype.writeUint16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},n.ByteBuffer.prototype.writeInt32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},n.ByteBuffer.prototype.writeUint32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},n.ByteBuffer.prototype.writeInt64=function(t,e){this.writeInt32(t,e.low),this.writeInt32(t+4,e.high)},n.ByteBuffer.prototype.writeUint64=function(t,e){this.writeUint32(t,e.low),this.writeUint32(t+4,e.high)},n.ByteBuffer.prototype.writeFloat32=function(t,e){n.float32[0]=e,this.writeInt32(t,n.int32[0])},n.ByteBuffer.prototype.writeFloat64=function(t,e){n.float64[0]=e,this.writeInt32(t,n.int32[n.isLittleEndian?0:1]),this.writeInt32(t+4,n.int32[n.isLittleEndian?1:0])},n.ByteBuffer.prototype.__offset=function(t,e){var n=t-this.readInt32(t);return e<this.readInt16(n)?this.readInt16(n+e):0},n.ByteBuffer.prototype.__union=function(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t},n.ByteBuffer.prototype.__string=function(t,e){t+=this.readInt32(t);var r=this.readInt32(t),o="",i=0;if(t+=n.SIZEOF_INT,e===n.Encoding.UTF8_BYTES)return this.bytes_.subarray(t,t+r);for(;i<r;){var a,s=this.readUint8(t+i++);if(s<192)a=s;else{var u=this.readUint8(t+i++);if(s<224)a=(31&s)<<6|63&u;else{var c=this.readUint8(t+i++);a=s<240?(15&s)<<12|(63&u)<<6|63&c:(7&s)<<18|(63&u)<<12|(63&c)<<6|63&this.readUint8(t+i++)}}a<65536?o+=String.fromCharCode(a):(a-=65536,o+=String.fromCharCode(55296+(a>>10),56320+(1023&a)))}return o},n.ByteBuffer.prototype.__indirect=function(t){return t+this.readInt32(t)},n.ByteBuffer.prototype.__vector=function(t){return t+this.readInt32(t)+n.SIZEOF_INT},n.ByteBuffer.prototype.__vector_len=function(t){return this.readInt32(t+this.readInt32(t))},n.ByteBuffer.prototype.__has_identifier=function(t){if(t.length!=n.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+n.FILE_IDENTIFIER_LENGTH);for(var e=0;e<n.FILE_IDENTIFIER_LENGTH;e++)if(t.charCodeAt(e)!=this.readInt8(this.position_+n.SIZEOF_INT+e))return!1;return!0},n.ByteBuffer.prototype.createLong=function(t,e){return n.Long.create(t,e)},this.flatbuffers=n},function(t,e){var n=n||{};n.TcpHeader=function(){this.bb=null,this.bb_pos=0},n.TcpHeader.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},n.TcpHeader.getRootAsTcpHeader=function(t,e){return(e||new n.TcpHeader).__init(t.readInt32(t.position())+t.position(),t)},n.TcpHeader.prototype.key=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},n.TcpHeader.prototype.value=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null},n.TcpHeader.startTcpHeader=function(t){t.startObject(2)},n.TcpHeader.addKey=function(t,e){t.addFieldOffset(0,e,0)},n.TcpHeader.addValue=function(t,e){t.addFieldOffset(1,e,0)},n.TcpHeader.endTcpHeader=function(t){return t.endObject()},n.TcpPackage=function(){this.bb=null,this.bb_pos=0},n.TcpPackage.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},n.TcpPackage.getRootAsTcpPackage=function(t,e){return(e||new n.TcpPackage).__init(t.readInt32(t.position())+t.position(),t)},n.TcpPackage.prototype.header=function(t,e){var r=this.bb.__offset(this.bb_pos,4);return r?(e||new n.TcpHeader).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null},n.TcpPackage.prototype.headerLength=function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0},n.TcpPackage.prototype.body=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb.__vector(this.bb_pos+e)+t):0},n.TcpPackage.prototype.bodyLength=function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0},n.TcpPackage.prototype.bodyArray=function(){var t=this.bb.__offset(this.bb_pos,6);return t?new Int8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null},n.TcpPackage.startTcpPackage=function(t){t.startObject(2)},n.TcpPackage.addHeader=function(t,e){t.addFieldOffset(0,e,0)},n.TcpPackage.createHeaderVector=function(t,e){t.startVector(4,e.length,4);for(var n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()},n.TcpPackage.startHeaderVector=function(t,e){t.startVector(4,e,4)},n.TcpPackage.addBody=function(t,e){t.addFieldOffset(1,e,0)},n.TcpPackage.createBodyVector=function(t,e){t.startVector(1,e.length,1);for(var n=e.length-1;n>=0;n--)t.addInt8(e[n]);return t.endVector()},n.TcpPackage.startBodyVector=function(t,e){t.startVector(1,e,1)},n.TcpPackage.endTcpPackage=function(t){return t.endObject()},n.TcpRespBody=function(){this.bb=null,this.bb_pos=0},n.TcpRespBody.prototype.__init=function(t,e){return this.bb_pos=t,this.bb=e,this},n.TcpRespBody.getRootAsTcpRespBody=function(t,e){return(e||new n.TcpRespBody).__init(t.readInt32(t.position())+t.position(),t)},n.TcpRespBody.prototype.code=function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null},n.TcpRespBody.prototype.data=function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null},n.TcpRespBody.prototype.message=function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null},n.TcpRespBody.prototype.serverTime=function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readUint64(this.bb_pos+t):this.bb.createLong(0,0)},n.TcpRespBody.prototype.mutate_serverTime=function(t){var e=this.bb.__offset(this.bb_pos,10);return 0!==e&&(this.bb.writeUint64(this.bb_pos+e,t),!0)},n.TcpRespBody.startTcpRespBody=function(t){t.startObject(4)},n.TcpRespBody.addCode=function(t,e){t.addFieldOffset(0,e,0)},n.TcpRespBody.addData=function(t,e){t.addFieldOffset(1,e,0)},n.TcpRespBody.addMessage=function(t,e){t.addFieldOffset(2,e,0)},n.TcpRespBody.addServerTime=function(t,e){t.addFieldInt64(3,e,t.createLong(0,0))},n.TcpRespBody.endTcpRespBody=function(t){return t.endObject()},this.fbutil=n},function(t,e){t.exports={NOT_READY:1,CONNECTING:2,PREPARE_START:3,WAITING_AUDIO_STREAM:4,RESULT_RECEIVING:5,RESULT_RECEIVED:6,CLOSED:7}},function(t,e,n){var r=n(125);t.exports=function(){var t,e,n,o,i,a=null,s=!1;this.init=function(t){c(function(e){if(!e)return t({code:902001,message:"not supported"}||{code:902999,message:"unexpected error"});t()})},this.recorderCore=null,this.isSupport=c,this.start=function(){a="recording",u.recorderCore.startRecord()},this.pause=function(){a="pausing",u.recorderCore.stopRecord(),n&&n()},this.stop=function(){a="stop",u.recorderCore.stopRecord(),u.recorderCore.clear(),e&&e()},this.onRecording=function(e){t=e},this.onStoped=function(t){e=t},this.onPaused=function(t){n=t},this.exportBlob=function(t){s=!1,o=t,i&&(s=!0,t(i),i=null)};var u=this;function c(e){if(AudioContext=window.AudioContext||window.webkitAudioContext,!AudioContext)return e(!1);!function(e){f("initAudio"),navigator.getUserMedia||(navigator.getUserMedia=navigator.webkitGetUserMedia||navigator.mozGetUserMedia),navigator.cancelAnimationFrame||(navigator.cancelAnimationFrame=navigator.webkitCancelAnimationFrame||navigator.mozCancelAnimationFrame),navigator.requestAnimationFrame||(navigator.requestAnimationFrame=navigator.webkitRequestAnimationFrame||navigator.mozRequestAnimationFrame),navigator.getUserMedia({audio:{mandatory:{googEchoCancellation:"false",googAutoGainControl:"false",googNoiseSuppression:"false",googHighpassFilter:"false"},optional:[]}},function(n){!function(e){u.recorderCore=new r(e,{exportAudio:"wav",streamNum:51}),u.recorderCore.onStreamProcessor=function(e){"recording"===a?t&&t(e):f("status is not recording, it's: ",a)},u.recorderCore.onReceiveAudioBlob=function(t){i=t,!s&&o&&(s=!1,o(t),i=null)}}(n),e()},function(t){e("get audio recorder error")})}(function(t){e(!t)})}function f(){if(!0===window._vkm_debug||!0===window._vkm_audio_recorder_debug){var t=Array.prototype.slice.call(arguments);t.unshift((new Date).toLocaleString()),t.unshift("AudioRecorder"),console.debug.apply(console,t)}}}},function(t,e,n){function r(t,e){e=e||{},this.config={exportAudio:e.exportAudio,streamNum:e.streamNum||6},this.AudioCtx=this._gotStream(t),this.RECWorker=this._importWorker()}r.prototype.onStreamProcessor=null,r.prototype.onReceiveAudioBlob=null,r.prototype.analyserNode=null,r.prototype._gotStream=function(t){var e=new AudioContext,n=e.createGain();e.createMediaStreamSource(t).connect(n);var r=e.createAnalyser();return r.fftSize=2048,n.connect(r),this.analyserNode=r,n},r.prototype._importWorker=function(){var t=n(126),e=new Blob([t],{type:"application/javascript"});return new Worker(window.URL.createObjectURL(e))},r.prototype.startRecord=function(t){var e=this,n=this.AudioCtx.context.createScriptProcessor(1024,1,1);this.AudioCtx.connect(n),n.connect(this.AudioCtx.context.destination),this.RECWorker.postMessage({command:"init",config:t||{}});var r=0,o=[],i=this;this.RECWorker.onmessage=function(t){if("stream"!==t.data.command)"blob"===t.data.command&&i.onReceiveAudioBlob&&i.onReceiveAudioBlob(t.data.blob);else{for(var n=t.data.buffer,a=new Int16Array(n.length),s=0;s<n.length;s++)a[s]=n[s];if(r++,o.push(a),o.length>0&&r===e.config.streamNum){var u=o.splice(0,o.length),c=new Int16Array(320*u.length);for(s=0;s<u.length;s++)c.set(u[s],320*s);i.onStreamProcessor&&i.onStreamProcessor(c.buffer),r=0}}},n.onaudioprocess=function(t){i.RECWorker.postMessage({command:"record",buffer:t.inputBuffer.getChannelData(0)})},this.Recorder=n},r.prototype.stopRecord=function(){this.config.exportAudio&&"wav"===this.config.exportAudio&&this.RECWorker.postMessage({command:"exportAudio",type:"wav"}),this.Recorder&&this.Recorder.disconnect()},r.prototype.clear=function(){this.RECWorker.postMessage({command:"reset"})},t.exports=r},function(t,e){t.exports='var sampleRate,outputBufferLength,compressPath;\n\nvar DEFAULT_MAX_VOLUME_LEVEL = 6;\n\nvar recBuffers  = [];\nvar pcmCache = [];\nvar pcmLength = 0;\n\nthis.onmessage = function(e){\n    switch(e.data.command){\n        case \'init\':\n            init(e.data.config);\n            break;\n        case \'record\':\n            record(e.data.buffer);\n            break;\n        case \'reset\':\n            reset();\n            break;\n        case \'exportAudio\':\n            exportAudio(e.data.type);\n            break;\n    }\n};\n\nfunction init(config){\n    sampleRate = 44100;\n    outputBufferLength = 1024;\n    compressPath = config.compressPath;\n}\nfunction reset(){\n    recBuffers = [];\n    pcmCache = [];\n    pcmLength = 0;\n}\n\nfunction record(inputBuffer){\n    var rss = new Resampler(sampleRate, 16000, 1, outputBufferLength, true);\n\n    var tempArray = [];\n    for (var i = 0 ; i < inputBuffer.length ; i++) {\n        tempArray.push(inputBuffer[i]);\n    }\n\n    var l = rss.resampler(tempArray);\n    var outputBuffer = new Float32Array(l);\n    for(var i = 0; i < l; i++)\n        outputBuffer[i] = rss.outputBuffer[i];\n\n    var data = floatTo16BitPCM(outputBuffer);\n\n    //pcmCache.push(data);\n    //pcmLength += data.length;\n\n    pcmCache.push(outputBuffer);\n    pcmLength += outputBuffer.length;\n\n    for (var i = 0 ; i < data.length ; i++) {\n        recBuffers.push(data[i]);\n    }\n\n    while(recBuffers.length > 320)\n    {\n        var items = recBuffers.splice(0, 320);\n        var result = new Int16Array(320);\n        for(var i = 0; i < 320; i++)\n        {\n            result[i] = items[i];\n        }\n\n        var volume = compute(result.buffer);\n        this.postMessage({\'volume\' : volume, \'buffer\' : result, \'command\': \'stream\'});\n    }\n}\n\nfunction exportAudio(type) {\n    var dataview = null;\n\n\n    //var pa = new Int16Array(pcmLength);\n    var pa = new Float32Array(pcmLength);\n    var offset = 0;\n    for(var i = 0; i < pcmCache.length; ++i) {\n        pa.set(pcmCache[i], offset);\n        offset += pcmCache[i].length;\n    }\n\n    if(type == "wav") {\n        dataview = encodeWAV(pa);\n    }\n\n    var audioBlob = new Blob([dataview], {type: "audio/wav"});\n    this.postMessage({command: \'blob\', blob: audioBlob});\n}\n\nfunction compute(pcmData)\n{\n    if(pcmData == null || pcmData.byteLength <= 0)\n    {\n        return 0;\n    }\n\n    var audioLevel = 0;\n    var sampleCount = pcmData.byteLength / 2;\n    var fEnergy = getCalEnergy(pcmData);\n    fEnergy = 10.0 *  Math.log(fEnergy / sampleCount);\n    if(fEnergy < 100)\n    {\n        audioLevel = 0;\n    }\n    else if(fEnergy > 200)\n    {\n        audioLevel = DEFAULT_MAX_VOLUME_LEVEL;\n    }\n    else\n    {\n        audioLevel = parseInt((fEnergy - 100) * (DEFAULT_MAX_VOLUME_LEVEL) / 100);\n    }\n    return audioLevel;\n}\n\nfunction getCalEnergy(pcmData)\n{\n    var fDirectOffset = 0;\n    var sampleCount = pcmData.byteLength / 128;\n    var data = new Int16Array(pcmData);\n\n    for(var i = 0; i < data.length; i ++)\n    {\n        fDirectOffset += data[i];\n    }\n\n    fDirectOffset /= sampleCount;\n    var fEnergy = 0;\n    for(var i = 0; i < data.length; i ++)\n    {\n        fEnergy += (data[i] - fDirectOffset) * (data[i] - fDirectOffset);\n    }\n    fEnergy += 400000;\n    return fEnergy;\n}\n\nfunction floatTo16BitPCM(input)\n{\n    var output = new Int16Array(input.length);\n    for (var i = 0; i < input.length; i++){\n        var s = Math.max(-1, Math.min(1, input[i]));\n        if(s < 0)\n            output[i] = s * 0x8000;\n        else\n            output[i] = s * 0x7FFF;\n    }\n    return output;\n}\n\nfunction writeString(view, offset, string){\n    for (var i = 0; i < string.length; i++){\n        view.setUint8(offset + i, string.charCodeAt(i));\n    }\n}\nfunction floatTo16BitPCM2(output, offset, input){\n    for (var i = 0; i < input.length; i++, offset+=2){\n        var s = Math.max(-1, Math.min(1, input[i]));\n        output.setInt16(offset, s < 0 ? s * 0x8000 : s * 0x7FFF, true);\n    }\n}\n\nfunction encodeWAV(samples){\n    var buffer = new ArrayBuffer(44 + samples.length*2);\n    var view = new DataView(buffer);\n\n    /* RIFF identifier */\n    writeString(view, 0, \'RIFF\');\n    /* RIFF chunk length */\n    view.setUint32(4, 36 + samples.length*2, true);\n    /* RIFF type */\n    writeString(view, 8, \'WAVE\');\n    /* format chunk identifier */\n    writeString(view, 12, \'fmt \');\n    /* format chunk length */\n    view.setUint32(16, 16, true);\n    /* sample format (raw) */\n    view.setUint16(20, 1, true);\n    /* channel count */\n    view.setUint16(22, 1, true);\n    /* sample rate */\n    view.setUint32(24, 16000, true);\n    /* byte rate (sample rate * block align) */\n    view.setUint32(28, 16000 * 4, true);\n    /* block align (channel count * bytes per sample) */\n    view.setUint16(32, 2, true);\n    /* bits per sample */\n    view.setUint16(34, 16, true);\n    /* data chunk identifier */\n    writeString(view, 36, \'data\');\n    /* data chunk length */\n    view.setUint32(40, samples.length*2, true);\n\n    //view.setInt16(44, samples, true);\n    floatTo16BitPCM2(view, 44, samples);\n\n    return view;\n}\n\nfunction Resampler(fromSampleRate, toSampleRate, channels, outputBufferSize, noReturn) {\n\n    this.fromSampleRate = fromSampleRate;\n    this.toSampleRate = toSampleRate;\n    this.channels = channels | 0;\n    this.outputBufferSize = outputBufferSize;\n    this.noReturn = !!noReturn;\n    this.initialize();\n}\nResampler.prototype.initialize = function () {\n    //Perform some checks:\n    if (this.fromSampleRate > 0 && this.toSampleRate > 0 && this.channels > 0) {\n        if (this.fromSampleRate == this.toSampleRate) {\n            //Setup a resampler bypass:\n            this.resampler = this.bypassResampler;\t\t//Resampler just returns what was passed through.\n            this.ratioWeight = 1;\n        }\n        else {\n            if (this.fromSampleRate < this.toSampleRate) {\n                /*\n                    Use generic linear interpolation if upsampling,\n                    as linear interpolation produces a gradient that we want\n                    and works fine with two input sample points per output in this case.\n                */\n                // this.compileLinearInterpolationFunction();\n                // this.lastWeight = 1;\n            }\n            else {\n                /*\n                    Custom resampler I wrote that doesn\'t skip samples\n                    like standard linear interpolation in high downsampling.\n                    This is more accurate than linear interpolation on downsampling.\n                */\n                this.compileMultiTapFunction();\n                this.tailExists = false;\n                this.lastWeight = 0;\n            }\n            this.ratioWeight = this.fromSampleRate / this.toSampleRate;\n            this.initializeBuffers();\n        }\n    }\n    else {\n        throw(new Error("Invalid settings specified for the resampler."));\n    }\n}\n\n\nResampler.prototype.compileMultiTapFunction = function () {\n    var toCompile = "var bufferLength = buffer.length;\tvar outLength = this.outputBufferSize;\tif ((bufferLength % " + this.channels + ") == 0) {\t\tif (bufferLength > 0) {\t\t\tvar ratioWeight = this.ratioWeight;\t\t\tvar weight = 0;";\n    for (var channel = 0; channel < this.channels; ++channel) {\n        toCompile += "var output" + channel + " = 0;"\n    }\n    toCompile += "var actualPosition = 0;\t\t\tvar amountToNext = 0;\t\t\tvar alreadyProcessedTail = !this.tailExists;\t\t\tthis.tailExists = false;\t\t\tvar outputBuffer = this.outputBuffer;\t\t\tvar outputOffset = 0;\t\t\tvar currentPosition = 0;\t\t\tdo {\t\t\t\tif (alreadyProcessedTail) {\t\t\t\t\tweight = ratioWeight;";\n    for (channel = 0; channel < this.channels; ++channel) {\n        toCompile += "output" + channel + " = 0;"\n    }\n    toCompile += "}\t\t\t\telse {\t\t\t\t\tweight = this.lastWeight;";\n    for (channel = 0; channel < this.channels; ++channel) {\n        toCompile += "output" + channel + " = this.lastOutput[" + channel + "];"\n    }\n    toCompile += "alreadyProcessedTail = true;\t\t\t\t}\t\t\t\twhile (weight > 0 && actualPosition < bufferLength) {\t\t\t\t\tamountToNext = 1 + actualPosition - currentPosition;\t\t\t\t\tif (weight >= amountToNext) {";\n    for (channel = 0; channel < this.channels; ++channel) {\n        toCompile += "output" + channel + " += buffer[actualPosition++] * amountToNext;"\n    }\n    toCompile += "currentPosition = actualPosition;\t\t\t\t\t\tweight -= amountToNext;\t\t\t\t\t}\t\t\t\t\telse {";\n    for (channel = 0; channel < this.channels; ++channel) {\n        toCompile += "output" + channel + " += buffer[actualPosition" + ((channel > 0) ? (" + " + channel) : "") + "] * weight;"\n    }\n    toCompile += "currentPosition += weight;\t\t\t\t\t\tweight = 0;\t\t\t\t\t\tbreak;\t\t\t\t\t}\t\t\t\t}\t\t\t\tif (weight == 0) {";\n    for (channel = 0; channel < this.channels; ++channel) {\n        toCompile += "outputBuffer[outputOffset++] = output" + channel + " / ratioWeight;"\n    }\n    toCompile += "}\t\t\t\telse {\t\t\t\t\tthis.lastWeight = weight;";\n    for (channel = 0; channel < this.channels; ++channel) {\n        toCompile += "this.lastOutput[" + channel + "] = output" + channel + ";"\n    }\n    toCompile += "this.tailExists = true;\t\t\t\t\tbreak;\t\t\t\t}\t\t\t} while (actualPosition < bufferLength && outputOffset < outLength);\t\t\treturn this.bufferSlice(outputOffset);\t\t}\t\telse {\t\t\treturn (this.noReturn) ? 0 : [];\t\t}\t}\telse {\t\tthrow(new Error(\'Buffer was of incorrect sample length.\'));\t}";\n    this.resampler = Function("buffer", toCompile);\n}\n\nResampler.prototype.bypassResampler = function (buffer) {\n    if (this.noReturn) {\n        //Set the buffer passed as our own, as we don\'t need to resample it:\n        this.outputBuffer = buffer;\n        return buffer.length;\n    }\n    else {\n        //Just return the buffer passsed:\n        return buffer;\n    }\n}\n\nResampler.prototype.bufferSlice = function (sliceAmount) {\n    if (this.noReturn) {\n        //If we\'re going to access the properties directly from this object:\n        return sliceAmount;\n    }\n    else {\n        //Typed array and normal array buffer section referencing:\n        try {\n            return this.outputBuffer.subarray(0, sliceAmount);\n        }\n        catch (error) {\n            try {\n                //Regular array pass:\n                this.outputBuffer.length = sliceAmount;\n                return this.outputBuffer;\n            }\n            catch (error) {\n                //Nightly Firefox 4 used to have the subarray function named as slice:\n                return this.outputBuffer.slice(0, sliceAmount);\n            }\n        }\n    }\n}\n\nResampler.prototype.initializeBuffers = function () {\n    //Initialize the internal buffer:\n    try {\n        this.outputBuffer = new Float32Array(this.outputBufferSize);\n        this.lastOutput = new Float32Array(this.channels);\n    }\n    catch (error) {\n        this.outputBuffer = [];\n        this.lastOutput = [];\n    }\n}'}]);