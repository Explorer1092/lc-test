;
(function() {
  function session() {
    function getRandom(bit, group) {
      return Math.ceil(Math.random() * (Math.pow(bit, group) - 1)).toString(bit)
    }

    function getSession(bit, group, subgroup) {
      var session = new Date().getTime().toString(bit)
      for (var index = 1; index < group; index++) {
        session += getRandom(bit, subgroup)
      }
      return session
    }
    return getSession(36, 8, 4)  //8组36位随机数
  }

  function getDomain() {
    return location.hostname.slice(location.hostname.indexOf('.')) //截取location url hostname以后的内容，包含'.'
  }

  function vk_session_id() {
    if (!/vk_session_id=/.test(document.cookie)) {
      document.cookie = 'vk_session_id=' + session().toUpperCase() + ';path=/;domain=' + getDomain()
    }
  }

  vk_session_id()
})();
