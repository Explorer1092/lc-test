<template lang="jade">
  //- pro:project
  .pro-content
    .pro-back(@click="$router.back()")
    .pro-title
      h1 {{title}}
    .pro-panel
      .pro-video
        over-video(v-if="videoSrc", :autoPlay="autoPlay", :videoSrc="videoSrc", :materialId="materialId_", :source="source_")
</template>
<script>
import TopPart from '../common/top_part.vue'
import overVideo from '../common/vk_video.vue'
import Velocity from 'velocity-animate'
import axios from 'axios'
import cookies from 'cookies-js'
export default {
  data: function () {
    return {
      title: '',
      level: 1,
      unit: 1,
      lesson: 1,
      videoSrc: false,
      autoPlay: true,
      unitId: this.$route.params.id,
      type: this.$route.params.type, //1主题歌，2预习视频
      source_: '',
      materialId_: ''
    }
  },
  components: {
    overVideo
  },
  mounted() {
    this.autoPlay = true
    this.getVideo(this.unitId)
    this.source_ = 'pre_video'
  },
  methods: {
    getVideo(id) {
      var ajaxObj = {}
      if (this.type == 1) {
        ajaxObj = {
          url: '/rest/learninggw/api/pc/path/unitSong/getUnitSongTitleAndUrl',
          param: {
            studentId: cookies.get("studentId"),
            unitId: id
          }
        }
      } else if (this.type == 2) {
        ajaxObj = {
          url: '/rest/learninggw/api/pc/path/preClass/getPreClassTitleAndUrl',
          param: {
            studentId: cookies.get("studentId"),
            lessonId: id
          }
        }
      }
      axios.get(ajaxObj.url, {
        params: ajaxObj.param
      })
        .then((res) => {
          this.title = res.data.data.title
          this.videoSrc = res.data.data.url
          this.materialId_ = res.data.data.materialId + ''
        })

    }
  }
}
</script>

<style lang="stylus" scoped>
  *
    box-sizing border-box
    -moz-user-select none
    -webkit-user-select none
    -ms-user-select none
    -khtml-user-select none
    user-select none
    -webkit-font-smoothing antialiased

  .pro-back
    position absolute
    height 58px
    width 58px
    top 20px
    left 40px
    cursor pointer
    z-index 11
    background url("../../img/common/back.png") no-repeat center
    &:hover
      background url("../../img/common/back-hover.png") no-repeat center
    &:active
      background url("../../img/common/back-pressed.png") no-repeat center

  .pro-content
    height 100%
    width 100%
    scroll-padding-top: 200px
    padding 139px 250px 61px 250px
    transition: scrollTop 1s
    overflow hidden
    .pro-title
      position: absolute
      text-align: center
      width: 100%
      top: 20px
      left: 0
      color #FFFFFF
      z-index 10
      h1
        font-size: 34px
    .pro-panel
      height 100%
      width 100%
      .pro-video
        float left
        width 100%
        height 100%

</style>
