<template lang="jade">
    .book_record_list_item
      .book_record_cover(@click="goToBookDetail(bookInfo.id,bookInfo.code)")
        img(:src="bookInfo.coverResUrl + '?imageView2/2/w/328/h/370'")
        .book_record_cover_layer
      .book_recode_score(v-bind:class="classObject")
          .book_record_score_data {{bookInfo.score}}
      .book_button_cover
        p.book_button_name {{bookInfo.name}}
      .book_record_data.book_button(@click="goToRecordData()")
          .book_button_text 配音报告
      .book_recodr_share.book_button(@click="openWeixShareTwoCode()")
          .book_button_text 微信分享
</template>
<script>
export default {
  props:["bookInfo"],
  computed:{
    classObject(){
      if(this.bookInfo.score>=86){
        return "excellent"
      } else if(this.bookInfo.score<=55){
        return "bad"
      } else if(this.bookInfo.score>=71){
        return "good"
      } else 
        return "normal"
    }
  },
  methods:{
    goToRecordData(){
      this.$router.push({path:`/bookRecordData/${this.bookInfo.id}`})
    },
    openWeixShareTwoCode(){
      sa.track('learning_click', {'click_id': 'pc_learning_digital_library_book_has_record_share_id_' + this.bookInfo.id})
      this.$emit("openShare",{dudSummaryId:this.bookInfo.readerId,bookId:this.bookInfo.id})
    },
    goToBookDetail(id, code){
      this.$router.push({path: `/digitalLibrary/detail/${id}/${code}`})
    }
  }
}
</script>
<style lang="stylus" scoped>
    .book_record_list_item
       display:inline-block
       margin-left:40px
       margin-top:40px
       position:relative
       width: 280px 
       height: 180px 
       background:url(../../../img/library/dl-record-book-item-bottom@2x.png)
       background-size:280px 180px
       box-sizing:border-box
       @media screen and (max-width:1280px)
          &:nth-child(2n)
             margin-right:0px
       @media screen and (min-width: 1280px) and (max-width:1480px)
          &:nth-child(2n)
            margin-right:85px
          margin-left:45px
       @media screen and (max-width: 1920px) and (min-width: 1480px)
          &:nth-child(2n)
             margin-left:20px
          margin-right:100px
          margin-left:116px
       @media screen and (min-width: 1920px)
           &:nth-child(2n)
             margin-left:46px
           margin-left: 46px
           margin-right: 20px 
    .book_record_cover
       position:absolute
       top:15px 
       left:15px
       width:130px
       height:146px
       cursor:pointer
       img
         display:book
         width:100%
         border-radius:4px         
       .book_record_cover_layer
         position:absolute
         top:0px
         width:130px
         height:146px 
         background:url(../../../img/library/book_mask.png)
         background-size:130px 146px 
    .book_recode_score
       position:absolute 
       right:43px 
       top:20px 
       width:50px 
       height:45px
    .excellent
      color:#79dc7d
      background:url(../../../img/library/dl-current-score-excellent.png)
      background-size:50px 45px
    .good
      color:#90d0ff
      background:url(../../../img/library/dl-current-score-good.png)
      background-size:50px 45px
    .normal 
      color:#ffb600
      background:url(../../../img/library/dl-current-score-normal.png)
      background-size:50px 45px
    .bad
      color:#ed6161
      background:url(../../../img/library/dl-current-score-bad.png)
      background-size:50px 45px
    .book_record_score_data
      position:absolute
      top:28px
      width:100%
      text-align:center
      font-size:14px
    .book_button_cover
       position:absolute
       bottom:0px
       width:280px 
       height:110px 
       background:url(../../../img/library/dl-record-book-item-cover@2x.png)
       background-size:280px 110px
    .book_button_name 
       margin-left:40px 
       margin-top:18px
       width:234px 
       font-size:16px 
       color:#fff
       font-family:"PingFangSC-Semibold"
       font-weight:600
    .book_record_data
        left:15px
        background:url(../../../img/library/dl-record-book-item-data-button@2x.png)
        background-size:120px 40px
    .book_recodr_share
        right:15px 
        background:url(../../../img/library/dl-record-book-item-share-button@2x.png)
        background-size:120px 40px
    .book_button
       position:absolute
       bottom:22px 
       width:120px 
       height:40px
       cursor:pointer
       &:hover
         opacity: .8
    .book_button_text
       margin-left:36px
       padding:8px 0 7px 0
       height:25px 
       color:#fff
       font-family:'PingFangSC-Regular'
       font-size:18px 
       line-height:25px
</style>