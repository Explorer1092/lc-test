<template lang="jade">
    .record-data-share
      .record-data-share-content
        .record-data-mood-img
        .record-data-two-code-content
          .record-data-two-code-close(@click="closeLayer()")
          .record-data-two-code-title 分享
          .record-data-two-code-body
            .record-datat-two-code-body-text 恭喜宝贝<br/>绘本配音完成<br/>分享手机扫码
            img(:src="shareQrCodeUrl")
</template>
<script>
import axios from "axios"
import cookies from 'cookies-js'
export default {
  data(){
    return {
      shareQrCodeUrl:''
    }
  },
  props:{
    dudSummaryId:{
      required:true,
      default:0,
      type:Number
    },
    bookId:{
      required:true,
      default:0,
      type:Number
    }
  },
  mounted(){
    this.getShareInformation()
  },
  methods:{
    closeLayer(){
      this.$emit('closeShareLayer')
    },
    getShareInformation(){
      let promise = axios.get('/rest/learninggw/api/pc/service/digitlib/shareRecord',{
        params:{
          studentId:cookies.get("studentId"),
          bookSummaryId:this.dudSummaryId,
          bookId:this.bookId
        }
      })
      promise.then(res=>{
        if(res.data.code == 200){
          this.shareQrCodeUrl = res.data.data.shareQrCodeUrl
        } else{
          this.$emit("networkError")
        }
      }).catch(err=>{
        this.$emit("networkError")
      })
    }
  }
}
</script>
<style lang="stylus" scoped>
.record-data-share
     position:absolute
     top:0
     left:0
     right:0
     bottom:0
     background:rgba(0,0,0,.8)
     z-index:200
.record-data-share-content
     margin-left:-238px 
     margin-top:-268px 
     position:absolute
     left:50%
     top:50%
     width:475px 
     height:526px 
.record-data-mood-img
    margin: 0 auto
    margin-left:156px
    position:relative
    width:223px 
    height:96px 
    background:url(../../../img/readers/notice.png)
    background-size:223px 96px
    z-index:20
.record-data-two-code-content
    position:relative
    margin-top:-10px
    height:440px 
    background:#A18EE3
    border-radius:20px;
    box-sizing:border-box
.record-data-two-code-title
    padding-top:20px
    height:24px
    color:#fff
    font-family:PingFangSC
    font-size:24px 
    text-align:center
.record-data-two-code-close
     position:absolute
     right:0
     top:0
     width:40px 
     height:40px 
     background:url(../../../img/readers/cancelmodel.png)
     background-size:40px 40px 
.record-data-two-code-body
     margin:18px auto
     width:455px 
     height:370px 
     box-sizing:border-box
     background:#fff
     border:5px solid #9886D7
     border-radius:20px
     img 
        margin:21px auto
        display:block
        width:180px 
        height:180px
.record-datat-two-code-body-text 
     padding-top:20px
     color:#666666
     font-size:24px 
     line-height:33px 
     text-align center
</style>


