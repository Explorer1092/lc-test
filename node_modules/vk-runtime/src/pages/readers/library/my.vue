<template lang="jade">
  .library_all_bg
    fullPageLoading(v-if="isFullPageLoadingShow")
    my-dialog(:tipText="'网络有点问题，检查一下网络连接吧'", :confirmButton="'刷新页面'", :type="'alert'", title="Notice", isShowTitle = true, @library-dialog-cancel="reloadPage", v-if="isBadNetworkAlertShow")
    my-dialog(:tipText="'还没有读过书，赶紧去读书吧'", :confirmButton="'去读书'", :type="'alert'", title="Notice", isShowTitle = true,@library-dialog-close ="closeAlert" @library-dialog-cancel="goToLibrary", v-if="isNotReadAnyBookAlertShow")
    my-dialog(:tipText="'确定要取消收藏吗？'", :type = "'confirm'", title="Notice", isShowTitle = true, @library-dialog-cancel="cancelDialog", @library-dialog-confirm='unCollectThisBook', v-if="isShowDialog")
    top-part(:title_cn = "title_chinese", :title_eng = "title_english", :isAbsoluteFix = "true", :gobackurl="''", :mark="'libarary_my'")
    .black-mirror(v-if="isGuideShow")
    .user-information
          img(src = "../../../img/common/avatar/default.png", v-if = "!userInfo.avatarUrl && (userInfo.studentAvatar == 'default' || !userInfo.studentAvatar)")
          img(src = "../../../img/common/avatar/boy_1.png", v-if = "!userInfo.avatarUrl && userInfo.studentAvatar == 'boy_1'")
          img(src = "../../../img/common/avatar/boy_2.png", v-if = "!userInfo.avatarUrl && userInfo.studentAvatar == 'boy_2'")
          img(src = "../../../img/common/avatar/boy_3.png", v-if = "!userInfo.avatarUrl && userInfo.studentAvatar == 'boy_3'")
          img(src = "../../../img/common/avatar/boy_4.png", v-if = "!userInfo.avatarUrl && userInfo.studentAvatar == 'boy_4'")
          img(src = "../../../img/common/avatar/girl_1.png", v-if = "!userInfo.avatarUrl && userInfo.studentAvatar == 'girl_1'")
          img(src = "../../../img/common/avatar/girl_2.png", v-if = "!userInfo.avatarUrl && userInfo.studentAvatar == 'girl_2'")
          img(src = "../../../img/common/avatar/girl_3.png", v-if = "!userInfo.avatarUrl && userInfo.studentAvatar == 'girl_3'")
          img(src = "../../../img/common/avatar/girl_4.png", v-if = "!userInfo.avatarUrl && userInfo.studentAvatar == 'girl_4'")
          img(:src="userInfo.avatarUrl",v-if="userInfo.avatarUrl")
          .user-name {{userInfo.studentName}}
    .edit-btn(@click="edit", v-show="isEditButtonShow") {{editButtonText}}
    .page-operation-hd
      .next-page(@click="nextPage", v-show="isShowNextBtn")
      .prev-page(@click="prevPage", v-show="isShowPrevBtn")
    .switch-btn(:class="switchFlag")
      .btn-common.left(@click="switchList('readed')")
        .title.readed 已读
        .en-title My Books
        strong {{readedCount}}
      .btn-common.middle(@click="switchList('recorded')")
        .title.recorded 已录音
        .en-title My Voice
        strong {{recordedCount}}
      .btn-common.right(@click="switchList('favorites')")
        .title.colletcted 收藏
        .en-title My Favorites
        strong {{favoriteCount}}
    .page-num-container
      span.current-page {{currentPage}}
      span &nbsp/
      span.total-page {{pageTotal}}
    .book-list-no-wrap(v-if="isShowNoRecordView&&switchFlag=='recorded'")
      .empty-book 
      p.text-trips 宝贝没有未配音的绘本呢，赶紧找一本适合你的绘本
    .book-list-wrap
      .booke-record-button-slide(v-if="switchFlag == 'recorded'&& recordedCount != 0")
        .book-record-button-button(:class="isRecordFinished")
        .book-record-button.book-record-no-finished(@click="showRecord('noFinished')") 未完成 
            span {{bookNoFinshedRecrodCount}}
        .book-record-button.book-record-have-finished(@click="showRecord('finished')") 已完成 
            span {{bookFinshedRecrodCount}}
      .book-item-box(v-for = "(item, index) in BookList", v-if="isRecordFinished !== 'bookFinished' || switchFlag !== 'recorded'")
        transition(enter-active-class="animated bounceIn", leave-active-class="animated bounceOut")
          .return-book-btn(v-show="isEditing", v-if="switchFlag == 'favorites'", @click.stop="showConfirm(item.code)")
        bookItem(:bookDataProp = "item", :config = "bookConfig", :isBookShake = "isEditing", @closeFullPageLoadingEvent = "closeFullPageLoading", :mark = "'library_my'")
        .progress-container(v-show="isProgressShow")
          img.eye-icon(src="../../../img/library/icon-book-see-copy-4@2x.png")
          .progress-bg
            .progress(:style="{width: (item.currentPage / item.pageCount) * 100 + '%'}",v-if="!item.isRecord")
            .progress(:style="{width: (item.completePercent) * 100 + '%'}",v-if="item.isRecord")
          .progress-percent(v-if="!item.isRecord") {{ parseInt(item.currentPage / item.pageCount * 100) + '%'}}
          .progress-percent(v-if="item.isRecord") {{ parseInt(item.completePercent * 100) + '%'}}
    .book-item-record-listWrap(v-if="isRecordFinished == 'bookFinished' && switchFlag == 'recorded'")
        bookRecordListItem(v-for="item in BookList",@openShare="startShare",:bookInfo="item")
    weixinShare(:dudSummaryId="shareDudSummaryId",:bookId="shareBookId",v-if="isShare", @closeShareLayer="closeShareLayer")
</template>
<script>
import axios from 'axios'
import cookies from 'cookies-js'
import TopPart from '../../common/top_part.vue'
import myDialog from "./../common/dialog.vue"
import Velocity from 'velocity-animate'
import bookItem from '../component/book_list_item.vue'
import bookRecordListItem from '../component/book_record_list_item.vue'
import fullPageLoading from "../../common/vk_turn_page_loading.vue"
import weixinShare from "./../common/share.vue" 
import {loadURL} from '../libarary_utils.js'

export default {
  data: function() {
    return {
      title_chinese: '',
      title_english: '',
      isGuideShow: false,
      isFullPageLoadingShow: false,
      numberOfStudentBorrow: '',
      isShowHowToBorrowDialog: false,
      cn: 'lc_dl_userguide_' + cookies.get('studentId'),
      pbData:{},
      voData:{},
      isShowInitAnimationThings: false,
      bookData: {
        labelImgSrc: '',
        bookFaceImgSrc: 'https://teacher-media.vipkid.com.cn/resource/d0b5bd5f11ef452e85c9a7fd59db4f91.jpg',
        bookName: 'this is a brand new world with Kent',
        clickRate: 1233
      },
      bookConfig: {
        style: 5,
        bookListLengthOfCurrPage: 0
      },
      numberOfBooksShow: 8,
      switchFlag: 'readed',
      editButtonText: '编辑',
      isEditing: false,
      BookList: [],
      onePageLimit: 1,
      isEditButtonShow: false,
      isProgressShow: true,
      isBadNetworkAlertShow: false,
      isNotReadAnyBookAlertShow: false,
      userInfo:'',
      readedCount: '',
      favoriteCount: '',
      bookNoFinshedRecrodCount:0,
      bookFinshedRecrodCount:0,
      isShowDialog: false,
      code: '',
      currentPage: 0,
      pageTotal: 0,
      indexOfBookList: 0,
      totalNumOfBookList: 0,
      isShowNextBtn: true,
      isShowPrevBtn: false,
      //录音添加
      isRecordFinished:"bookNoFinished",
      isHaveRecordBook:false,
      isShowNoRecordView:false,
      isShare:false,
      shareDudSummaryId:0,
      shareBookId:0
    }
  },
  components: {
    TopPart,
    myDialog,
    bookItem,
    fullPageLoading,
    bookRecordListItem,
    weixinShare
  },
  watch: {
    '$route': 'refreshData',
    switchFlag:function(val){
      this.$nextTick(()=>{
        if(val!=='recorded'){
          this.isShowNoRecordView = false
        }
      })
    }
  },
  mounted() {
    if (cookies.get('isFromApp')) {
      loadURL('vkappbridge://loading/stop') //停止ipad的loading界面
    }
    this.userInfoData()
    this.getRecordBookList('bookFinished',false)
    this.getRecordBookList('bookNoFinished',false)
    this.getFavoriteBookCount()
    this.windowAdaptation()
    window.onresize = () => {
      this.windowAdaptation()
    }
  },
  computed:{
    recordedCount:function(){
      return this.bookNoFinshedRecrodCount + this.bookFinshedRecrodCount
    }
  },
  methods: {
    startShare(preload){
      this.shareDudSummaryId = preload.dudSummaryId
      this.shareBookId = preload.bookId
      this.isShare = true
    },
    closeShareLayer(){
      this.isShare = false
    },
    closeAlert(){
      this.isNotReadAnyBookAlertShow = false
    },
    refreshData() {
      this.getFavoriteBookCount()
      this.getBookList()
    },
    closeFullPageLoading() {
      this.isFullPageLoadingShow = false
    },
    cancelDialog() {
      this.isShowDialog = !this.isShowDialog
    },
    showConfirm(bookCode) {
      this.isShowDialog = !this.isShowDialog
      this.code = bookCode
    },
    goToLibrary() {
      // this.$router.push({path: '/digitalLibrary'})
      this.isNotReadAnyBookAlertShow = false
    },
    reloadPage() {
      window.location.reload(true)
    },
    unCollectThisBook() {
      sa.track('learning_click', {'click_id': 'pc_learning_digital_delete_book_code_' + this.code})
      axios.post(`/rest/learninggw/api/pc/service/digitlib/deleteCollectionBook?studentId=${cookies.get('studentId')}&bookCode=${this.code}`).then((res) => {
        this.$showToast('取消收藏成功~', 'happy', 1900)
        this.isShowDialog = !this.isShowDialog
        setTimeout(() => {
          this.edit()
          this.switchList('favorites')
        }, 2000)
      })
    },
    //获取录音绘本的数据
    getRecordBookList(isRecordFinished,flag){
      this.BookList = []
      this.isFullPageLoadingShow = true
      let promise = axios.get(
        '/rest/learninggw/api/pc/service/digitlib/getRecordSummaryList',
        {
          params:{
            studentId:cookies.get('studentId'),
            status:isRecordFinished == 'bookNoFinished' ? 0:1,
            pageSize:this.onePageLimit,
            pageNum:this.indexOfBookList + 1
          }
        })
      promise.then((res)=>{
        let data = res.data.data
        this.isFullPageLoadingShow = false

        this.pageTotal = data.totalPage ? data.totalPage: 1
        this.currentPage = data.pageNum ? data.pageNum : 1
        if(isRecordFinished == 'bookNoFinished'){
          this.bookNoFinshedRecrodCount = data.totalCount ? data.totalCount : 0
          if(this.bookNoFinshedRecrodCount == 0){
            this.isShowNoRecordView =true
          } else{
            this.isShowNoRecordView =false
          }
        } else{
          this.bookFinshedRecrodCount = data.totalCount ? data.totalCount : 0
          if(this.bookFinshedRecrodCount !==0){
            this.isHaveRecordBook = true
          }
          if(this.bookFinshedRecrodCount == 0){
            this.isShowNoRecordView =true
          } else{
            this.isShowNoRecordView =false
          }
        }
       
        if(this.currentPage >= this.pageTotal){
          this.isShowNextBtn = false
        } else{
          if(this.currentPage == 1){
            this.isShowPrevBtn = false
            this.isShowNextBtn = true
          } else if((this.currentPage >1) && (this.currentPage< this.pageTotal)){
            this.isShowPrevBtn = true
            this.isShowNextBtn = true
          }
        }
        this.totalNumOfBookList = data.totalCount
        this.bookConfig.bookListLengthOfCurrPage = data.summarys.length
        if(flag)
          this.tranformBooList(data.summarys)
      }).catch(error=>{
        this.isFullPageLoadingShow = false
      })
    },
    //由于两组人做的东西数据接口不一致，需要转换数据
    tranformBooList(bookList){
      let length = bookList.length
      this.BookList = []
      for(let i=0; i<length; i++){
        let tempBookList = {}
        tempBookList.code = bookList[i].code || 'R0000971'
        tempBookList.id = bookList[i].readerId
        tempBookList.readerId = bookList[i].id
        tempBookList.name = bookList[i].readerName
        tempBookList.coverResUrl = bookList[i].readerImg
        tempBookList.allowRepeat = 1
        tempBookList.score = bookList[i].score
        tempBookList.clickRate = 0
        tempBookList.pageCount = bookList[i].pageCount
        tempBookList.completePercent = bookList[i].completePercent
        tempBookList.currentPage = Math.floor(bookList[i].pageCount * bookList[i].completePercent)
        tempBookList.isRecord = true //增加了录音的标志，由于录音的已录百分比不一致。
        this.BookList.push(tempBookList)
      }
    },
    getBookList() {
      let ajaxUrl
      this.BookList = []
      this.isFullPageLoadingShow = true
      this.setPageLimit()
      let params = {
        studentId: cookies.get('studentId'),
        limit: this.onePageLimit,
        start: this.indexOfBookList
      }
      if(this.switchFlag == 'readed') {
        ajaxUrl = '/rest/learninggw/api/pc/service/digitlib/getHasReadBooks'
      } else if(this.switchFlag == 'favorites') {
        ajaxUrl = '/rest/learninggw/api/pc/service/digitlib/getCollectionBooks'
      } else if(this.switchFlag == 'recorded') {
        this.getRecordBookList(this.isRecordFinished,true)
        return
      }

      let promise = axios.get(ajaxUrl,{params:params})
      promise.then((res) => {
        let data = res.data.data
        if(!data) {
          this.readedCount = 0
          //没有数据
          this.isFullPageLoadingShow = false
          this.isNotReadAnyBookAlertShow = true
          return
        }
        this.isFullPageLoadingShow = false
        this.bookConfig.bookListLengthOfCurrPage = data.books.length
        switch (this.switchFlag) {
        case 'readed':
          this.readedCount = data.total ? data.total : '0'
          break
        case 'favorites':
          if(!data.total) {
            this.isEditButtonShow = false
          }
          this.favoriteCount = data.total ? data.total : '0'
          break
        }

        this.totalNumOfBookList = res.data.data.total
        this.currentPage = res.data.data.currentPage
        this.pageTotal = res.data.data.totalPage

        for(let i = 0; i < data.books.length; i++) {
          this.BookList.push(data.books[i])
        }

        if (this.pageTotal <= 1) {
          this.isShowNextBtn = false
          this.isShowPrevBtn = false
        } else {
          if (this.currentPage != this.pageTotal) {
            this.isShowNextBtn = true
          }
          if (this.currentPage == 1) {
            this.isShowPrevBtn = false
          }
        }

        setTimeout(() => {
          if (!data.books.length) {
            this.isFullPageLoadingShow = false
          }
        }, 300)
      })
    },
    switchList(flag) {
      this.switchFlag = flag
      this.indexOfBookList = 0
      switch( flag ) {
      case 'readed':
        this.isEditButtonShow = false
        this.isProgressShow = true
        break
      case 'favorites':
        this.isEditButtonShow = true
        this.isProgressShow = false
        break
      case 'recorded':
        this.isEditButtonShow = false
        this.isProgressShow = true
        break
      }
      this.getBookList()
    },
    edit() {
      this.editButtonText = this.isEditing ? '编辑' : '取消编辑' 
      this.isEditing = !this.isEditing
    },
    cancelHowToBorrowDialog() {
      this.isShowHowToBorrowDialog = !this.isShowHowToBorrowDialog
    },
    showHowToBorrowDialog() {
      this.isShowHowToBorrowDialog = true
    },
    setStudentBorrowStatus() {
      axios.get(`/rest/learninggw/api/pc/service/digitlib/${cookies.get('studentId')}/myBookShelf`, {})
        .then((res) => {
          this.numberOfStudentBorrow = res.data.data.books.length
        })
        .catch((err) => {
        })
    },
    setPageLimit(){
      let screenWidth = window.innerWidth
      if(this.isRecordFinished == 'bookFinished' && this.switchFlag == "recorded"){
        if(screenWidth >=1920){
          this.onePageLimit = 6
        } else{
          this.onePageLimit = 4
        }
      } else{
        if(screenWidth >= 1920) {
          this.onePageLimit = 12
        } else if(screenWidth < 1920 && screenWidth > 1480) {
          this.onePageLimit = 10
        } else {
          this.onePageLimit = 8
        }
      }
    },
    windowAdaptation() {
      this.getBookList()
    },
   
    nextPage() {
      sa.track('learning_click', {'click_id': 'pc_learning_digital_my_next_page_' + this.switchFlag})
      this.isShowPrevBtn = true
      if(this.switchFlag == 'recorded'){
        this.indexOfBookList +=1
        this.getBookList()
      } else if (this.indexOfBookList + this.onePageLimit <= this.totalNumOfBookList){
        this.indexOfBookList += this.onePageLimit
        this.getBookList()
      }
      if (this.indexOfBookList + this.onePageLimit >= this.totalNumOfBookList) {
        this.isShowNextBtn = false
      }
    },
    prevPage() {
      sa.track('learning_click', {'click_id': 'pc_learning_digital_my_previous_page_' + this.switchFlag})
      this.isShowNextBtn = true
      if(this.switchFlag == 'recorded'){
        this.indexOfBookList -= 1
        this.getBookList()
      } else if (this.indexOfBookList - this.onePageLimit >= 0) {
        this.indexOfBookList -= this.onePageLimit
        this.getBookList()
      }
      if (this.indexOfBookList - this.onePageLimit < 0) {
        this.isShowPrevBtn = false
      }
    },
    //用户信息
    userInfoData() {
      return axios.get('/rest/learninggw/api/pc/homepage/getStudentInfo', {
        params: {
          studentId: cookies.get("studentId")
        }
      }).then((res) => {
        if (res.data.code == 200) {
          this.userInfo = res.data.data
          this.userInfo.isShow = true
        }
      }
      )
    },
    getFavoriteBookCount() {
      //次接口只用于获取收藏图书总数
      axios.get('/rest/learninggw/api/pc/service/digitlib/getCollectionBooks', {
        params: {
          studentId: cookies.get('studentId'),
          limit: this.onePageLimit,
          start: 0
        }
      }).then((res) => {
        this.favoriteCount = res.data.data.total ? res.data.data.total : '0'
      })
    },
    showRecord(flag){
      if(flag == "finished"){
        this.isRecordFinished = "bookFinished"
      } else if(flag == "noFinished"){
        this.isRecordFinished = "bookNoFinished"
      }
      this.switchList('recorded')
    }
  }
}
</script>
<style lang="stylus" scoped>
  *
    box-sizing: border-box
    -moz-user-select: none
    -webkit-user-select: none
    -ms-user-select: none
    -khtml-user-select: none
    user-select: none
    -webkit-font-smoothing: antialiased
    font-weight: 300
    -webkit-touch-callout: none
  .bookshelf-entry-container
    position: absolute
    top: 24px
    right: 39px
    z-index: 10
    color: #ffffff
    font-family:"PingFangSC-Semibold"
    .bookshelf-entry
      background-color: rgba(0,0,0, 0.2)
      width: 110px
      height: 36px
      border-radius: 60px
      display: inline-block
      vertical-align: middle
      margin-right: 25px
      cursor: pointer
      position: relative
      box-sizing: border-box
      padding: 7px 0 0 16px
      font-size: 15px
      &:before
        content: ""
        width: 36px
        height: 36px
        position: absolute
        top: 0
        left: -24px
        background-image: url('../../../img/digireader/icon-bookshelf@2x.png')
        background-repeat: no-repeat
        background-size: 100% 100%
      &.no-borrow
        padding: 7px 0 0 36px
        cursor: not-allowed
      &.borrow-1
        &:after
          content: ''
          position: absolute
          height: 30px
          width: 40px
          border-radius: 15px
          background-color: #b396ff
          z-index: -1
          top: 3px
          left: 0
      &.borrow-2
        &:after
          content: ''
          position: absolute
          height: 30px
          width: 70px
          border-radius: 15px
          background-color: #b396ff
          z-index: -1
          top: 3px
          left: 0
      &.borrow-3
        &:after
          content: ''
          position: absolute
          height: 30px
          width: 107px
          border-radius: 15px
          background-color: #b396ff
          z-index: -1
          top: 3px
          left: 0
    .quesion-button
      background-image: url('../../../img/digireader/reader_spirit.png')
      background-size: 715px
      background-repeat: no-repeat
      width: 51px
      cursor: pointer
      height: 51px
      display: inline-block
      vertical-align: middle
      background-position: -439px -231px
      &:hover
        background-position: -494px -231px
      &:active
        background-position: -551px -232px
  .library_all_bg
    background-repeat: no-repeat
    background-position: center
    background-size: 1920px
    background-color: #624490
    width: 100%
    height: 100%
    @media screen and (max-width: 1280px)
      background-image: url('../../../img/library/bg-book-1280-1480.png')
      background-size: 1480px
    @media screen and (min-width: 1280px) and (max-width: 1480px)
      background-image: url('../../../img/library/bg-book-1280-1480.png')
      background-size: 1480px
    @media screen and (min-width: 1480px) and (max-width: 1920px)
      background-image: url('../../../img/library/bg-book-1480-1920.png')
      background-size: 1920px
    @media screen and (min-width: 1920px)
      background-image: url('../../../img/library/bg-1920.png')
      background-size: 2600px
    .edit-btn
      position: absolute
      top: 50%
      left: 50%
      width: 122px
      height: 50px
      line-height: 50px
      display: inline-block
      text-align: center
      color: white
      font-size: 20px
      background: url('../../../img/library/edit-btn.png') no-repeat
      background-size: 100% 100%
      cursor: pointer
      @media screen and (max-width: 1280px)
        margin: -333px 0 0 266px
      @media screen and (min-width: 1280px) and (max-width: 1480px)
        margin: -332px 0 0 269px
      @media screen and (min-width: 1480px) and (max-width: 1920px)
        margin: -375px 0 0 320px
      @media screen and (min-width: 1920px)
        margin: -386px 0 0 437px
    .page-operation-hd
      .next-page
        position: absolute
        top: 50%
        left: 50%
        margin: 0px 0 0 379px
        width: 78px
        height: 78px
        background: url('../../../img/library/lib_spire.png') no-repeat
        background-size: 595px
        background-position: 0 0
        cursor: pointer
        z-index:150
        &:hover
          background-position: -188px 0
        &:active
          background-position: -389px 0
        @media screen and (max-width: 1280px)
          margin: 0px 0 0 376px
        @media screen and (min-width: 1280px) and (max-width: 1480px)
          margin: 0px 0 0 376px
        @media screen and (min-width: 1480px) and (max-width: 1920px)
          margin: 0px 0 0 439px
        @media screen and (min-width: 1920px)
          margin: 0px 0 0 549px
      .prev-page
        position: absolute
        top: 50%
        left: 50%
        margin: 0px 0 0 -448px
        width: 78px
        height: 78px
        background: url('../../../img/library/lib_spire.png') no-repeat
        background-size: 595px
        background-position: -89px 0
        z-index:150
        &:hover
          background-position: -288px 0
        &:active
          background-position: -483px 0
        @media screen and (max-width: 1280px)
          margin: 0px 0 0 -449px
        @media screen and (min-width: 1280px) and (max-width: 1480px)
          margin: 0px 0 0 -449px
        @media screen and (min-width: 1480px) and (max-width: 1920px)
          margin: 0px 0 0 -518px
        @media screen and (min-width: 1920px)
          margin: 0px 0 0 -627px
    .switch-btn
      width: 300px
      height: 100px
      position: absolute
      top: 50%
      left: 65%
      background: url('../../../img/library/my-button@2x.png') no-repeat
      background-size: 100px 100%
      transition: background 0.2s
      background-position: 100px 0px
      @media screen and (max-width: 1280px)
        margin: -355px 0 0 -376px
      @media screen and (min-width: 1280px) and (max-width: 1480px)
        margin: -355px 0 0 -376px
      @media screen and (min-width: 1480px) and (max-width: 1920px)
        margin: -398px 0 0 -435px
      @media screen and (min-width: 1920px)
        margin: -413px 0 0 -525px
      &.readed
        background-position: 0 0
      &.recorded
        background-position: 100px 0px 
      &.favorites
        background-position: 200px 0px
      .btn-common
        cursor: pointer
        height: 100%
        width: 100px
        display: inline-block
        color: white
        text-align: center
        padding-top: 9px
        .title
          text-indent:18px
          font-size: 18px
          line-height:28px 
          &.readed 
             background:url('../../../img/library/dl-my-library-readed-flag.png') no-repeat
             background-position:14px 4px              
          &.recorded 
             background:url('../../../img/library/dl-my-library-recorded-flag.png') no-repeat
             background-position:14px 4px
          &.colletcted
             background:url('../../../img/library/dl-my-library-favorites-flag.png') no-repeat 
             background-position:14px 4px
        .en-title
          font-size: 12px
          line-height:17px 
        strong
          font-size: 30px
          font-weight:36px
        &.left
          background-position: 100px 0px
        &.right
          background-position: -100px 0px
        &.selected
            background-position: 0 0
    .hang-board-postion-control
      position: absolute
      top: 0
      left: 0
      right: 0
      text-align: center 
      .hang-board
        display: inline-block
        position: relative
        margin: 0 auto
        line-height: 119px
        font-size: 24px
        font-weight: 600
        color: #ffffff
        height: 119px
        width: 448px
        background-image: url('../../../img/library/top-hang.png')
        background-size: 100%
        background-size: contain
        background-repeat: no-repeat
        img
          display: inline-block
          border-radius: 50%
          width: 56px
          height: 56px
          vertical-align: middle
        p
          display: inline-block
          position: relative
          font-size: 24px
          vertical-align: middle
          margin-left: 10px
    .page-num-container
      position: absolute
      top: 50%
      left: 50%
      margin: 300px 0 0 0
      color: white
      font-size: 18px
    NOWRAP()
      width: 658px
      position: absolute
      top: 50%
      left: 48%
      height:460px 
      background:#4C3488
      z-index:100
      @media screen and (max-width: 1280px)
        width: 737px
        margin: -195px 0 0 -346px
      @media screen and (min-width: 1280px) and (max-width: 1480px)
        width: 737px
        margin: -195px 0 0 -336px
      @media screen and (min-width: 1480px) and (max-width: 1920px)
        width: 910px
        margin: -217px 0 0 -430px
      @media screen and (min-width: 1920px)
        width: 1068px
        margin: -216px 0 0 -500px
    .book-list-no-wrap
      display:flex 
      align-items:center 
      justify-content:center
      flex-wrap:wrap
      display: -webkit-flex
      -webkit-justify-content:center
      -webkit-align-items:center
      -webkit-flex-wrap:wrap
      NOWRAP()
      .empty-book 
        width:134px 
        height:163px
        background:url(../../../img/library/empty-book@2x.png) no-repeat
        background-size:134px 163px
      p.text-trips
        margin-top: -140px
        width:100%
        color:#fff
        font-size:20px 
        text-align:center
    .book-item-record-listWrap
       overflow:hidden
       NOWRAP()
    .book-list-wrap
      width: 658px
      position: absolute
      top: 50%
      left: 50%
      @media screen and (max-width: 1280px)
        width: 707px
        margin: -195px 0 0 -326px
      @media screen and (min-width: 1280px) and (max-width: 1480px)
        width: 707px
        margin: -195px 0 0 -326px
      @media screen and (min-width: 1480px) and (max-width: 1920px)
        width: 878px
        margin: -217px 0 0 -413px
      @media screen and (min-width: 1920px)
        width: 1048px
        margin: -216px 0 0 -500px
      .book-item-box
        position: relative
        display: inline-block
        margin-right: 43px
        margin-bottom: 52px
        .progress-container
          position: absolute
          width: 100%
          margin-top: 3px
          .eye-icon
            width: 20px
            height: 20px
            display: inline-block
            vertical-align: middle
            margin-right: 3px
          .progress-bg
            position: relative
            width: 64px
            height: 4px
            background-color: #6827c7
            border-radius: 99px
            display: inline-block
            vertical-align: middle
            .progress
              position: absolute
              height: 4px
              top: 0
              left: 0
              background-color: #ff6600
              border-radius: 99px
          .progress-percent
            color: #bdc5ff
            font-size: 14px
            display: inline-block
            vertical-align: middle
            margin-left: 3px
        .return-book-btn
          position: absolute
          z-index: 4
          top: -20px
          right: -20px
          background: url('../../../img/common/close-btn-sprite.png') no-repeat
          background-size: 150px 40px
          background-position: 0 0
          width: 40px
          height: 40px
          cursor: pointer
          &:hover
            background-position: -55px 0
          &:active
            background-position: -110px 0
      .book-item-box:nth-child(4n)
        // margin-right: 0
    .filter-wrap
      position: absolute
      top: 50%
      left: 50%
      width: 680px
      height: 60px
      border-radius: 100px
      background-color: #5f3fa6
      padding: 10px 41px 0 0px
      text-align: center
      @media screen and (max-width: 1280px)
        margin: -337px 0 0 -328px
      @media screen and (min-width: 1280px) and (max-width: 1480px)
        margin: -337px 0 0 -328px
      @media screen and (min-width: 1480px) and (max-width: 1920px)
        margin: -379px 0 0 -331px
      @media screen and (min-width: 1920px)
        margin: -391px 0 0 -339px
      .delete-filter-btn
        position: absolute
        top: -7px
        right: -10px
        width: 74px
        height: 74px
        background: url('../../../img/library/delete_filter_btn.png') no-repeat
        background-size: 100%
        cursor: pointer
        transition: all 150ms ease-out
        &:hover
          transform: rotate(360deg)
      .filter-item
        display: inline-block
        vertical-align: middle
        height: 42px
        text-align: left
        cursor: pointer
        &.type-width
          max-width: 176px
        &.lexile-width
          width: 120px
        &.level-width
          width: 120px
        &.preference-width
          width: 175px
        img.filter-item-icon
          width: 30px
          height: 30px
          display: inline-block
          vertical-align: middle
          margin-right: 5px
        .filter-text-box
          display: inline-block
          vertical-align: middle
          height: 100%
          .place-holder
            height: 100%
            display: inline-block
            vertical-align: middle
          p
            display: inline-block
            vertical-align: middle
            color: #fff
            &.type-width
              width: 135px
            &.lexile-width
              width: 75px
            &.level-width
              width: 75px
            &.preference-width
              width: 140px
    .user-information
      top:18px 
      left:122px 
      position:relative
      max-width: 220px
      height: 64px
      background:rgba(0,0,0,0.1996)
      border-radius: 44px
      overflow:hidden
      img 
        left:2px 
        top:2px 
        position:absolute
        width:60px 
        height:60px 
        border-radius:60px
      .user-name
        position:absolute
        left: 72px
        line-height:64px 
        height:64px
        font-size:20px 
        color:#fff
  .booke-record-button-slide
     position: absolute
     top:-62px
     left:-4px 
     width:180px 
     height:40px 
     border-radius:20px
     background:#3E2875
     cursor:pointer 
     &:hover 
       opactiy: .8
  .book-record-button-button
    position: absolute
    width:180px 
    height:40px 
    transition:background .2s ease-in
    background:url(../../../img/library/dl-library-book-reocord-slide-button.png) no-repeat 
  .bookNoFinished
    background-position-x: 0px
  .bookFinished
    background-position-x: 90px
  .book-record-button
      position:absolute
      height:40px
      width:90px
      text-indent:20px
      text-align:center
      line-height:40px
      font-size:12px 
      color:#fff
      span 
        font-size:16px
      &.book-record-no-finished
        left:0px
        background:url(../../../img/library/dl-book-no-finish-button-flag.png) no-repeat 9px 13px 
      &.book-record-have-finished
        left:90px
        background:url(../../../img/library/dl-book-have-record-button-flag.png) no-repeat 9px 13px
</style>


