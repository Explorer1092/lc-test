<template lang="jade">
  .detail_bg
    top-part(:title_cn = "title_chinese", :title_eng = "title_english", :isAbsoluteFix = "true", :gobackurl="null", :mark="'libarary_help'")
    .black-mirror(v-if="isGuideShow")
    .hang-board-postion-control
      .hang-board
        p Help
    .main-content-wrap
      .left-nav
        .item(v-for="item, index in this.data", :class="{'selected' : type == index}", @click = "switchTab(index)")
          .text {{item.name}}
      .white-board
        .content-wrap(v-for="item, index in this.data", v-show="type == index")
          img(:src="item.pictureUrl")
          .content(v-html="processFormat(item.description)")
</template>
<script>
import axios from 'axios'
import cookies from 'cookies-js'
import TopPart from '../../common/top_part.vue'
import Velocity from 'velocity-animate'
import {loadURL} from '../libarary_utils.js'
export default {
  data: function() {
    return {
      title_chinese: '',
      title_english: '',
      isGuideShow: false,
      data: null,
      type: this.$route.params.type
    }
  },
  components: {
    TopPart
  },
  mounted() {
    if (cookies.get('isFromApp')) {
      loadURL('vkappbridge://loading/stop') //停止ipad的loading界面
    }
    this.getHelpData()
  },
  methods: {
    processFormat( txt ) {
      if(!txt) return ''
      return txt.replace(/(\r\n)|(\n)/g, '<br>')
    },
    switchTab( num ) {
      sa.track('learning_click', {'click_id': 'pc_learning_digital_library_help_switch_tab_' + num})
      this.type = num
    },
    getHelpData() {
      axios.get('/rest/learninggw/api/pc/service/digitlib/getHelpMenuInfo').then((res) => {
        this.data = res.data.data
      })
    }
  }
}
</script>
<style lang="stylus" scoped>
*
  box-sizing: border-box
  -moz-user-select: none
  -webkit-user-select: none
  -ms-user-select: none
  -khtml-user-select: none
  user-select: none
  -webkit-font-smoothing: antialiased
  font-weight: 300
  -webkit-touch-callout: none
  .detail_bg
    background-repeat: no-repeat
    background-position: center
    background-size: 1920px
    background-color: #6D4C9E
    width: 100%
    height: 100%
    background-image: url('../../../img/library/bg-book-1280-1920.png')
    background-size: 1920px
    .hang-board-postion-control
      position: absolute
      top: 0
      left: 0
      right: 0
      text-align: center 
      .hang-board
        display: inline-block
        position: relative
        margin: 0 auto
        line-height: 119px
        font-size: 24px
        font-weight: 600
        color: #ffffff
        height: 119px
        width: 448px
        background-image: url('../../../img/library/top-hang.png')
        background-size: 100%
        background-size: contain
        background-repeat: no-repeat
        p
          display: inline-block
          position: relative
          font-size: 24px
          vertical-align: middle
    .main-content-wrap
      position: absolute
      top: 50%
      left: 50%
      margin: -261px 0 0 -410px
      width: 821px
      height: 571px
      .left-nav
        position: absolute
        top: 27px
        left: 20px
        font-size: 18px
        .item
          width: 200px
          height: 80px
          border-radius: 42px 0 0 42px
          box-sizing: border-box
          padding-left: 30px
          padding-right: 20px
          color: #ffffff
          display: table
          cursor: pointer
          &.selected
            background-color: white
            color: #424242
          .text
            display: table-cell
            vertical-align: middle
      .white-board
        position: absolute
        top: 27px
        left: 200px
        width: 600px
        height: 520px
        background-color: white
        border-radius: 20px 20px 20px 20px
        padding: 30px 15px 30px 30px
        .content-wrap
          width: 100%
          height: 100%
          overflow-y: auto
          padding-right: 20px
          img
            width: 100%
          .content
            margin-top: 20px
            font-size: 18px
            line-height: 26px
          &::-webkit-scrollbar
            width: 8px
            background-color: rgba(164, 135, 241, 0.2)
          &::-webkit-scrollbar-thumb
            border-radius: 999px
            background-color: #b396ff
</style>