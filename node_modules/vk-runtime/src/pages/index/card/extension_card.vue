<template lang="jade">
  //带主修拓展的卡片
  .extension-con(ref="exCon",@scroll="listScrollListener")
    .ec-btn-top(v-if="topShow",@click.stop="topClick")
      .icon-arrow-top
    .ec-btn-bottom(v-if="bottomShow",@click.stop="bottomClick")
      .icon-arrow-bottom
    .list-item(v-for="(m,index) in config.newCard.mList",class="animated fadeInRight",:style="{animationDuration:index*0.5+'s'}",@click="goToDetail(m)")
      slide-text.el-name(:class="m.readStatus?'list-item-read':''",:text="m.showName")
      .icon.icon-play(v-if="m.itemType=='video'")
      .icon.icon-eye(v-if="m.itemType=='book'")
</template>
<script>
  import Velocity from 'velocity-animate'
  import cookies from 'cookies-js'
  import untils from '../../../utils/_untils'
  import axios from 'axios'
  import {$get, $post, $all} from '../../readers/api.js'
  import bookDetail from '../../common/book_detail.vue'
  import Vue from 'vue'
  import slideText from '../../common/vk_slide_text.vue'
  import model from "../../common/plugins/Model"
  Vue.use(model)
  export default {
    data: function () {
      return {
        $exCon: null,
        bottomShow: true,
        topShow: false,
        bookDetailTpl: null
      }
    },
    props: [
      'config'
    ],
    components: {
      slideText
    },
    computed: {},
    mounted() {
      this.$exCon = this.$refs.exCon
      if (this.config.newCard.mList.length < 5) {
        this.bottomShow = false
        this.topShow = false
      }
    },
    methods: {
      goToDetail(m) {
        if (m.itemType == "video") {
          this.$router.push({path: '/major_extension/extension_video/' + m.biz_code})
        }
        if (m.itemType == "book") {
          m.router = this.$router
          m.source = untils.clickEventConst.PC_HOMEPAGE_ENTRANCE
          m.model = bookDetail
          this.$modelShow(m)
        }
      },
      listScrollListener() {
        if (this.$exCon.scrollTop == 0) {
          this.topShow = false
        } else {
          this.topShow = true
        }
        if (this.$exCon.scrollHeight - this.$exCon.scrollTop == this.$exCon.clientHeight) {
          this.bottomShow = false
        } else {
          this.bottomShow = true
        }
      },
      topClick() {
        Velocity(this.$exCon, "scroll", {
          container: this.$exCon, duration: 500, offset: -200, mobileHA: false
        })
      },
      bottomClick() {
        Velocity(this.$exCon, "scroll", {
          container: this.$exCon, duration: 500, offset: -70, mobileHA: false
        })
      }
    }

  }
</script>

<style lang="stylus" scoped>
  .extension-con
    width: 300px
    height: 320px
    margin-left: 10px
    overflow: hidden

  .ec-btn-top
    top: 105px
    border-bottom-left-radius: 30px
    border-bottom-right-radius: 30px
    .icon-arrow-top
      margin: 5px auto

  .ec-btn-bottom
    bottom: 0
    border-top-left-radius: 30px
    border-top-right-radius: 30px
    .icon-arrow-bottom
      margin: 10px auto

  .ec-btn-top, .ec-btn-bottom
    position: absolute
    height: 30px
    width: 60px
    text-align: center
    z-index: 109
    left: 120px
    background-color: rgba(232, 119, 166, 0.2)
    cursor: pointer
    &:hover
      background-color: rgba(232, 119, 166, 0.5)
    &:active
      background-color: rgba(232, 119, 166, 0.7)

  .list-item
    height: 60px
    cursor: pointer
    margin-bottom: 20px
    background: url("../../../img/icon/icon_header.png") -10px -10px
    .icon
      float: right
      height: 42px
      width: 40px
      margin-right: 28px
      margin-top: 10px
      transition: transform 0.5s
    &:hover .icon
      transform: scale(1.2, 1.2)
    .el-name
      float: left
      margin-left: 20px
      font-size: 20px
      color: #52b0b2
      line-height: 60px
      width: 200px

  .list-item-read
    opacity: 0.5


</style>
