<template lang="jade">
  //视频
  .video-content
    img.v-video(:src="config.cardType==10?projectBg:config.preImg",@error="errorImg")
    vk-btn.video-btn(:type="'lg-' + backButtonState[config.viewButton]",:text="config.viewButtonText",:clickFun="clickVideo")
</template>
<script>
  import Vue from 'vue'
  import vkBtn from "../../common/vk_button.vue"
  var noImg = require("../../../img/index/pre_bg.png")
  var projectBg = require("../../../img/index/project_bg.png")
  import videoModel from '../../common/plugins/VideoModel'
  Vue.use(videoModel)
  export default {
    data: function () {
      return {
        projectBg: projectBg,
        videoConfig: {
          videoSrc: "",
          autoPlay: true,
          materialId: "1",
          source: "",
          title: "指导视频"
        },
        //HIDE(0,"不显示"),
        //LOCK(1,"不可用"),
        //UNLOCK(2, "可用"),
        //FINISH_UNLOCK(3, "完成并继续可用"),
        //FINISH_LOCK(4, "完成但不可用");
        backButtonState: ['hide', 'disable', 'enable', 'enable', 'disable']
      }
    },
    components: {
      vkBtn
    },
    props: [
      'config'
    ],
    computed: {},
    created () {
      this.videoConfig.videoSrc = this.config.url
      if (this.config.cardType == 7) {
        this.videoConfig.source = "kid_guide_video"
      }
      if (this.config.cardType == 8) {
        this.videoConfig.source = "parent_guide_video"
      }
      if (this.config.cardType == 10) {
        this.config.viewButton = 2
        this.config.viewButtonText = "查看"
      }
      this.videoConfig.title = this.config.name
    },
    methods: {
      clickVideo() {
        if (this.config.cardType == 10) {
          sa.track('learning_click', {
            'click_id': 'pc_learning_homepage_project_demo'
          })
          this.$router.push(`/video/project/${this.config.unitId}`)
          return
        }
        this.$videoModelShow(this.videoConfig)
      },
      errorImg(e){
        e.target.src = noImg
      }
    }
  }
</script>

<style lang="stylus" scoped>
  .video-content
    text-align: center
    padding-top: 60px

  .v-video
    height: 127px
    width: 180px
    border-radius: 20px
    border: solid #ff5c01 5px
    margin: 0 auto

  .video-btn
    margin: 30px auto

</style>
