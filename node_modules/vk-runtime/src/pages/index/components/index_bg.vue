<template lang="jade">
  .index-bg
    .bg-galaxy
      //.bg-galaxy-1(ref="galaxy1")
      //.bg-galaxy-2(ref="galaxy2")
    .bg-star
    .bg-falling-star.bg-falling-star-1
    .bg-falling-star.bg-falling-star-2
    .bg-falling-star.bg-falling-star-3
    .my-gift
      template(v-for="airCraft in airCrafts")
        img.air-img(:src="airCraft.picName")
</template>
<script>
  import cookies from 'cookies-js'
  import axios from 'axios'
  import Velocity from 'velocity-animate'
  export default {
    data: function () {
      return {
        airCrafts: [],
        galaxy1: null,
        galaxy2: null
      }
    },
    components: {},
    computed: {},
    mounted () {
      this.initAircraft()
      //关闭背景动画
      //this.initGalaxy()
      //setInterval(() => {
      //this.initGalaxy()
      //}, 200500)
    },
    methods: {
      initGalaxy(){
        let width = (this.$refs.galaxy1.clientHeight / 768) * 2810
        this.$refs.galaxy1.style.width = width + "px"
        this.$refs.galaxy2.style.width = width + "px"
        this.$refs.galaxy2.style.left = width + "px"
        Velocity(this.$refs.galaxy1, {
          left: -width + "px"
        }, {
          duration: 100000,
          easing: "linear",
          complete: () => {
            this.$refs.galaxy1.style.left = width + "px"
            Velocity(this.$refs.galaxy1, {
              left: "0px"
            }, {
              duration: 100000,
              easing: "linear",
              complete: () => {
                this.$refs.galaxy1.style.left = "0px"
              }
            })
          }
        })

        Velocity(this.$refs.galaxy2, {
          left: "0px"
        }, {
          duration: 100000,
          easing: "linear",
          complete: () => {
            Velocity(this.$refs.galaxy2, {
              left: -width + "px"
            }, {
              duration: 100000,
              easing: "linear",
              complete: () => {
                this.$refs.galaxy2.style.left = width + "px"
              }
            })
          }
        })
      },
      //获取飞船
      initAircraft(){
        return axios.get('/rest/learninggw/api/pc/service/aircraft/findPage?current=1', {
          params: {
            studentId: cookies.get("studentId")
          }
        }).then((res) => {
          if (res.data.code == 200) {
            this.aircrafts = res.data.data
          }
        }
        ).catch((error) => {
        })
      }
    }
  }
</script>

<style lang="stylus" scoped>

  .index-bg
    position: fixed
    top: 0
    bottom: 0
    right: 0
    left: 0
    z-index: 1
    overflow: hidden

  .bg-galaxy
    position: absolute
    top: 0
    left: 0
    bottom: 0
    right: 0
    z-index: 2
    background: url("../../../img/index/bg/home_bg_stars.svg") no-repeat
    background-size: auto 100%

  .bg-galaxy-1
    position: absolute
    top: 0
    left: 0
    height: 100%
    background: url("../../../img/index/bg/home_bg_stars.svg") no-repeat
    background-size: auto 100%

  .bg-galaxy-2
    position: absolute
    top: 0
    height: 100%
    background: url("../../../img/index/bg/home_bg_stars.svg") no-repeat
    background-size: auto 100%

  .bg-star
    position: absolute
    top: 50px
    left: 0
    bottom: 0
    right: 0
    z-index: 3
    background: url("../../../img/index/bg/bg_star.png") no-repeat
    background-size: 150%
    animation: starFlash 5s infinite

  .bg-falling-star
    position: absolute
    width: 150px
    height: 100px
    right: -200px
    background: url("../../../img/index/bg/fallingstar.png") top no-repeat
    background-size: 100%

  .bg-falling-star-1
    animation: starFalling1 4s 3s ease infinite

  .bg-falling-star-2
    animation: starFalling2 4s 5s ease infinite

  .bg-falling-star-3
    animation: starFalling3 4s 7s ease infinite

  .circle-1
    position: absolute
    right: 0
    top: 0
    width: 500px

  .star-18
    position: absolute
    right: 0
    top: 0

  .air-img
    height: 20px

  @keyframes starFalling1
    from
      left: 80%
      top: 5%
      opacity: 1
    to
      left: 0%
      top: 50%
      opacity: 0

  @keyframes starFalling2
    from
      left: 90%
      top: 5%
      opacity: 1
    to
      left: 0%
      top: 50%
      opacity: 0

  @keyframes starFalling3
    from
      left: 100%
      top: 5%
      opacity: 1
    to
      left: 5%
      top: 50%
      opacity: 0

  @keyframes starFlash
    0%
      opacity: 1
    50%
      opacity: 0.1
    100%
      opacity: 1


</style>
