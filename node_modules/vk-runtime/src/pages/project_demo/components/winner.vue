<template lang="jade">
.dialog-mask
    .dialog
      .light
        .text
          |恭喜
          span {{name}}
          |宝贝获得
          span {{msg}}
        .model
          img(v-if="awardsImage", :src="awardsImage")
          img(v-else-if="excellent",src="../../../img/project_demo/winner4.png")
          img(v-else-if="popular",src="../../../img/project_demo/winner3.png")
          img(v-else-if="!excellent&&!popular",src="../../../img/project_demo/default_big.png")
</template>
<script>
  import cookies from 'cookies-js'
  export default {
    data() {
      return {
        excellent: false,
        popular: false,
        msg: null,
        name: cookies.get('userName')
      }
    },
    props: {
      'type': {
        type: String,
        default: ''
      },
      'awardsImage': {
        type: String,
        default: ''
      }
    },
    components: {
    },
    mounted() {
      let msg = this.type.split('恭喜宝贝')
      this.msg = msg[1]
      if (!this.name) {
        this.getStudentName()
      }
      if (this.type.indexOf('优秀') > -1) {
        this.excellent = true
      }
      if (this.type.indexOf('人气') > -1) {
        this.popular = true
      }
    },
    methods: {
      buttonClick(key){
        this.$playSound("click")
        this.$emit("dialogClick", key)
      },
      getStudentName(){
        axios.get(`/rest/activity/api/activity/user/activity/getStudentByStudentId`)
          .then((res) => {
            this.name = res.data.data.englishName
          })
          .catch((err) => {
          })
      }
    }
  }
</script>
<style lang="stylus" scoped>
  .dialog-mask
    width: 100%
    height: 100%
    position: absolute
    top: 0
    left: 0
    background: rgba(0,0,0,0.7)
    z-index: 12
    font-family: PingFangSC
    color: #fff
    .dialog
      display: inline-block
      width: 760px
      height: 600px
      position: absolute
      top: 50%
      left: 50%
      transform: translate(-50%,-50%)
      -webkit-transform: translate(-50%, -50%)
      background: url('../../../img/project_demo/winner1.png')
      background-size: 100% 100%
      border-radius: 20px
      text-align: center
      .light
      	width: 550px
      	height: 560px
      	display: inline-block
      	background: url('../../../img/project_demo/winner2.png')
      	background-size: 100% 100%
      	.text
      		width: 300px
      		display: inline-block
      		font-size: 20px
      		font-weight: 700
      		margin-top: 100px
      	.model
      		margin-top: 20px
      		img
      			width: 200px
      			height: 266px
</style>
