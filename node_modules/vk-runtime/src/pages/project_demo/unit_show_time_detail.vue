<template lang="jade">
  transition(name="extension",enter-active-class="animated fadeInRight",leave-active-class="animated fadeOutRight")
    .unit-show-time-main
      //- 列表滚动时的遮罩层
      .list-scrolling-mask(v-if="isListScrolling")
      .back-plants
        .plant-1
        .plant-2
        .plant-3
        .plant-4
        .plant-5
        .plant-6
      pd-back(:title_cn="title",:title_eng="titleEn")
      router-link.all-unit(tag="div",to="/unit_show_time/level2" replace @click="onClickAllWork")
        .icon.icon-tv
        span 全部作品
      .unit-activity-container(v-if="detail", ref="unitActivityContainer", @scroll="onScroll")
        .big-tv(v-if="activityData")
          .unit-tv-antenna
          .unit-tv-screen
            .unit-media
              ust-video-play(:playData="playData",:voteData="voteData",videoSize="big",class="unit-media", :trackData="trackData")
          .unit-tv-title
            span {{unlockStatus==0?'个人作品':'教学视频'}}
          .unit-tv-bottom
            .record-btn(:class="[{'re-upload':(unlockStatus==0)}]",@click="onClickRecordBtn") {{(unlockStatus==0)?'重新录制':'开始录制'}}
            .teach-video(v-if="unlockStatus==0",@click="onClickTeachVideo")
              //- video.teacher-video(:src="activityData.demoVideo",:poster="activityData.coverImage",ref="teachVideo")
              .play-btn
              span 教学视频
            .share-wrap(v-if="unlockStatus==0")
              .rope
              .share(@click="shareDialog")

        .pd-detail-video(ref="pd_detail_video",:class="{'active':showBox}",@mousewheel.stop="userSrollDown($event, 'pd-detail-video')", @DOMMouseScroll.stop="userSrollDown($event, 'pd-detail-video')",@click="openVideo($event)")
          .pd-detail-bottom
            video-box(v-if="boxType && boxType === 'video'",ustType="ust",ref="video_box",:show="showBox",:status="detail.activityStudentResource",:firstPartitionId="firstPartitionId",:isCanScroll="isVideoBoxCanScroll",@vote="onVote",:trackData="trackData")
            rank-box(v-if="boxType && boxType === 'rank'",ref="video_box",:show="showBox")

        //- .null(v-if="!unitList.length")
        //-   .dino
        //-     .dino-null
        //-     .text 这里还什么都没有
      dialog-box(v-show="showDialog",@dialogClick="dialogClick",:title="dialogTitle",:tips="dialogTips",:type="dialogType",:url="shareUrl",class="animated fadeIn")
      loading(v-show="loading")
      .net-mask(v-show="netError")
        net-error(@errorReload="errorReload")
</template>
<script>
  import axios from 'axios'
  import pdBack from './components/pd_back.vue'
  import videoBox from './components/video_box.vue'
  import ustVideoPlay from './components/ust_video_play.vue'
  import dialogBox from './components/dialog.vue'
  import rankBox from './components/rank_box.vue'
  import Function from './js/function.js'
  import VideoFunc from './js/video.js'
  import cookies from 'cookies-js'
  import loading from '../common/vk_loading.vue'
  import netError from './components/net_error.vue'
  export default {
    mixins: [Function.index(), VideoFunc.index()],
    data(){
      return {
        level: '2',
        isListScrolling: true,
        detail: null,
        activityData: null,
        unlockStatus: parseInt(this.$route.query.unlockStatus),
        boxType: 'video',
        pds: [2,3,1,2,3,1],
        index: 2,
        timer1: null,
        timer2: null,
        timer3: null,
        isAtLeftEnd: true,
        isAtRightEnd: true,
        onScrolling: false,
        hasDuration: true,
        scrollLenght: 570,
        imgSrc: "https://media.vipkidstatic.com/homework/image/grow_c5fcab32-8ac6-44ba-b67d-77e7d2290e371526561151989.png",
        activityStatus: 1,// 0未开始，1进行中，-1，已结束
        showDialog: false,
        startClientY: 0,
        endClientY: 0,
        dialogType: '',
        dialogTitle: '',
        dialogTips: '',
        shareUrl: '',
        nextScroll: true,
        timestamp :  new Date().getTime(),
        _pds: null,
        __pds: null,
        activityArr: [],
        scrollLeft: '',
        paddingFlag: false,
        screenWidth: document.body.clientWidth,
        startTranslateX: '',
        startScroll: '',
        showBox: false,
        isVideoBoxCanScroll: false,
        loading: true,
        netError: false,
        host: 'https://a15-mobile.vipkid.com.cn',
        voteData: {
          resourceId: -1,
          count: 0
        },
        trackData: {
          clickId: 'pc_learning-effect_ust_UnitShowTimeDetail'
        }
      }
    },
    computed: {
      title() {
        if (this.activityData) {
          return this.activityData.levelName + ' ' + this.activityData.unitName
        }
        return ''
      },
      titleEn() {
        if (this.activityData) {
          return this.activityData.name
        }
        return ''
      },
      firstPartitionId() {
        const activityData = this.activityData
        if (activityData && activityData.partitionModelList && activityData.partitionModelList[0]) {
          return activityData.partitionModelList[0].id
        }
        return -1
      },
      playData() {
        this.activityData.unlockStatus = this.$route.query.unlockStatus
        return this.activityData
      }
    },
    components: {
      pdBack,
      videoBox,
      ustVideoPlay,
      // awardBox,
      dialogBox,
      rankBox,
      loading,
      netError
    },
    created(){
    },
    mounted() {
      let host = window.location.host
      let index = host.search('lc.vipkid.com.cn')
      if (index !== -1) {
        if (index === 0) {
          this.host = 'https://mobile.vipkid.com.cn'
        }else{
          if (host.search('pre') > -1) {
            this.host = 'https://pre-mobile.vipkid.com.cn'
          }else{
            this.host = 'https://a15-mobile.vipkid.com.cn'
          }
        }
      }
      console.log('进入unit详情页', window.location.href)
      window.onresize = () => {
        return (() => {
          window.screenWidth = document.body.clientWidth
          this.screenWidth = window.screenWidth
        })()
      }

      if (document.body.offsetWidth>1480) {
        this.paddingFlag = true
      }

      this.timestamp = new Date().getTime()
      // 获取大赛广场信息
      this.getUstActivityDetailData(result => {
        if (result) {
          this.loading = false
        }
        if (result.data.code !== -1) {
          this.activityData = result.data.data
        }
      })
      this.initVideoBox()
    },
    updated(){
      // document.getElementsByTagName('body')[0].style.minWidth =  0
    },
    destroy(){
      // 统计当前页面停留时长
      sa.track('learning_click', {
        'click_id': 'pc_learning-effect_ust_UnitShowTimeDetail_duration',
        'duration': (((new Date()).getTime()) - this.timestamp)
      })
    },
    watch: {
      screenWidth (val) {
        if (!this.timer) {
          this.screenWidth = val
          this.timer = true
          setTimeout(()=> {
            if (this.screenWidth > 1480) {
              this.paddingFlag = true
            }else{
              this.paddingFlag = false
            }
            this.translateInit()
            this.timer = false
          }, 400)
        }
      }
    },
    methods: {
      errorReload(){
        this.$playSound("click")
        setTimeout(()=> {
          window.location.reload()
        },500)
      },
      getUstActivityDetailData(callback){
        axios.get(`/rest/activity/api/activity/user/activity/getUstActivity`,{
          params: {
            activityId: this.$route.params.pdId,
            unlockStatus: this.$route.query.unlockStatus
          }
        })
          .then((res) => {
            callback(res)
          })
          .catch((res) => {
            // this.netError = true
            // this.loading = false
          })
      },
      initVideoBox(){
        this.getDetailByPid(this.$route.params.pdId, resp => {
          this.loading =false
          let result = resp.data
          if (result.code == 100022) {
            this.netError = true
            this.errorMsg = result.msg
          } else {
            this.detail = result.data
            this.activityName = result.data.name
            this.activityTheme = result.data.theme
            this.activityType = result.data.activityType
            // 当大赛结束后展示排行榜
            // if (this.detail.activityStudentResource === 3) {
            //   this.boxType = 'rank'
            // } else {
            //   this.boxType = 'video'
            // }
          }
        })
      },
      getDetailByPid(activityId,callback) {
        axios.get(`/rest/activity/api/activity/user/activity/getActivityDetailByActivityId/${activityId}`)
          .then((res) => {
            callback(res)
          })
          .catch((res) => {
            this.netError = true
            this.loading = false
            callback(res)
          })
      },
      onClickAllWork(){
        sa.track('learning_click', {
          'click_id': 'pc_learning-effect_ust_UnitShowTimeDetail_allMyWork'
        })
      },
      onScroll(evt){
        this.judeVideoCanScroll()
      },
      clickScroll(){
      },
      goScroll(){
        this.userSrollDown()
      },
      // 判断视频区域是否可以滚动
      judeVideoCanScroll(){
        // 当页面滑动到底部的时候，视频区域才可以进行滑动
        this.showBox = this.isScrolledBottom(this.$refs['unitActivityContainer'])
        // console.log(this.showBox)
      },
      // 判断元素是否滚动到底部
      isScrolledBottom(o){
        //visible height + pixel scrolled = total height
        // console.log(o.offsetHeight,o.scrollTop,o.scrollHeight)
        // console.log(o.offsetHeight+o.scrollTop,o.scrollHeight)
        return (o.offsetHeight + o.scrollTop + 41 >= o.scrollHeight)
      },
      // userSrollDown() {
      //   this.judeVideoCanScroll()
      // },
      // userSrollDown(evt, flag) {
      //   if (evt.wheelDelta) { //判断浏览器IE，谷歌滑轮事件
      //     if (flag === 'pd-detail-video') {
      //       if (evt.wheelDelta > 0) {
      //         if (evt.target.className !== 'video-box' && evt.target.className !== 'pd-detail-bottom') {
      //           let ele = document.getElementsByClassName('pd-detail-thumb')[0]
      //           if (ele.scrollTop == 0 && evt.wheelDelta > 100) {
      //             this.showBox = false
      //           }
      //         } else {
      //           this.showBox = false
      //         }
      //       } else {
      //         this.showBox = true
      //       }
      //     } else {
      //       evt.wheelDelta > 0 ? this.showBox = false : this.showBox = true
      //     }
      //   } else if (evt.detail) { //Firefox滑轮事件
      //     if (flag === 'pd-detail-video') {
      //       if (evt.delta > 0) {
      //         if (evt.target.className !== 'video-box' && evt.target.className !== 'pd-detail-bottom') {
      //           let ele = document.getElementsByClassName('pd-detail-thumb')[0]
      //           if (ele.scrollTop == 0 && evt.delta > 100) {
      //             this.showBox = false
      //           }
      //         } else {
      //           this.showBox = false
      //         }
      //       } else {
      //         this.showBox = true
      //       }
      //     } else {
      //       evt.delta > 0 ? this.showBox = false : this.showBox = true
      //     }
      //   }

      // },
      openVideo(e) {
        if (!this.showBox && (e.target.className == 'video-box') || (e.target.className == 'pd-detail-label')) {
          this.showBox = true
        }else if(this.showBox && (e.target.className == 'video-box') || (e.target.className == 'pd-detail-label')){
          this.showBox = false
        }
      },
      onClickPlayBtn(){
        const unlockStatus = this.unlockStatus
        if (unlockStatus == '2') {
          Vm.$showToast('完成unit' + this.activityData.unitName + '学习才可以录制哦！')
        } else {
          this.fullscreenPlay(this.$refs['tv'])
        }
      },
      onClickRecordBtn(){

        if (this.unlockStatus === 0) {
          sa.track('learning_click', {
            'click_id': 'pc_learning-effect_ust_UnitShowTimeDetail_reRecording'
          })
          this.revokeDialog()
        } else {
          sa.track('learning_click', {
            'click_id': 'pc_learning-effect_ust_UnitShowTimeDetail_startRecord'
          })
          this.gotoRecord()
        }
      },
      // 去录制
      gotoRecord(){
        // 去录制
        // this.$router.push({path: `/unit_show_time/level2/${this.$route.params.pdId}/upload/user_shoot?activityType=${this.activityData.activityType}&unlockStatus=${this.$route.query.unlockStatus}&resourceId=${this.activityData.resourceId}`})
        if (cookies.get('isFromApp')) {
          // ipad逻辑
          let type = 0 // @type   0:客户端提示用户“拍照”还是“相册”, 1:直接拍照, 2:直接从相册中选择
          let _ua = navigator.userAgent
          // "Mozilla/5.0 (iPad; CPU OS 11_3 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E302 vkhybrid/2.1.4 app_kid/2.15.0 ios/11.3.1 devicemodel/iPad4,5 osversion/11.3.1 study-app/2.15.0 --ipad" = $2
          let deviceRegex = /devicemodel\/iPad\d+(\,\d+)*/g // 设备版本, 匹配目标示例: devicemodel/iPad7,5
          let appVersionRegex = /study-app\/\d+(\.\d+)*/g // app版本, 匹配目标示例: study-app/2.13.4
          let osVersionRegex = /osversion\/\d+(\.\d+)*/g // 系统版本, 匹配目标示例: osversion/11.3.1
          let versionNumberArray = _ua.match(appVersionRegex)[0].split('/')[1].split('.') // 把UA中的版本号取出来. 格式示例: ["2", "13", "4"]
          let osVersionNumberArray = _ua.match(osVersionRegex)?_ua.match(osVersionRegex)[0].split('/')[1].split('.'):[0,0,0]
          let isOldFasionDevice = false
          let isOldOsVersion = false
          let isOldAppVersion = false
          let toastStr = ''
          if (_ua.match(deviceRegex) && _ua.match(deviceRegex)[0].match(/\d+/) == 2 || !_ua.match(deviceRegex)) {
            //设备版本如果是2 或者 取不到设备号，就属于低端机，不让走拍摄模式，只能从相册选择视频。
            isOldFasionDevice = true
            toastStr = '该型号暂不支持拍摄功能'
          }
          if (osVersionNumberArray[0] < 9 && osVersionNumberArray[1] < 3 && osVersionNumberArray[2] < 5) {
            isOldOsVersion = true
            toastStr = '该系统版本暂不支持拍摄功能'
          }
          if (versionNumberArray[0] < 2 && versionNumberArray[1] < 15) {
            isOldAppVersion = true
            // TODO 这里应该尝试引导用户下载最新版APP
            toastStr = '请安装最新版的APP'
          }
          console.log('app版本', versionNumberArray)
          console.log('Ipad设备版本', _ua.match(deviceRegex) && _ua.match(deviceRegex)[0].match(/\d+/))
          console.log('系统版本', osVersionNumberArray)
          if (!isOldFasionDevice && !isOldOsVersion && !isOldAppVersion) {
            // APP版本高于2.14 且不为低端机型 则走用户拍摄模式
            // this.$router.push({path: `/video_upload/${this.$route.params.pdId}/user_shoot?activityType=${this.detail.activityType}`})
            this.$router.push({path: `/unit_show_time/level2/${this.$route.params.pdId}/upload/user_shoot?activityType=${this.activityData.activityType}&unlockStatus=${this.unlockStatus}&resourceId=${this.activityData.resourceId}&partitionId=${this.firstPartitionId}`})
          } else {
            // this.$router.push({path: `/work_wall/upload/${this.$route.params.pdId}/${this.activityData.activityType}`})
            this.$showToast(toastStr)
          }
        } else {
          // this.$router.push({path: `/work_wall/upload/${this.$route.params.pdId}/${this.activityData.activityType}`})
          this.$showToast('请使用ipad进行拍摄！')
        }
      },
      onClickTeachVideo(){
        // 点击教学视频
        // this.fullscreenPlay(this.$refs['teachVideo'])
        sa.track('learning_click', {
          'click_id': 'pc_learning-effect_ust_UnitShowTimeDetail_teachingVideo'
        })
        this.$router.push(`/unit_show_time/level2/${this.$route.params.pdId}/teaching_video?unlockStatus=${this.$route.query.unlockStatus}`)
      },
      revokeDialog(){
        this.$playSound("click")
        sa.track('learning_click', {'click_id': 'pc_learning_activity_competitionArena_competition_mySubmission_recalled'})
        // if(document.getElementsByClassName('video-player').length){
        //  document.getElementsByClassName('video-player')[0].pause()
        // }
        this.dialogType = 'normal'
        this.showDialog = true
        this.dialogTitle = '提示'
        this.dialogTips = '重录将获取赞数清零！'
      },
      shareDialog(){
        // if(this.work.status != 2){
        //   return
        // }
        this.$playSound("click")
        let activityId = this.$route.params.pdId
        let partitionId = this.firstPartitionId
        sa.track('learning_click', {'click_id': 'pc_learning-effect_ust_UnitShowTimeDetail_share'})
        // if(document.getElementsByClassName('video-player').length){
        //  document.getElementsByClassName('video-player')[0].pause()
        // }
        this.dialogType = 'share'
        this.showDialog = true
        this.dialogTitle = '宝贝作品专属二维码'
        this.dialogTips = '微信分享作品，为自己拉票哦！'
        //此处用活动类型 activityType 但是修改比较大 作品接口中没有返回活动类型 判断更好，此处直接写上线上地址
        if (activityId == 65) {
          this.shareUrl = `https://activity.vipkid.com.cn/activity/pdShare?activityId=${activityId}&resourceId=${this.$route.params.videoId}&parentId=${cookies.get("parentId")}`
        } else if (activityId == 66) {
          this.shareUrl = `https://activity.vipkid.com.cn/activity/pdPetShare?activityId=${activityId}&resourceId=${this.$route.params.videoId}&parentId=${cookies.get("parentId")}`
        } else {
          this.shareUrl = `${this.host}/learning-effect/prd/ust-video-info?resourceId=${this.activityData.resourceId}&activityId=${activityId}&partitionId=${partitionId}`
        }
      },
      dialogClick(key){
        if (key === 'cancel') {
          this.showDialog = false
        } else if (key === 'confirm') {
          sa.track('learning_click', {'click_id': 'pc_learning_activity_competitionArena_competition_mySubmission_recalled_confirm'})
          this.gotoRecord()
        }
      },
      touchStart(e){
        this.startClientY = e.touches[0].clientY
      },
      touchMove(e){
        this.endClientY = e.touches[0].clientY
      },
      touchEnd(e){
        if (parseInt(this.endClientY - this.startClientY) < -50 && this.endClientY !== 0) {
          this.showBox = true
        }

        if (this.endClientY - this.startClientY > 100 && this.endClientY !== 0) {
          let ele = document.getElementsByClassName('pd-detail-thumb')[0]
          if (ele.scrollTop == 0) {
            this.showBox = false
          }
        }
        this.endClientY = 0
        this.startClientY = 0
      },
      // 当视频发生点赞
      onVote(data){
        Object.assign(this.voteData, data)
      },
      // unit 首字母大写
      uppercaseFirstLetter(str){
        if (typeof str !== 'string' || !str.length) {
          return ''
        }
        return str.substr(0,1).toLocaleUpperCase() + str.substr(1)
      }
    }
  }
</script>

<style lang="stylus" scoped>
@import './css/ust.styl'
  *
    box-sizing: border-box
    -moz-user-select: none
    -webkit-user-select: none
    -ms-user-select: none
    -khtml-user-select: none
    user-select: none
    -webkit-font-smoothing: antialiased
  .unit-show-time-main
    background:linear-gradient(180deg,rgba(53,0,133,1) 0%,rgba(86,52,162,1) 100%)
    color: #fff
    text-align: center
  .back-plants
    position: fixed
    top: 0
    left: 0
    width: 100%
    height: 100%
    .plant-1
      position: absolute
      top: 540px
      left: 588px
      width: 50px
      height: 49px
      background: url("../../img/project_demo/unit_show_time/An asteroid@2x.png") no-repeat
      background-size: 49px
    .plant-2
      position: absolute
      top: 77px
      left: 127px
      width: 92px
      height: 90px
      background: url("../../img/project_demo/unit_show_time/An asteroid@2x.png") no-repeat
      background-size: 92px
    .plant-3
      position: absolute
      top: 510px
      right: 40px
      width: 80px
      height: 79px
      background: url("../../img/project_demo/unit_show_time/Planets in@2x.png") no-repeat
      background-size: 80px
    .plant-4
      position: absolute
      top: 102px
      right: -80px
      width: 300px
      height: 250px
      background: url("../../img/project_demo/unit_show_time/planets@2x.png") no-repeat
      background-size: 300px
    .plant-5
      position: absolute
      top: 456px
      left: -100px
      width: 300px
      height: 250px
      background: url("../../img/project_demo/unit_show_time/planets@2x.png") no-repeat
      background-size: 300px
    .plant-6
      position: absolute
      top: 0
      left: 50%
      margin-left: -300px
      width: 600px
      height: 169px
      background: url("../../img/project_demo/unit_show_time/Semicircle background@2x.png") no-repeat
      background-size: 600px
      -webkit-filter: blur(7px)
      -moz-filter: blur(7px)
      -o-filter: blur(7px)
      -ms-filter: blur(7px)
      filter: blur(7px)
  .all-unit
    position: fixed
    z-index: 10
    top: 24px
    right: 24px
    width: 159px
    height: 52px
    border-radius: 26px
    border: 6px solid #a687ea
    background-color: #2c026c
    ust-btn 26px
    .icon
    .icon-tv
      display: inline-block
      vertical-align: middle
      width: 32px
      height: 33px
      margin-left: 1px
      background: url("../../img/project_demo/unit_show_time/All the work@2x.png")
      background-size: 32px
    span
      font-size: 18px
      line-height: 40px
      margin-left: 10px
      vertical-align: middle

  .unit-activity-container
    width: 100%
    height: calc(100% - 122px)
    margin-top: 122px
    text-align: center
    position: absolute
    top: 0
    left: 0
    overflow: auto
    -webkit-overflow-scrolling: touch; /* ios5+ */
    &::-webkit-scrollbar
      display: none
    // transform: translate(-50%, -50%)
    // -webkit-transform: translate(-50%, -50%)
    .big-tv
      width: 610px
      margin: 0 auto
      position: relative
      .unit-tv-antenna
        width: 237px
        height: 49px
        margin: 0 auto
        margin-bottom: -20px
        background: url("../../img/project_demo/unit_show_time/Antenna big@2x.png") no-repeat
        background-size: 237px
      .unit-tv-title
        position: absolute
        z-index: 2
        top: 10px
        left: 50%
        margin-left: -100px
        width: 200px
        height: 50px
        text-align: center
        background: rgba(160,89,197,1)
        box-shadow: -6px -6px 0px 0px rgba(141,65,182,1) inset
        border-radius: 27px
        border: 5px solid #B077CE
        -webkit-transform: translateZ(0)
        -moz-transform: translateZ(0)
        transform: translateZ(0)
        span
          line-height: 43px
          font-family:PingFangSC-Semibold
          font-size: 20px
          font-weight: 600
      .unit-tv-screen
        width: 100%
        height: auto
        border: 8px solid #A687EA
        border-radius: 36px
        // background:rgba(217,217,217,1);
        overflow: hidden
        -webkit-transform: translateZ(0)
        -moz-transform: translateZ(0)
        transform: translateZ(0)
        .unit-media
          position: relative
          width: 100%
          height: auto
          .unit-video
            width: 100%
            height: auto
          .video-play-cover
            position: absolute
            top: 0
            left: 0
            width: 100%
            height: 100%
            .unit-cover-img
              width: 100%
              height: 100%
            .play-btn
              position: absolute
              top: 50%
              left: 50%
              width: 57px
              height: 57px
              transform: translate(-50%, -50%)
              -webkit-transform: translate(-50%, -50%)
              background-image: url("../../img/project_demo/unit_show_time/Playing small@2x.png")
              background-repeat: no-repeat
              background-size: 57px
              &.locked
                background-image: url("../../img/project_demo/unit_show_time/lock@2x.png")
          .unit-vote
            position: absolute
            z-index: 2;
            right: 15px;
            bottom: 10px;
            width: 68px
            height: 26px
            text-align: center
            border-radius: 13px
            font-size: 14px
            font-weight: 600
            line-height: 26px
            background: rgba(0,0,0,0.4)
      .unit-tv-bottom
        position: relative
        height: 67px
        z-index: 2
        padding-top: 1px
        .record-btn
          position: absolute
          width: 227px
          height: 70px
          top: -35px
          left: 50%
          margin-left: -113.5px
          text-align: center
          line-height: 60px
          font-size: 23px
          font-weight: bold
          color:rgba(255,255,255,1);
          background-repeat: no-repeat
          background-size: 227px
          background-image: url("../../img/project_demo/unit_show_time/The recording@2x.png")
          -webkit-transform: translateZ(0)
          -moz-transform: translateZ(0)
          transform: translateZ(0)
          ust-btn 35px
        .teach-video
          position: relative
          width: 147px
          height: 56px
          margin-top: 10px
          line-height: 56px
          background: url("../../img/project_demo/unit_show_time/The teaching video@2x.png") no-repeat
          background-size: 147px
          ust-btn 10px
          video
            width: 0
          .play-btn
            display: inline-block
            vertical-align: middle
            width: 35px
            height: 35px
            // margin-left: 19px
            background-image: url("../../img/project_demo/unit_show_time/Playing small@2x.png")
            background-repeat: no-repeat
            background-size: 35px
          span
            display: inline-block
            vertical-align: middle
            margin-left: 3px
            font-size: 18px
            font-weight: 600
        .share-wrap
          position: absolute
          right: 27px
          top: 0
          .rope
            position: absolute
            top: -2px
            left: 50%
            transform: translate(-50%, 0)
            -webkit-transform: translate(-50%, 0)
            width: 6px;
            height: 13px;
            background-color: #A687EA
          .share
            position: absolute
            left: 50%
            top: 8px
            transform: translate(-50%, 0)
            -webkit-transform: translate(-50%, 0)
            width: 40px
            height: 40px
            background: url("../../img/project_demo/workwall2.png") no-repeat
            background-position: -40px 0
            background-size: 107px
            cursor: pointer
            z-index: 11
            &.unshare
              background: url("../../img/project_demo/workwall2.png") no-repeat
              background-position: 0 -116px
              background-size: 107px
            &:after
              content:" "
              display: inline-block
              width: 40px
              height: 40px
              border-radius: 20px
              display: none
            &:hover
              &:after
                background: rgba(255,255,255,0.3)
                display: inline-block
            &:active
              &:after
                background: rgba(0,0,0,0.3)
                display: inline-block
    .pd-detail-video
      width: 1024px;
      height: calc(100% - 122px);
      display: inline-block;
      margin-top: 36px
      &.active
        top: 122px
      @media only screen and (min-width: 1500px)
        width: 1352px
      .pd-detail-bottom
        background: #A687EA
        height: auto
        border-radius: 30px 30px 0 0
  .null
    width: 100%
    height: 100%
    position: absolute
    top: 0
    .dino
      width: 300px
      height: 300px
      margin: 0 auto
      position: absolute
      top: 50%
      left: 50%
      transform: translate(-50%,-50%)
      .dino-null
        width: 300px
        height: 300px
        background: transparent url("../../img/project_demo/null.png") no-repeat
        background-size: 100% 100%
      .text
        font-size: 24px
        margin-top: 50px
        text-align: center
        color: #fff
  .net-mask
    width: 100%
    height: 100%
    position: absolute
    top: 0
    left: 0
    background: rgba(0,0,0,0.6)
  .pd-container
    height: 100%
    width: 100%
    overflow: hidden
    padding-top: 14%
  .activity-title
    width: 200px
    height: 30px
    margin-left: 100px
    margin-top: 6px
    text-align: center
    color: #fdfb92
    line-height: 32px
    font-weight: 700
    text-shadow: 0px .6px 0px #f79325
  .activity-cover
    width: 258px
    height: 164px
    margin-left: 70px
    margin-top: 28px
    img
      width: 260px
      height: 165px
      border-radius: 35px
  .activity-status
    width: 70px
    height: 30px
    position: absolute
    left: 40%
    bottom: 90px
    &.ing
      background: url("../../img/project_demo/ing.png") no-repeat
      background-size: 100% 100%
    &.end
      background: url("../../img/project_demo/end.png") no-repeat
      background-size: 100% 100%
    &.pre
      background: url("../../img/project_demo/nostart.png") no-repeat
      background-size: 100% 100%
  .activity-desc
    width: 190px
    height: 50px
    margin: 0 auto
    margin-top: 40px
    font-size: 12px
    color: #fff
    text-align: center
    line-height: 24px
    .num
      span.cup
        display: inline-block
        width: 14px
        height: 10px
        background: red
        position: static
        background: url("../../img/project_demo/cup.png") no-repeat
        background-size: 100% 100%
        margin-right: 3px
  @keyframes blurAnimate
    0%
      transform: scale(1.05, 1.05)
    100%
      transform: scale(1.1, 1.1)
  @keyframes jump
    0%
      top: 0
    50%
      top: 100px
    100%
      top: 0
  @keyframes shrink
    0%
      width:90px
      height: 60px
      background: rgba(120,120,120,.3)
    65%
      width: 10px
      height: 5px
      margin-left: -5px
      background: rgba(120,120,120,.3)
      box-shadow: 0 0 25px 20px rgba(20,20,20,.3)
    100%
      width: 90px
      height:60px
      background: rgba(120,120,120,.1)
      box-shadow: 0 0 25px 20px rgba(20,20,20,.1)
</style>

