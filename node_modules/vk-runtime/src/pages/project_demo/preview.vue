<template lang="jade">
  transition(name="extension",enter-active-class="animated fadeInRight",leave-active-class="animated fadeOutRight")
  	.upload-container(v-if="work")
  		.mask-shadow
  			pd-back(:title_cn="work.name")
  			.video-box(:class="{ 'animated fadeInRight' : isActive }")
  				video-box(:videoSrc="work.url",:autoPlay="false",:playEndAction="playEndAction",:source="source",:materialId="currentMaterialId",@fullScreen="fullScreen")
  			.button-conainer
  				.button(v-for="(item, i) in buttons", @click="buttonClick(item.key)") {{item.text}}
</template>
<script>
  import axios from 'axios'
  import pdBack from '../common/top_part.vue'
  import videoBox from './common/vk_video.vue'
  import Toolkit from './js/toolkit.js'
  export default {
    mixins: [],
    data(){
      return {
      	buttons: [{text:'取消',key:'cancel'},{text:'确定',key:'confirm'}],
      	isActive: true,
      	title: '预览',
      	currentMaterialId: "2",
      	work: null,
      	source: '',
      	full: false
      }
    },
    props: {
      // title_eng: {
      //   default: "",
      //   type: String
      // }
    },
    components: {
    	pdBack,
    	videoBox
    },

    created(){
      
    },
    mounted() {
    	axios.get(`/rest/activity/api/activity/user/resource/getStudentResourceById/${this.$route.params.videoId}`)
	    .then((res) => {
	    	this.work = res.data.data
	    })
	    .catch((err) => {
	    })
    },
    methods: {
    	playEndAction(){

    	},
    	fullScreen(){
    		this.full = !state
    	},
    	buttonClick(key){
    		if (key === 'cancel') {
          window.history.back()
    		}else{
    			//参赛
    			axios.post(`/rest/activity/api/activity/user/resource/signUpActivityByResourceIdAndActivityId/${this.$route.params.videoId}/${this.$route.params.pdId}`)
	        .then((res) => {
	        	this.$router.push({path: `/pd_video/${this.$route.params.videoId}/${this.$route.params.pdId}`})
	        })
	        .catch((err) => {
	        })

    		}
      }
    }
  }
</script>

<style lang="stylus" scoped>
	*
		box-sizing: border-box
		-moz-user-select: none
		-webkit-user-select: none
		-ms-user-select: none
		-khtml-user-select: none
		user-select: none
		-webkit-font-smoothing: antialiased
	.upload-container
		background: #652a8c url("../../img/project_demo/bg.png") no-repeat
		background-size: 100% auto
		color: #fff
		text-align: center
		.mask-shadow
			width: 100%
			height: 100%
			background: rgba(0,0,0,0.5)
			position: absolute
			padding: 120px 280px 220px 280px
			.tips
				width: 30px
				min-height: 200px
				background:rgba(255,102,0,0.8)
				border-radius: 0 16px 16px 0
				position: absolute
				right: -30px
				top: -440px
				padding-top: 20px
		.video-box
			width: 100%
			height: 100%
			text-align: left
			border-radius: 25px
			background: #8561ED
			.video-content
				.video-mask
					display: none
		.button-conainer
			margin-top: 50px
			.button
				display: inline-block
				width: 140px
				height: 40px
				font-size: 18px
				line-height: 38px
				cursor: pointer
				&:first-of-type
					background: url("../../img/project_demo/upload_status_2.png") no-repeat
					background-size: 100% 100%
					margin-right: 40px
				&:last-child
					background: url("../../img/project_demo/upload_status_1.png") no-repeat
					background-size: 100% 100%
					margin-right: 0 
</style>

