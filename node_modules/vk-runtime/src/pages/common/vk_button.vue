<template lang="jade">
  .vk-button
    div.vk-btn(v-if="isNewTab&&(type.indexOf('loading')==-1)&&(type.indexOf('disable')==-1)",:class="'vk-btn-'+type",@click.stop="openNew",:style="icon!=''?'padding-left:25px':''")
      .icon-img(v-if="icon!=''",:class="icon")
      span {{text}}
    div.vk-btn(v-if="!isNewTab&&(type.indexOf('loading')==-1)&&(type.indexOf('disable')==-1)",:class="'vk-btn-'+type",@click.stop="clickFun",:style="icon!=''?'padding-left:25px':''")
      .icon-img(v-if="icon!=''",:class="icon")
      span {{text}}
    div.vk-btn(v-if="type.indexOf('disable')>-1 && type.indexOf('alert') == -1",:class="'vk-btn-'+type",:style="icon!=''?'padding-left:25px':''")
      .icon-img(v-if="icon!=''",:class="icon")
      span {{text}}
      .icon-img-right(v-if="type.indexOf('locked')>-1")
    div.vk-btn(v-if="type.indexOf('disable')>-1 && type.indexOf('alert') > -1",:class="'vk-btn-'+type",@click.stop="popAlert",:style="icon!=''?'padding-left:25px':''")
      .icon-img(v-if="icon!=''",:class="icon")
      span {{text}}
    div.vk-btn(v-if="type.indexOf('loading')>-1",:class="'vk-btn-'+type",style="padding-left:25px")
      img.icon-loading(src="../../img/readers/loading.gif")
      span {{text}}
</template>
<script>
  import _utils from "../../utils/_untils.js"

  export default {
    data: function () {
      return {}
    },
    //target
    props: {
      //类型包括：大按钮隐藏：lg-hide ，大按钮可用： lg-enable， 小按钮：sl， 白线：white-line
      type: {
        require: false,
        type: String,
        default: "lg-hide"
      },
      text: {
        require: false,
        type: String,
        default: "未定义"
      },
      link: {
        require: false,
        type: String,
        default: "#"
      },
      isNewTab: {
        require: false,
        type: Boolean,
        default: false
      },
      icon: {
        require: false,
        type: String,
        default: ""
      },
      //如果要使用该属性 请将isNewTab设为false
      clickFun: {
        require: false,
        type: Function,
        default: function () {
          this.goToLink()
        }
      },
      clickId: {
        require: false,
        type: String,
        default: "click"
      },
      alertText: {
        require: false,
        type: String,
        default: ""
      }
    },
    methods: {
      openNew() {
        sa.track('learning_click', {
          'click_id': 'pc_learning_' + this.clickId
        })
        this.$playSound("click")
        window.open(this.link)
      },
      goToLink(){
        sa.track('learning_click', {
          'click_id': 'pc_learning_' + this.clickId
        })
        this.$playSound("click")
        if (this.link === '/') {
          _utils.gotoFirstPage()
        } else {
          this.$router.push(this.link)
        }
      },
      popAlert() {
        this.$showToast(this.alertText)
      }
    }
  }
</script>

<style lang="stylus" scoped>
  .vk-button
    position: relative
    text-align: center

  .vk-btn
    box-sizing: border-box
    cursor: pointer
    color: #FFFFFF
    border: solid 0 #FFFFFF
    background-size: 100% 100%
    background-repeat: no-repeat
    margin: auto
    background: url("../../img/icon/icon_header.png") -414px -367px no-repeat
    img
      float: left
      margin: 10px -20px 10px 30px
    .icon-img
      position: absolute
      left: 25px
      top: 10px
      height: 30px
      width: 30px
      background: url("../../img/icon/icon_small.png") no-repeat
    .icon-activity
      background-position: -10px -10px
    .icon-eye
      background-position: -58px -10px

  .icon-img-right
    position: absolute
    right: 5px
    top: 17px
    height: 30px
    width: 30px
    background: url("../../img/icon/icon_small.png") no-repeat
    background-position: 2px -57px

  .vk-btn-sl, .vk-btn-sl-enable, .vk-btn-sl-disable, .vk-btn-sl-disable-alert
    height: 45px
    width: 140px
    font-size: 18px
    line-height: 45px
    background-color: #ff6600
    box-shadow: inset 0 -6px 0 0 rgba(0, 0, 0, 0.1)
    border-radius: 43px
    &:hover
      background-color: rgba(255, 102, 0, 0.8)

  .vk-btn-sl-disable
    cursor: not-allowed
    border: solid 3px rgba(255, 255, 255, 0.9)
    background-color: rgba(192, 192, 192, 1)
    line-height: 39px
    &:hover
      background-color: rgba(192, 192, 192, 0.8)

  .vk-btn-sl-disable-alert
    cursor: default
    border: solid 3px rgba(255, 255, 255, 0.9)
    background-color: rgba(192, 192, 192, 1)
    line-height: 39px
    &:hover
      background-color: rgba(192, 192, 192, 1)

  .vk-btn-ssl, .vk-btn-ssl-enable, .vk-btn-ssl-disable, .vk-btn-ssl-disable-alert
    height: 40px
    width: 100px
    font-size: 18px
    line-height: 39px
    background-color: #ff6600
    box-shadow: inset 0 -4px 0 0 rgba(0, 0, 0, 0.1)
    border-radius: 20px
    background-image:url(../../img/task_card/button@2x.png)
    background-size: 27px 14px
    background-position: 4px 3px
    &:hover
      background-color: #ff8533

  .vk-btn-ssl-disable
    height: 40px
    cursor: not-allowed
    background-color: rgba(192, 192, 192, 1)
    line-height: 40px
    &:hover
      background-color: #ccc

  .vk-btn-ssl-disable-alert
    height: 46px 
    cursor: default
    border: solid 3px rgba(255, 255, 255, 0.9)
    background-color: rgba(192, 192, 192, 1)
    line-height: 40px
    &:hover
      background-color: #ccc

  .vk-btn-lg-enable, .vk-btn-lg-yellow-enable, .vk-btn-lg-loading
    height: 50px
    width: 180px
    font-size: 22px
    line-height: 50px
    background-color: #ff6600
    box-shadow: inset 0 -6px 0 0 rgba(0, 0, 0, 0.1)
    border-radius: 43px
    &:hover
      background-color: rgba(255, 102, 0, 0.8)

  .vk-btn-lg-loading
    cursor: not-allowed
    .icon-loading
      margin: 10px -25px 10px 10px

  .vk-btn-lg-disable, .vk-btn-lg-disable-locked
    height: 50px
    width: 180px
    font-size: 22px
    line-height: 50px
    cursor: not-allowed
    background-color: rgb(192, 192, 192)
    box-shadow: inset 0 -6px 0 0 rgba(0, 0, 0, 0.1)
    border-radius: 43px
    img
      margin-left: 10px

  .vk-btn-lg-disable-alert
      height: 50px
      width: 180px
      font-size: 22px
      line-height: 50px
      cursor: not-allowed
      background-color: rgb(192, 192, 192)
      box-shadow: inset 0 -6px 0 0 rgba(0, 0, 0, 0.1)
      border-radius: 43px
      img
        margin-left: 10px

  .vk-btn-lg-hide, vk-btn-sl-hide
    display: none

  .vk-btn-lg-yellow-enable
    background-color: rgb(255, 182, 0)
    box-shadow: inset 0 -4px 0 0 rgba(0, 0, 0, 0.15)
    border-radius: 43px
    &:hover
      background-color: rgba(255, 182, 0, 0.8)

  .vk-btn-sl-yellow-enable
    height: 80px
    width: 160px
    line-height: 40px
    background-color: rgb(255, 182, 0)
    box-shadow: inset 0 -4px 0 0 rgba(0, 0, 0, 0.15)
    border-radius: 43px
    &:hover
      background-color: rgba(255, 182, 0, 0.8)

  .vk-btn-white-line-enable
    height: 40px
    width: 140px
    font-size: 18px
    line-height: 33px
    box-shadow: inset 0 -6px 0 0 rgba(0, 0, 0, 0.1)
    border: solid 3px rgba(255, 255, 255, 0.9)
    background-color: rgba(255, 102, 0, 1)
    border-radius: 43px
    background-position: -340px -370px
    background-size: 445px 446px
    &:hover
      background-color: rgba(255, 102, 0, 0.8)

  .vk-btn-white-line-disable
    height: 40px
    width: 140px
    font-size: 18px
    line-height: 33px
    cursor: not-allowed
    box-shadow: inset 0 -6px 0 0 rgba(0, 0, 0, 0.1)
    border: solid 3px rgba(255, 255, 255, 0.9)
    background-color: rgba(192, 192, 192, 1)
    border-radius: 43px
    background-position: -340px -370px
    background-size: 445px 446px

  .vk-btn-white-line-disable-alert
    height: 40px
    width: 140px
    font-size: 18px
    line-height: 33px
    cursor: not-allowed
    box-shadow: inset 0 -6px 0 0 rgba(0, 0, 0, 0.1)
    border: solid 3px rgba(255, 255, 255, 0.9)
    background-color: rgba(192, 192, 192, 1)
    border-radius: 43px
    background-position: -340px -370px
    background-size: 445px 446px

  .vk-btn-white-line-hide
    display: none

</style>
