<template lang="jade">
    .equipment-list
      // 弹出框透明背景
      .mask(v-show="isShowMask", @click="closeDialog")
      .equipment-all(v-if="list.length>0")
        .equipment(v-for="item in list")
          .equipment-con(@click="selectEquipment(item)")
            .equivalent-con-selected(v-show="dinoEquipmentObj && dinoEquipmentObj[item.propParts] && dinoEquipmentObj[item.propParts][0] &&  dinoEquipmentObj[item.propParts][0].id == item.id")
            img.equipment-con-img(:src="item.imgUrl")
          .equipment-title(:title="item.name") {{item.name}}
          .equipment-btn(@click="info(item)") 详情
      .none(v-if="list.length<=0 && !isLoading")
      equipmentInfoDialog(v-if="isShowDialog",:title="title",:isShowTitle="true",:currentObj="currentObj",@confirm="confirm",@cancel="cancel",@close="closeDialog")

</template>
<script>
import equipmentInfoDialog from './equipment_info_dialog.vue'
export default {
  data(){
    return {
      isShowMask: false,// 是否显示透明背景
      isShowDialog: false,// 是否显示购买型弹框
      title:"装扮详情",
      currentObj: {}
    }
  },
  components:{
    equipmentInfoDialog
  },
  methods:{
    cancel(){
      this.isShowMask = false
      this.isShowDialog = false
    },
    confirm(){
      this.isShowDialog = false
      this.buyStone()
    },
    closeDialog(){
      this.isShowMask = false
      this.isShowDialog = false
    },
    info(item){
      sa.track('learning_click', {
        'click_id': 'pc_learning_dino_home_equipment_info'
      })
      this.isShowMask = true
      this.isShowDialog = true
      this.currentObj = item
    },
    // 选中装扮
    selectEquipment(item){
    	if(!this.petReloadIng){
        this.$emit('changeDinoEquipmentObj',item)
      }
    }
  },
  props: {
    list: {
      type: Array,
      default: []
    },
    dinoEquipmentObj:{
      type:Object,
      default: function(){
        return {"HEAD_PARTS":[],"FACE_PARTS":[],"HAND_PARTS":[],"BODY_PARTS":[],"LEG_PARTS":[]}
      }
    },
    petReloadIng:{
    	type: Boolean,
      default: false
    },
    isLoading:{
    	type:Boolean,
      default: false
    }
  }
}
</script>

<style lang="stylus" scoped>
.equipment-list
  width: 490px
  height: 400px
  overflow-y: auto
  &::-webkit-scrollbar
    width: 8px
    height: 8px
    -webkit-border-radius: 4px
    -moz-border-radius: 4px
    border-radius: 4px
  &::-webkit-scrollbar-track
    background: rgba(0, 0, 0, 0)
  &::-webkit-scrollbar-thumb
    background: rgba(0, 0, 0, 0.1)
    border-radius: 4px
  .none
    width: 364px
    height: 264px
    margin-top: 0
    margin-left: 60px
    background: center center no-repeat url("../../../img/dino/none.png")
    background-size: 100% 100%
  .mask
    width: 100%
    height: 100%
    position: fixed
    top: 0
    left: 0
    right: 0
    bottom: 0
    background: #000
    background-color: rgba(0, 0, 0, 0.6)
    z-index: 10
  .equipment
    float: left
    display: inline-block
    width: 100px
    height: 205px
    margin-left: 17px
    text-align: center
    color: rgba(255,255,255,1)
    font-size: 14px
    .equipment-con
      position: relative
      width: 70px
      height:98px
      background: center center no-repeat url("../../../img/dino_mall/equipment_bg.png")
      background-size: 100% 100%
      padding: 22px 15px 0 15px
      cursor: pointer
      .equipment-con-img
        width: 70px
        height: 70px
        margin-bottom: 4px
      .equivalent-con-selected
        position: absolute
        top: 50%
        left: 50%
        width: 111px
        height: 130px
        margin-left: -55px
        margin-top: -65px
        background: center center no-repeat url("../../../img/dino_mall/sun_bg.png")
        background-size: 100% 100%
      .equivalent-con-use
        position: absolute
        right: 0
        top: 0
        width: 52px
        height: 53px
        background: center center no-repeat url("../../../img/dino/ing.png")
        background-size: 100% 100%

    .equipment-title
      width:100px
      height: 20px
      line-height: 20px
      margin-top: 11px
      overflow: hidden
      text-overflow: ellipsis
      white-space: nowrap
    .equipment-btn
      width: 60px
      height: 30px
      line-height: 30px
      margin-top: 7px
      margin-left: 20px
      background: center center no-repeat url("../../../img/dino_mall/btn_bg.png")
      background-size: 100% 100%
      cursor: pointer
</style>

