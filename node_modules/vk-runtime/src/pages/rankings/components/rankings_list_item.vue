<template lang="jade">
.rankings-list-item(v-if="item.rank",:class="{'rankings-list-item-self': isSelf}", @click.stop="doClick")
  .item-num.text-color {{item.rank}}
  .item-user-header(ref="userHeader")
    img.header-img(src="../../../img/common/avatar/boy_1.png",v-if="!item.avatarUrl && (item.avatar == 'default'|| !item.avatar)")
    img.header-img(src="../../../img/common/avatar/boy_1.png",v-if="!item.avatarUrl && item.avatar=='boy_1'")
    img.header-img(src="../../../img/common/avatar/boy_2.png",v-if="!item.avatarUrl && item.avatar=='boy_2'")
    img.header-img(src="../../../img/common/avatar/boy_3.png",v-if="!item.avatarUrl && item.avatar=='boy_3'")
    img.header-img(src="../../../img/common/avatar/boy_4.png",v-if="!item.avatarUrl && item.avatar=='boy_4'")
    img.header-img(src="../../../img/common/avatar/girl_1.png",v-if="!item.avatarUrl && item.avatar=='girl_1'")
    img.header-img(src="../../../img/common/avatar/girl_2.png",v-if="!item.avatarUrl && item.avatar=='girl_2'")
    img.header-img(src="../../../img/common/avatar/girl_3.png",v-if="!item.avatarUrl && item.avatar=='girl_3'")
    img.header-img(src="../../../img/common/avatar/girl_4.png",v-if="!item.avatarUrl && item.avatar=='girl_4'")
    img.header-img(:src="item.avatarUrl", v-if="item.avatarUrl")
  .item-user-name(:class="{'text-color': isSelf}") {{item.studentName}}
  .item-user-stone 
    span(v-if="item.eggshellNumber") {{item.eggshellNumber}}
    .item-user-stone-icon(v-if="item.eggshellNumber")
  .item-user-score {{item.totalScore}}åˆ†  
</template>
<script>
  export default {
    props: {
      isSelf: {
        type: Boolean,
        default: false
      },
      item: {
        type: Object,
        default() {
          return {}
        }
      }
    },
    methods: {
      doClick() {
        this.$emit('showDetail', {
          top: this.$refs.userHeader.getBoundingClientRect().top + 25,
          right: this.$refs.userHeader.getBoundingClientRect().right,
          isSelf: this.item.isSelf,
          isNormal: true,
          data: this.item.onlineClassIndicators ? this.item.onlineClassIndicators.slice() : this.item.isSelf ? [] : [{
            doHomeworkScore: this.item.homeworkTotalScore || 0,
            doPreviewScore: this.item.preClassTotalScore || 0,
            classroomScore: this.item.classPerformanceTotalScore || 0
          }],
          studentInfo: {
            studentId: this.item.studentId,
            studentName: this.item.studentName || '',
            ageGroup: this.item.ageGroup || '',
            city: this.item.city || '',
            levelTitle: this.item.unitName || '',
            hasClass: this.item.hasClass || false
          }
        })
      }
    }
  }
</script>
<style lang="stylus" scoped>
.text-color
  color: rgba(255,203,0,1)
  font-weight: bold

.rankings-list-item
  width: 600px
  height: 60px
  background: rgba(255,255,255,0.2)
  border-radius: 29px
  margin: 0 auto
  display: flex
  display: -webkit-flex
  align-items: center
  justify-content: flex-start
  -webkit-align-items: center
  -webkit-justify-content: flex-start
  font-size: 24px
  color: #fff
  cursor: pointer
  margin-bottom: 10px

  .item-num
    box-sizing: border-box
    width: 44px
    padding-right: 10px
    text-align: end
    font-weight: bold
    
  .item-user-header
    width: 50px
    height: 50px
    margin-right: 10px
    border-radius: 100% 100%
    overflow: hidden

    .header-img
      display: block
      width: 100%
      height: 100%

  .item-user-name
    width: 170px
    text-overflow: ellipsis
    white-space: nowrap
    overflow: hidden

  .item-user-stone
    flex: 1
    -webkit-flex: 1
    display: flex
    display: -webkit-flex
    align-items: center
    justify-content: flex-start
    -webkit-align-items: center
    -webkit-justify-content: flex-start

    .item-user-stone-icon
      width: 28px
      height: 28px
      margin-left: 4px
      background: url("../../../img/rankings/energy_store@2x.png") no-repeat
      background-size: 100% 100%

  .item-user-score
    box-sizing: border-box
    width: 125px
    text-align: end
    padding-right: 30px

.rankings-list-item-self
  background: rgba(27,35,181,0.1609)

@media screen and (min-width: 1920px)
  .rankings-list-item
    width: 760px
    .item-user-stone
      padding-left: 80px
</style>

