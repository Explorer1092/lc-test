<template lang="jade">
  .result
    top-part(:ifShow="false", gobackurl="/")
    iframe.ct-work(ref="ctWork",:src="url")
</template>
<script>
  import cookies from 'cookies-js'
  import axios from 'axios'
  import topPart from '../common/top_part.vue'
  import untils from '../../utils/_untils.js'
  export default {
    data: function () {
      return {
        url: ""
      }
    },
    components: {
      topPart
    },
    computed: {},
    mounted () {
      this.getTest()
    },
    methods: {
      getTest(){
        axios.get('/rest/learninggw/api/pc/homepage/getStudentCtStartExam', {
          params: {
            studentId: cookies.get("studentId")
          }
        }).then((res) => {
          if (res.data.code == 200 && res.data.data.ctEnable) {
            this.url = res.data.data.ctUrl
          } else {
            this.$showToast("没有权限，请联系您的班主任老师，谢谢！")
            setTimeout(() => {
              untils.gotoFirstPage()
            }, 3000)
          }
        }
        ).catch((err) => {
          this.$showToast("没有权限，请联系您的班主任老师，谢谢！")
          setTimeout(() => {
            untils.gotoFirstPage()
          }, 3000)
        })
      }
    }
  }
</script>

<style lang="stylus" scoped>
  .result
    text-align: center

  .ct-work
    border: none
    width: 85%
    height: 85%
    margin: 64px auto 0 auto

  .theme-title-ch
    font-size: 36px
    text-align: center
    color: rgb(255, 255, 255)
    height: 47px
    margin-top: 10px

  .theme-title-en
    font-size: 24px
    text-align: center
    color: rgb(255, 255, 255)

</style>
