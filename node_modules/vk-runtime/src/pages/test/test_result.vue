<template lang="jade">
  .result
    top-part(gobackurl="/",:ifShow="false")
    ct-result.ct-result-body(:dataAll="dataAll",bodyColor="no-color")
</template>
<script>
  //获取CT报告组件 npm install http://npm.vipkid.com.cn/ctreport/-/ctreport-1.0.14.tgz
  import ctResult from 'ctreport'
  import cookies from 'cookies-js'
  import axios from 'axios'
  import topPart from '../common/top_part.vue'
  export default {
    data: function () {
      return {
        dataAll: {}
      }
    },
    components: {
      ctResult, topPart
    },
    computed: {},
    mounted () {
      this.getData()
      document.body.style.overflowY = "auto"
    },
    destroyed(){
      document.body.style.overflow = "hidden"
    },
    methods: {
      getData(){
        const onlineClassId = this.$route.params.onlineClassId
        const examUuid = this.$route.params.examUuid
        const params = {
          studentId: cookies.get("studentId")
        }
        if (onlineClassId != 0) {
          params.onlineClassId = onlineClassId
        }
        if (examUuid != 0) {
          params.examUuid = examUuid
        }
        axios.get('/rest/learninggw/api/pc/ct/report/result', {
          params: params
        }).then((res) => {
          this.dataAll = res.data.data
        })
      }
    }
  }
</script>

<style lang="stylus" scoped>
  .result
    width: 100%
    overflow-y: auto

  .no-color
    background: #433798;
    background: -moz-linear-gradient(top, #433798 0%, #7f2891 100%);
    background: -webkit-linear-gradient(top, #433798 0%, #7f2891 100%);
    background: linear-gradient(to bottom, #433798 0%, #7f2891 100%);
</style>
