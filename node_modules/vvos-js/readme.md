# vvos javascript SDK

```text

通过javascript VVOS 模块上传文件

```

##  使用示例

```javascript

  let upload = new VVOS ({
    api:{
      // 上传时取得token
      gettoken: 'http://api/gettoken',
      // 上传完成后通知接口
      notifier: 'http://api/notifier',
      // 判断上传文是否存在
      exists: 'http://api/exists'
    },
    cover: true,
    client: 'vos-js.sdk 1.0.0.0',
  });

  // 添加文件
  upload.addfiles([{file}]);

  // 提交文件
  upload.submit({
    header: {},
    // 取得token时添加业务参数
    gettoken: {},
    // 添加业务参数
    notifier: {},
    // 添加业务参数
    exists: {}
  },function(err, data){
    console.log(err, data);
  },function(err, process){
    // 上传进度回调
  });

```

## 接口说明

|接口方法   |  方法参数 | 说明  |
|:---|---|---|
| addfiles   |  Array... [{file},...] | file文件对象的数组  |
| submit  | function  |  数据提交，上传成功失败后回调该函数 |


### web api 说明

```




请求:
{
    "requestToken": "e30.eyJyZXF1ZXN0SWQiOiJucmg0bHMt.sNLueMKv2C69b0",  // vvos 自动生成 requestToken 
    "keys": [
        "test/zsd01.mp4"
        "test/zsd02.mp4"
        "test/zsd03.mp4"
    ]
}

```

# API: gettoken 

接口说明： 取得上传的权限，并重命名文件

其他：为后端服务接口，前端只需要了解即可

### 请求参数(Request Parameters)

|名称| 类型 | 描述 |
|:---|---|---|
| requestToken | string(加密串) | vvos-js自动生成加密串 |
| keys | 数组 |  addfiles自动生成，由用户add的文件数决定 |

### 响应参数(Response Elements)

``` javascript 
{
    "accessToken":"poAcahHOGs5Sx9heRr4eeNgQwRsTh4erop5xlzQRA",
    "keys": {
        "test/zsd01.mp4":"server/test/zsd01.mp4"
        "test/zsd02.mp4":"server/test/zsd02.mp4"
        "test/zsd03.mp4":"server/test/zsd03.mp4"
        // "客户端的文件名":"服务端的重命名文件"
    }
       
    

}
```

|名称| 类型 | 描述 |
|:---|---|---|
| accessToken | string(加密串) | 包含本次上传的所有权限 |
| keys | 数组 | 如果需要修改用户端上传的文件名 |



# API:  notifier  

接口说明： 上传成功后通知服务端已经上传成功，服务端多平台同步 
其他：为后端服务接口，前端只需要了解即可

### 请求参数(Request Parameters)

``` javascript 
{
    "accessToken":"poAcahHOGs5Sx9heRr4eeNgQwRsTh4erop5xlzQRA",
    "keys":[
        "server/test/zsd02.mp4"
       // "已经上传成功的文件名"
    ]

}
```

|名称| 类型 | 描述 |
|:---|---|---|
| accessToken | string(加密串) | 包含本次上传的所有权限 |
| keys | 数组 | 已经上传成功的文件名 |



### 响应参数(Response Elements)

``` javascript 
{
	"code": "SUCCESS",
	"objects": [{
		"key": "test/zsd02.mp4",
		"url": "http://7xrziv.com1.z0.glb.clouddn.com/test/zsd02.mp4"
	}],
	"success": true
}
```

## 其他说明

1.七牛：文件超过4M，则会分段上传。
2.阿里：文件超过4M，则会分段上传。



